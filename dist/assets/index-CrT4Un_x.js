(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var at=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Em(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var Pd={exports:{}},$a={},Td={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yr=Symbol.for("react.element"),Pm=Symbol.for("react.portal"),Tm=Symbol.for("react.fragment"),Am=Symbol.for("react.strict_mode"),Dm=Symbol.for("react.profiler"),Im=Symbol.for("react.provider"),Mm=Symbol.for("react.context"),Om=Symbol.for("react.forward_ref"),Rm=Symbol.for("react.suspense"),$m=Symbol.for("react.memo"),Lm=Symbol.for("react.lazy"),Qo=Symbol.iterator;function Um(t){return t===null||typeof t!="object"?null:(t=Qo&&t[Qo]||t["@@iterator"],typeof t=="function"?t:null)}var Ad={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dd=Object.assign,Id={};function jn(t,e,n){this.props=t,this.context=e,this.refs=Id,this.updater=n||Ad}jn.prototype.isReactComponent={};jn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Md(){}Md.prototype=jn.prototype;function Hl(t,e,n){this.props=t,this.context=e,this.refs=Id,this.updater=n||Ad}var Wl=Hl.prototype=new Md;Wl.constructor=Hl;Dd(Wl,jn.prototype);Wl.isPureReactComponent=!0;var Zo=Array.isArray,Od=Object.prototype.hasOwnProperty,Kl={current:null},Rd={key:!0,ref:!0,__self:!0,__source:!0};function $d(t,e,n){var r,a={},i=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(i=""+e.key),e)Od.call(e,r)&&!Rd.hasOwnProperty(r)&&(a[r]=e[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:yr,type:t,key:i,ref:l,props:a,_owner:Kl.current}}function Fm(t,e){return{$$typeof:yr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gl(t){return typeof t=="object"&&t!==null&&t.$$typeof===yr}function zm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xo=/\/+/g;function ii(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zm(""+t.key):e.toString(36)}function Qr(t,e,n,r,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case yr:case Pm:l=!0}}if(l)return l=t,a=a(l),t=r===""?"."+ii(l,0):r,Zo(a)?(n="",t!=null&&(n=t.replace(Xo,"$&/")+"/"),Qr(a,e,n,"",function(d){return d})):a!=null&&(Gl(a)&&(a=Fm(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(Xo,"$&/")+"/")+t)),e.push(a)),1;if(l=0,r=r===""?".":r+":",Zo(t))for(var o=0;o<t.length;o++){i=t[o];var c=r+ii(i,o);l+=Qr(i,e,n,c,a)}else if(c=Um(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=r+ii(i,o++),l+=Qr(i,e,n,c,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Tr(t,e,n){if(t==null)return t;var r=[],a=0;return Qr(t,r,"","",function(i){return e.call(n,i,a++)}),r}function qm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Le={current:null},Zr={transition:null},Bm={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:Zr,ReactCurrentOwner:Kl};function Ld(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Tr,forEach:function(t,e,n){Tr(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tr(t,function(){e++}),e},toArray:function(t){return Tr(t,function(e){return e})||[]},only:function(t){if(!Gl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=jn;Z.Fragment=Tm;Z.Profiler=Dm;Z.PureComponent=Hl;Z.StrictMode=Am;Z.Suspense=Rm;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bm;Z.act=Ld;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Dd({},t.props),a=t.key,i=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,l=Kl.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)Od.call(e,c)&&!Rd.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:yr,type:t.type,key:a,ref:i,props:r,_owner:l}};Z.createContext=function(t){return t={$$typeof:Mm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Im,_context:t},t.Consumer=t};Z.createElement=$d;Z.createFactory=function(t){var e=$d.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:Om,render:t}};Z.isValidElement=Gl;Z.lazy=function(t){return{$$typeof:Lm,_payload:{_status:-1,_result:t},_init:qm}};Z.memo=function(t,e){return{$$typeof:$m,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=Zr.transition;Zr.transition={};try{t()}finally{Zr.transition=e}};Z.unstable_act=Ld;Z.useCallback=function(t,e){return Le.current.useCallback(t,e)};Z.useContext=function(t){return Le.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return Le.current.useDeferredValue(t)};Z.useEffect=function(t,e){return Le.current.useEffect(t,e)};Z.useId=function(){return Le.current.useId()};Z.useImperativeHandle=function(t,e,n){return Le.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return Le.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return Le.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return Le.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return Le.current.useReducer(t,e,n)};Z.useRef=function(t){return Le.current.useRef(t)};Z.useState=function(t){return Le.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return Le.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return Le.current.useTransition()};Z.version="18.3.1";Td.exports=Z;var N=Td.exports;const ca=Cm(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm=N,Hm=Symbol.for("react.element"),Wm=Symbol.for("react.fragment"),Km=Object.prototype.hasOwnProperty,Gm=Vm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jm={key:!0,ref:!0,__self:!0,__source:!0};function Ud(t,e,n){var r,a={},i=null,l=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)Km.call(e,r)&&!Jm.hasOwnProperty(r)&&(a[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)a[r]===void 0&&(a[r]=e[r]);return{$$typeof:Hm,type:t,key:i,ref:l,props:a,_owner:Gm.current}}$a.Fragment=Wm;$a.jsx=Ud;$a.jsxs=Ud;Pd.exports=$a;var s=Pd.exports,Fd={exports:{}},Ze={},zd={exports:{}},qd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,C){var $=I.length;I.push(C);e:for(;0<$;){var q=$-1>>>1,T=I[q];if(0<a(T,C))I[q]=C,I[$]=T,$=q;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var C=I[0],$=I.pop();if($!==C){I[0]=$;e:for(var q=0,T=I.length,L=T>>>1;q<L;){var V=2*(q+1)-1,K=I[V],G=V+1,ne=I[G];if(0>a(K,$))G<T&&0>a(ne,K)?(I[q]=ne,I[G]=$,q=G):(I[q]=K,I[V]=$,q=V);else if(G<T&&0>a(ne,$))I[q]=ne,I[G]=$,q=G;else break e}}return C}function a(I,C){var $=I.sortIndex-C.sortIndex;return $!==0?$:I.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,m=3,y=!1,b=!1,S=!1,j=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(I){for(var C=n(d);C!==null;){if(C.callback===null)r(d);else if(C.startTime<=I)r(d),C.sortIndex=C.expirationTime,e(c,C);else break;C=n(d)}}function g(I){if(S=!1,f(I),!b)if(n(c)!==null)b=!0,A(w);else{var C=n(d);C!==null&&z(g,C.startTime-I)}}function w(I,C){b=!1,S&&(S=!1,p(M),M=-1),y=!0;var $=m;try{for(f(C),h=n(c);h!==null&&(!(h.expirationTime>C)||I&&!E());){var q=h.callback;if(typeof q=="function"){h.callback=null,m=h.priorityLevel;var T=q(h.expirationTime<=C);C=t.unstable_now(),typeof T=="function"?h.callback=T:h===n(c)&&r(c),f(C)}else r(c);h=n(c)}if(h!==null)var L=!0;else{var V=n(d);V!==null&&z(g,V.startTime-C),L=!1}return L}finally{h=null,m=$,y=!1}}var v=!1,_=null,M=-1,O=5,U=-1;function E(){return!(t.unstable_now()-U<O)}function D(){if(_!==null){var I=t.unstable_now();U=I;var C=!0;try{C=_(!0,I)}finally{C?R():(v=!1,_=null)}}else v=!1}var R;if(typeof x=="function")R=function(){x(D)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,k=P.port2;P.port1.onmessage=D,R=function(){k.postMessage(null)}}else R=function(){j(D,0)};function A(I){_=I,v||(v=!0,R())}function z(I,C){M=j(function(){I(t.unstable_now())},C)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){b||y||(b=!0,A(w))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(I){switch(m){case 1:case 2:case 3:var C=3;break;default:C=m}var $=m;m=C;try{return I()}finally{m=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,C){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var $=m;m=I;try{return C()}finally{m=$}},t.unstable_scheduleCallback=function(I,C,$){var q=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?q+$:q):$=q,I){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=$+T,I={id:u++,callback:C,priorityLevel:I,startTime:$,expirationTime:T,sortIndex:-1},$>q?(I.sortIndex=$,e(d,I),n(c)===null&&I===n(d)&&(S?(p(M),M=-1):S=!0,z(g,$-q))):(I.sortIndex=T,e(c,I),b||y||(b=!0,A(w))),I},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(I){var C=m;return function(){var $=m;m=C;try{return I.apply(this,arguments)}finally{m=$}}}})(qd);zd.exports=qd;var Ym=zd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qm=N,Qe=Ym;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bd=new Set,er={};function Os(t,e){hn(t,e),hn(t+"Capture",e)}function hn(t,e){for(er[t]=e,t=0;t<e.length;t++)Bd.add(e[t])}var $t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fi=Object.prototype.hasOwnProperty,Zm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ec={},tc={};function Xm(t){return Fi.call(tc,t)?!0:Fi.call(ec,t)?!1:Zm.test(t)?tc[t]=!0:(ec[t]=!0,!1)}function e0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function t0(t,e,n,r){if(e===null||typeof e>"u"||e0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ue(t,e,n,r,a,i,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=l}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pe[t]=new Ue(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pe[e]=new Ue(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pe[t]=new Ue(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pe[t]=new Ue(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pe[t]=new Ue(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pe[t]=new Ue(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pe[t]=new Ue(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pe[t]=new Ue(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pe[t]=new Ue(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jl=/[\-:]([a-z])/g;function Yl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Jl,Yl);Pe[e]=new Ue(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Jl,Yl);Pe[e]=new Ue(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Jl,Yl);Pe[e]=new Ue(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pe[t]=new Ue(t,1,!1,t.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new Ue("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pe[t]=new Ue(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ql(t,e,n,r){var a=Pe.hasOwnProperty(e)?Pe[e]:null;(a!==null?a.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(t0(e,n,a,r)&&(n=null),r||a===null?Xm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qt=Qm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ar=Symbol.for("react.element"),Ks=Symbol.for("react.portal"),Gs=Symbol.for("react.fragment"),Zl=Symbol.for("react.strict_mode"),zi=Symbol.for("react.profiler"),Vd=Symbol.for("react.provider"),Hd=Symbol.for("react.context"),Xl=Symbol.for("react.forward_ref"),qi=Symbol.for("react.suspense"),Bi=Symbol.for("react.suspense_list"),eo=Symbol.for("react.memo"),Kt=Symbol.for("react.lazy"),Wd=Symbol.for("react.offscreen"),sc=Symbol.iterator;function Cn(t){return t===null||typeof t!="object"?null:(t=sc&&t[sc]||t["@@iterator"],typeof t=="function"?t:null)}var he=Object.assign,li;function $n(t){if(li===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);li=e&&e[1]||""}return`
`+li+t}var oi=!1;function ci(t,e){if(!t||oi)return"";oi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=r.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{oi=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$n(t):""}function s0(t){switch(t.tag){case 5:return $n(t.type);case 16:return $n("Lazy");case 13:return $n("Suspense");case 19:return $n("SuspenseList");case 0:case 2:case 15:return t=ci(t.type,!1),t;case 11:return t=ci(t.type.render,!1),t;case 1:return t=ci(t.type,!0),t;default:return""}}function Vi(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gs:return"Fragment";case Ks:return"Portal";case zi:return"Profiler";case Zl:return"StrictMode";case qi:return"Suspense";case Bi:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hd:return(t.displayName||"Context")+".Consumer";case Vd:return(t._context.displayName||"Context")+".Provider";case Xl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case eo:return e=t.displayName||null,e!==null?e:Vi(t.type)||"Memo";case Kt:e=t._payload,t=t._init;try{return Vi(t(e))}catch{}}return null}function n0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vi(e);case 8:return e===Zl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function r0(t){var e=Kd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Dr(t){t._valueTracker||(t._valueTracker=r0(t))}function Gd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Kd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function da(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hi(t,e){var n=e.checked;return he({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function nc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jd(t,e){e=e.checked,e!=null&&Ql(t,"checked",e,!1)}function Wi(t,e){Jd(t,e);var n=cs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ki(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ki(t,e.type,cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ki(t,e,n){(e!=="number"||da(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ln=Array.isArray;function an(t,e,n,r){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cs(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Gi(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return he({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ac(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Ln(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cs(n)}}function Yd(t,e){var n=cs(e.value),r=cs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ic(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Qd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ji(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Qd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ir,Zd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ir=Ir||document.createElement("div"),Ir.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ir.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a0=["Webkit","ms","Moz","O"];Object.keys(qn).forEach(function(t){a0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qn[e]=qn[t]})});function Xd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qn.hasOwnProperty(t)&&qn[t]?(""+e).trim():e+"px"}function eu(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=Xd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var i0=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yi(t,e){if(e){if(i0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Qi(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zi=null;function to(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xi=null,ln=null,on=null;function lc(t){if(t=jr(t)){if(typeof Xi!="function")throw Error(F(280));var e=t.stateNode;e&&(e=qa(e),Xi(t.stateNode,t.type,e))}}function tu(t){ln?on?on.push(t):on=[t]:ln=t}function su(){if(ln){var t=ln,e=on;if(on=ln=null,lc(t),e)for(t=0;t<e.length;t++)lc(e[t])}}function nu(t,e){return t(e)}function ru(){}var di=!1;function au(t,e,n){if(di)return t(e,n);di=!0;try{return nu(t,e,n)}finally{di=!1,(ln!==null||on!==null)&&(ru(),su())}}function sr(t,e){var n=t.stateNode;if(n===null)return null;var r=qa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var el=!1;if($t)try{var En={};Object.defineProperty(En,"passive",{get:function(){el=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{el=!1}function l0(t,e,n,r,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(u){this.onError(u)}}var Bn=!1,ua=null,ha=!1,tl=null,o0={onError:function(t){Bn=!0,ua=t}};function c0(t,e,n,r,a,i,l,o,c){Bn=!1,ua=null,l0.apply(o0,arguments)}function d0(t,e,n,r,a,i,l,o,c){if(c0.apply(this,arguments),Bn){if(Bn){var d=ua;Bn=!1,ua=null}else throw Error(F(198));ha||(ha=!0,tl=d)}}function Rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function iu(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function oc(t){if(Rs(t)!==t)throw Error(F(188))}function u0(t){var e=t.alternate;if(!e){if(e=Rs(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return oc(a),t;if(i===r)return oc(a),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=a,r=i;else{for(var l=!1,o=a.child;o;){if(o===n){l=!0,n=a,r=i;break}if(o===r){l=!0,r=a,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,r=a;break}if(o===r){l=!0,r=i,n=a;break}o=o.sibling}if(!l)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function lu(t){return t=u0(t),t!==null?ou(t):null}function ou(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ou(t);if(e!==null)return e;t=t.sibling}return null}var cu=Qe.unstable_scheduleCallback,cc=Qe.unstable_cancelCallback,h0=Qe.unstable_shouldYield,m0=Qe.unstable_requestPaint,xe=Qe.unstable_now,f0=Qe.unstable_getCurrentPriorityLevel,so=Qe.unstable_ImmediatePriority,du=Qe.unstable_UserBlockingPriority,ma=Qe.unstable_NormalPriority,x0=Qe.unstable_LowPriority,uu=Qe.unstable_IdlePriority,La=null,_t=null;function p0(t){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(La,t,void 0,(t.current.flags&128)===128)}catch{}}var pt=Math.clz32?Math.clz32:v0,g0=Math.log,y0=Math.LN2;function v0(t){return t>>>=0,t===0?32:31-(g0(t)/y0|0)|0}var Mr=64,Or=4194304;function Un(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,i=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~a;o!==0?r=Un(o):(i&=l,i!==0&&(r=Un(i)))}else l=n&~a,l!==0?r=Un(l):i!==0&&(r=Un(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&a)&&(a=r&-r,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pt(e),a=1<<n,r|=t[n],e&=~a;return r}function b0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-pt(i),o=1<<l,c=a[l];c===-1?(!(o&n)||o&r)&&(a[l]=b0(o,e)):c<=e&&(t.expiredLanes|=o),i&=~o}}function sl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hu(){var t=Mr;return Mr<<=1,!(Mr&4194240)&&(Mr=64),t}function ui(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vr(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pt(e),t[e]=n}function w0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-pt(n),i=1<<a;e[a]=0,r[a]=-1,t[a]=-1,n&=~i}}function no(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-pt(n),a=1<<r;a&e|t[r]&e&&(t[r]|=e),n&=~a}}var te=0;function mu(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fu,ro,xu,pu,gu,nl=!1,Rr=[],es=null,ts=null,ss=null,nr=new Map,rr=new Map,Jt=[],N0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dc(t,e){switch(t){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":nr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rr.delete(e.pointerId)}}function Pn(t,e,n,r,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},e!==null&&(e=jr(e),e!==null&&ro(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function _0(t,e,n,r,a){switch(e){case"focusin":return es=Pn(es,t,e,n,r,a),!0;case"dragenter":return ts=Pn(ts,t,e,n,r,a),!0;case"mouseover":return ss=Pn(ss,t,e,n,r,a),!0;case"pointerover":var i=a.pointerId;return nr.set(i,Pn(nr.get(i)||null,t,e,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,rr.set(i,Pn(rr.get(i)||null,t,e,n,r,a)),!0}return!1}function yu(t){var e=Ss(t.target);if(e!==null){var n=Rs(e);if(n!==null){if(e=n.tag,e===13){if(e=iu(n),e!==null){t.blockedOn=e,gu(t.priority,function(){xu(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zi=r,n.target.dispatchEvent(r),Zi=null}else return e=jr(n),e!==null&&ro(e),t.blockedOn=n,!1;e.shift()}return!0}function uc(t,e,n){Xr(t)&&n.delete(e)}function S0(){nl=!1,es!==null&&Xr(es)&&(es=null),ts!==null&&Xr(ts)&&(ts=null),ss!==null&&Xr(ss)&&(ss=null),nr.forEach(uc),rr.forEach(uc)}function Tn(t,e){t.blockedOn===e&&(t.blockedOn=null,nl||(nl=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,S0)))}function ar(t){function e(a){return Tn(a,t)}if(0<Rr.length){Tn(Rr[0],t);for(var n=1;n<Rr.length;n++){var r=Rr[n];r.blockedOn===t&&(r.blockedOn=null)}}for(es!==null&&Tn(es,t),ts!==null&&Tn(ts,t),ss!==null&&Tn(ss,t),nr.forEach(e),rr.forEach(e),n=0;n<Jt.length;n++)r=Jt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jt.length&&(n=Jt[0],n.blockedOn===null);)yu(n),n.blockedOn===null&&Jt.shift()}var cn=qt.ReactCurrentBatchConfig,xa=!0;function k0(t,e,n,r){var a=te,i=cn.transition;cn.transition=null;try{te=1,ao(t,e,n,r)}finally{te=a,cn.transition=i}}function C0(t,e,n,r){var a=te,i=cn.transition;cn.transition=null;try{te=4,ao(t,e,n,r)}finally{te=a,cn.transition=i}}function ao(t,e,n,r){if(xa){var a=rl(t,e,n,r);if(a===null)ji(t,e,r,pa,n),dc(t,r);else if(_0(a,t,e,n,r))r.stopPropagation();else if(dc(t,r),e&4&&-1<N0.indexOf(t)){for(;a!==null;){var i=jr(a);if(i!==null&&fu(i),i=rl(t,e,n,r),i===null&&ji(t,e,r,pa,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else ji(t,e,r,null,n)}}var pa=null;function rl(t,e,n,r){if(pa=null,t=to(r),t=Ss(t),t!==null)if(e=Rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=iu(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pa=t,null}function vu(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(f0()){case so:return 1;case du:return 4;case ma:case x0:return 16;case uu:return 536870912;default:return 16}default:return 16}}var Zt=null,io=null,ea=null;function bu(){if(ea)return ea;var t,e=io,n=e.length,r,a="value"in Zt?Zt.value:Zt.textContent,i=a.length;for(t=0;t<n&&e[t]===a[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===a[i-r];r++);return ea=a.slice(t,1<r?1-r:void 0)}function ta(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $r(){return!0}function hc(){return!1}function Xe(t){function e(n,r,a,i,l){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$r:hc,this.isPropagationStopped=hc,this}return he(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$r)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$r)},persist:function(){},isPersistent:$r}),e}var wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lo=Xe(wn),br=he({},wn,{view:0,detail:0}),E0=Xe(br),hi,mi,An,Ua=he({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==An&&(An&&t.type==="mousemove"?(hi=t.screenX-An.screenX,mi=t.screenY-An.screenY):mi=hi=0,An=t),hi)},movementY:function(t){return"movementY"in t?t.movementY:mi}}),mc=Xe(Ua),P0=he({},Ua,{dataTransfer:0}),T0=Xe(P0),A0=he({},br,{relatedTarget:0}),fi=Xe(A0),D0=he({},wn,{animationName:0,elapsedTime:0,pseudoElement:0}),I0=Xe(D0),M0=he({},wn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),O0=Xe(M0),R0=he({},wn,{data:0}),fc=Xe(R0),$0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=U0[t])?!!e[t]:!1}function oo(){return F0}var z0=he({},br,{key:function(t){if(t.key){var e=$0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ta(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?L0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oo,charCode:function(t){return t.type==="keypress"?ta(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ta(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),q0=Xe(z0),B0=he({},Ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xc=Xe(B0),V0=he({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oo}),H0=Xe(V0),W0=he({},wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),K0=Xe(W0),G0=he({},Ua,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J0=Xe(G0),Y0=[9,13,27,32],co=$t&&"CompositionEvent"in window,Vn=null;$t&&"documentMode"in document&&(Vn=document.documentMode);var Q0=$t&&"TextEvent"in window&&!Vn,ju=$t&&(!co||Vn&&8<Vn&&11>=Vn),pc=" ",gc=!1;function wu(t,e){switch(t){case"keyup":return Y0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Js=!1;function Z0(t,e){switch(t){case"compositionend":return Nu(e);case"keypress":return e.which!==32?null:(gc=!0,pc);case"textInput":return t=e.data,t===pc&&gc?null:t;default:return null}}function X0(t,e){if(Js)return t==="compositionend"||!co&&wu(t,e)?(t=bu(),ea=io=Zt=null,Js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ju&&e.locale!=="ko"?null:e.data;default:return null}}var ef={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ef[t.type]:e==="textarea"}function _u(t,e,n,r){tu(r),e=ga(e,"onChange"),0<e.length&&(n=new lo("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Hn=null,ir=null;function tf(t){Ou(t,0)}function Fa(t){var e=Zs(t);if(Gd(e))return t}function sf(t,e){if(t==="change")return e}var Su=!1;if($t){var xi;if($t){var pi="oninput"in document;if(!pi){var vc=document.createElement("div");vc.setAttribute("oninput","return;"),pi=typeof vc.oninput=="function"}xi=pi}else xi=!1;Su=xi&&(!document.documentMode||9<document.documentMode)}function bc(){Hn&&(Hn.detachEvent("onpropertychange",ku),ir=Hn=null)}function ku(t){if(t.propertyName==="value"&&Fa(ir)){var e=[];_u(e,ir,t,to(t)),au(tf,e)}}function nf(t,e,n){t==="focusin"?(bc(),Hn=e,ir=n,Hn.attachEvent("onpropertychange",ku)):t==="focusout"&&bc()}function rf(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fa(ir)}function af(t,e){if(t==="click")return Fa(e)}function lf(t,e){if(t==="input"||t==="change")return Fa(e)}function of(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yt=typeof Object.is=="function"?Object.is:of;function lr(t,e){if(yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Fi.call(e,a)||!yt(t[a],e[a]))return!1}return!0}function jc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wc(t,e){var n=jc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jc(n)}}function Cu(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Cu(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Eu(){for(var t=window,e=da();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=da(t.document)}return e}function uo(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cf(t){var e=Eu(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Cu(n.ownerDocument.documentElement,n)){if(r!==null&&uo(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!t.extend&&i>r&&(a=r,r=i,i=a),a=wc(n,i);var l=wc(n,r);a&&l&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var df=$t&&"documentMode"in document&&11>=document.documentMode,Ys=null,al=null,Wn=null,il=!1;function Nc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;il||Ys==null||Ys!==da(r)||(r=Ys,"selectionStart"in r&&uo(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wn&&lr(Wn,r)||(Wn=r,r=ga(al,"onSelect"),0<r.length&&(e=new lo("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ys)))}function Lr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qs={animationend:Lr("Animation","AnimationEnd"),animationiteration:Lr("Animation","AnimationIteration"),animationstart:Lr("Animation","AnimationStart"),transitionend:Lr("Transition","TransitionEnd")},gi={},Pu={};$t&&(Pu=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function za(t){if(gi[t])return gi[t];if(!Qs[t])return t;var e=Qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Pu)return gi[t]=e[n];return t}var Tu=za("animationend"),Au=za("animationiteration"),Du=za("animationstart"),Iu=za("transitionend"),Mu=new Map,_c="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ms(t,e){Mu.set(t,e),Os(e,[t])}for(var yi=0;yi<_c.length;yi++){var vi=_c[yi],uf=vi.toLowerCase(),hf=vi[0].toUpperCase()+vi.slice(1);ms(uf,"on"+hf)}ms(Tu,"onAnimationEnd");ms(Au,"onAnimationIteration");ms(Du,"onAnimationStart");ms("dblclick","onDoubleClick");ms("focusin","onFocus");ms("focusout","onBlur");ms(Iu,"onTransitionEnd");hn("onMouseEnter",["mouseout","mouseover"]);hn("onMouseLeave",["mouseout","mouseover"]);hn("onPointerEnter",["pointerout","pointerover"]);hn("onPointerLeave",["pointerout","pointerover"]);Os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Os("onBeforeInput",["compositionend","keypress","textInput","paste"]);Os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fn));function Sc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,d0(r,e,void 0,t),t.currentTarget=null}function Ou(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;Sc(a,o,d),i=c}else for(l=0;l<r.length;l++){if(o=r[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;Sc(a,o,d),i=c}}}if(ha)throw t=tl,ha=!1,tl=null,t}function le(t,e){var n=e[ul];n===void 0&&(n=e[ul]=new Set);var r=t+"__bubble";n.has(r)||(Ru(e,t,2,!1),n.add(r))}function bi(t,e,n){var r=0;e&&(r|=4),Ru(n,t,r,e)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function or(t){if(!t[Ur]){t[Ur]=!0,Bd.forEach(function(n){n!=="selectionchange"&&(mf.has(n)||bi(n,!1,t),bi(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ur]||(e[Ur]=!0,bi("selectionchange",!1,e))}}function Ru(t,e,n,r){switch(vu(e)){case 1:var a=k0;break;case 4:a=C0;break;default:a=ao}n=a.bind(null,e,n,t),a=void 0,!el||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function ji(t,e,n,r,a){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Ss(o),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}o=o.parentNode}}r=r.return}au(function(){var d=i,u=to(n),h=[];e:{var m=Mu.get(t);if(m!==void 0){var y=lo,b=t;switch(t){case"keypress":if(ta(n)===0)break e;case"keydown":case"keyup":y=q0;break;case"focusin":b="focus",y=fi;break;case"focusout":b="blur",y=fi;break;case"beforeblur":case"afterblur":y=fi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=mc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=T0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=H0;break;case Tu:case Au:case Du:y=I0;break;case Iu:y=K0;break;case"scroll":y=E0;break;case"wheel":y=J0;break;case"copy":case"cut":case"paste":y=O0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=xc}var S=(e&4)!==0,j=!S&&t==="scroll",p=S?m!==null?m+"Capture":null:m;S=[];for(var x=d,f;x!==null;){f=x;var g=f.stateNode;if(f.tag===5&&g!==null&&(f=g,p!==null&&(g=sr(x,p),g!=null&&S.push(cr(x,g,f)))),j)break;x=x.return}0<S.length&&(m=new y(m,b,null,n,u),h.push({event:m,listeners:S}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Zi&&(b=n.relatedTarget||n.fromElement)&&(Ss(b)||b[Lt]))break e;if((y||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,y?(b=n.relatedTarget||n.toElement,y=d,b=b?Ss(b):null,b!==null&&(j=Rs(b),b!==j||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=d),y!==b)){if(S=mc,g="onMouseLeave",p="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(S=xc,g="onPointerLeave",p="onPointerEnter",x="pointer"),j=y==null?m:Zs(y),f=b==null?m:Zs(b),m=new S(g,x+"leave",y,n,u),m.target=j,m.relatedTarget=f,g=null,Ss(u)===d&&(S=new S(p,x+"enter",b,n,u),S.target=f,S.relatedTarget=j,g=S),j=g,y&&b)t:{for(S=y,p=b,x=0,f=S;f;f=Us(f))x++;for(f=0,g=p;g;g=Us(g))f++;for(;0<x-f;)S=Us(S),x--;for(;0<f-x;)p=Us(p),f--;for(;x--;){if(S===p||p!==null&&S===p.alternate)break t;S=Us(S),p=Us(p)}S=null}else S=null;y!==null&&kc(h,m,y,S,!1),b!==null&&j!==null&&kc(h,j,b,S,!0)}}e:{if(m=d?Zs(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var w=sf;else if(yc(m))if(Su)w=lf;else{w=rf;var v=nf}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(w=af);if(w&&(w=w(t,d))){_u(h,w,n,u);break e}v&&v(t,m,d),t==="focusout"&&(v=m._wrapperState)&&v.controlled&&m.type==="number"&&Ki(m,"number",m.value)}switch(v=d?Zs(d):window,t){case"focusin":(yc(v)||v.contentEditable==="true")&&(Ys=v,al=d,Wn=null);break;case"focusout":Wn=al=Ys=null;break;case"mousedown":il=!0;break;case"contextmenu":case"mouseup":case"dragend":il=!1,Nc(h,n,u);break;case"selectionchange":if(df)break;case"keydown":case"keyup":Nc(h,n,u)}var _;if(co)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Js?wu(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(ju&&n.locale!=="ko"&&(Js||M!=="onCompositionStart"?M==="onCompositionEnd"&&Js&&(_=bu()):(Zt=u,io="value"in Zt?Zt.value:Zt.textContent,Js=!0)),v=ga(d,M),0<v.length&&(M=new fc(M,t,null,n,u),h.push({event:M,listeners:v}),_?M.data=_:(_=Nu(n),_!==null&&(M.data=_)))),(_=Q0?Z0(t,n):X0(t,n))&&(d=ga(d,"onBeforeInput"),0<d.length&&(u=new fc("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:d}),u.data=_))}Ou(h,e)})}function cr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ga(t,e){for(var n=e+"Capture",r=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=sr(t,n),i!=null&&r.unshift(cr(t,i,a)),i=sr(t,e),i!=null&&r.push(cr(t,i,a))),t=t.return}return r}function Us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kc(t,e,n,r,a){for(var i=e._reactName,l=[];n!==null&&n!==r;){var o=n,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,a?(c=sr(n,i),c!=null&&l.unshift(cr(n,c,o))):a||(c=sr(n,i),c!=null&&l.push(cr(n,c,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var ff=/\r\n?/g,xf=/\u0000|\uFFFD/g;function Cc(t){return(typeof t=="string"?t:""+t).replace(ff,`
`).replace(xf,"")}function Fr(t,e,n){if(e=Cc(e),Cc(t)!==e&&n)throw Error(F(425))}function ya(){}var ll=null,ol=null;function cl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dl=typeof setTimeout=="function"?setTimeout:void 0,pf=typeof clearTimeout=="function"?clearTimeout:void 0,Ec=typeof Promise=="function"?Promise:void 0,gf=typeof queueMicrotask=="function"?queueMicrotask:typeof Ec<"u"?function(t){return Ec.resolve(null).then(t).catch(yf)}:dl;function yf(t){setTimeout(function(){throw t})}function wi(t,e){var n=e,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),ar(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);ar(e)}function ns(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Pc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Nn=Math.random().toString(36).slice(2),wt="__reactFiber$"+Nn,dr="__reactProps$"+Nn,Lt="__reactContainer$"+Nn,ul="__reactEvents$"+Nn,vf="__reactListeners$"+Nn,bf="__reactHandles$"+Nn;function Ss(t){var e=t[wt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lt]||n[wt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Pc(t);t!==null;){if(n=t[wt])return n;t=Pc(t)}return e}t=n,n=t.parentNode}return null}function jr(t){return t=t[wt]||t[Lt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function qa(t){return t[dr]||null}var hl=[],Xs=-1;function fs(t){return{current:t}}function oe(t){0>Xs||(t.current=hl[Xs],hl[Xs]=null,Xs--)}function ae(t,e){Xs++,hl[Xs]=t.current,t.current=e}var ds={},Ie=fs(ds),Ve=fs(!1),Ts=ds;function mn(t,e){var n=t.type.contextTypes;if(!n)return ds;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function He(t){return t=t.childContextTypes,t!=null}function va(){oe(Ve),oe(Ie)}function Tc(t,e,n){if(Ie.current!==ds)throw Error(F(168));ae(Ie,e),ae(Ve,n)}function $u(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in e))throw Error(F(108,n0(t)||"Unknown",a));return he({},n,r)}function ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ds,Ts=Ie.current,ae(Ie,t),ae(Ve,Ve.current),!0}function Ac(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=$u(t,e,Ts),r.__reactInternalMemoizedMergedChildContext=t,oe(Ve),oe(Ie),ae(Ie,t)):oe(Ve),ae(Ve,n)}var It=null,Ba=!1,Ni=!1;function Lu(t){It===null?It=[t]:It.push(t)}function jf(t){Ba=!0,Lu(t)}function xs(){if(!Ni&&It!==null){Ni=!0;var t=0,e=te;try{var n=It;for(te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}It=null,Ba=!1}catch(a){throw It!==null&&(It=It.slice(t+1)),cu(so,xs),a}finally{te=e,Ni=!1}}return null}var en=[],tn=0,ja=null,wa=0,tt=[],st=0,As=null,Mt=1,Ot="";function js(t,e){en[tn++]=wa,en[tn++]=ja,ja=t,wa=e}function Uu(t,e,n){tt[st++]=Mt,tt[st++]=Ot,tt[st++]=As,As=t;var r=Mt;t=Ot;var a=32-pt(r)-1;r&=~(1<<a),n+=1;var i=32-pt(e)+a;if(30<i){var l=a-a%5;i=(r&(1<<l)-1).toString(32),r>>=l,a-=l,Mt=1<<32-pt(e)+a|n<<a|r,Ot=i+t}else Mt=1<<i|n<<a|r,Ot=t}function ho(t){t.return!==null&&(js(t,1),Uu(t,1,0))}function mo(t){for(;t===ja;)ja=en[--tn],en[tn]=null,wa=en[--tn],en[tn]=null;for(;t===As;)As=tt[--st],tt[st]=null,Ot=tt[--st],tt[st]=null,Mt=tt[--st],tt[st]=null}var Je=null,Ge=null,ce=!1,xt=null;function Fu(t,e){var n=nt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Dc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Je=t,Ge=ns(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Je=t,Ge=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=As!==null?{id:Mt,overflow:Ot}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Je=t,Ge=null,!0):!1;default:return!1}}function ml(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fl(t){if(ce){var e=Ge;if(e){var n=e;if(!Dc(t,e)){if(ml(t))throw Error(F(418));e=ns(n.nextSibling);var r=Je;e&&Dc(t,e)?Fu(r,n):(t.flags=t.flags&-4097|2,ce=!1,Je=t)}}else{if(ml(t))throw Error(F(418));t.flags=t.flags&-4097|2,ce=!1,Je=t}}}function Ic(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Je=t}function zr(t){if(t!==Je)return!1;if(!ce)return Ic(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cl(t.type,t.memoizedProps)),e&&(e=Ge)){if(ml(t))throw zu(),Error(F(418));for(;e;)Fu(t,e),e=ns(e.nextSibling)}if(Ic(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ge=ns(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ge=null}}else Ge=Je?ns(t.stateNode.nextSibling):null;return!0}function zu(){for(var t=Ge;t;)t=ns(t.nextSibling)}function fn(){Ge=Je=null,ce=!1}function fo(t){xt===null?xt=[t]:xt.push(t)}var wf=qt.ReactCurrentBatchConfig;function Dn(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var a=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function qr(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mc(t){var e=t._init;return e(t._payload)}function qu(t){function e(p,x){if(t){var f=p.deletions;f===null?(p.deletions=[x],p.flags|=16):f.push(x)}}function n(p,x){if(!t)return null;for(;x!==null;)e(p,x),x=x.sibling;return null}function r(p,x){for(p=new Map;x!==null;)x.key!==null?p.set(x.key,x):p.set(x.index,x),x=x.sibling;return p}function a(p,x){return p=ls(p,x),p.index=0,p.sibling=null,p}function i(p,x,f){return p.index=f,t?(f=p.alternate,f!==null?(f=f.index,f<x?(p.flags|=2,x):f):(p.flags|=2,x)):(p.flags|=1048576,x)}function l(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,x,f,g){return x===null||x.tag!==6?(x=Ti(f,p.mode,g),x.return=p,x):(x=a(x,f),x.return=p,x)}function c(p,x,f,g){var w=f.type;return w===Gs?u(p,x,f.props.children,g,f.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Kt&&Mc(w)===x.type)?(g=a(x,f.props),g.ref=Dn(p,x,f),g.return=p,g):(g=oa(f.type,f.key,f.props,null,p.mode,g),g.ref=Dn(p,x,f),g.return=p,g)}function d(p,x,f,g){return x===null||x.tag!==4||x.stateNode.containerInfo!==f.containerInfo||x.stateNode.implementation!==f.implementation?(x=Ai(f,p.mode,g),x.return=p,x):(x=a(x,f.children||[]),x.return=p,x)}function u(p,x,f,g,w){return x===null||x.tag!==7?(x=Ps(f,p.mode,g,w),x.return=p,x):(x=a(x,f),x.return=p,x)}function h(p,x,f){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ti(""+x,p.mode,f),x.return=p,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ar:return f=oa(x.type,x.key,x.props,null,p.mode,f),f.ref=Dn(p,null,x),f.return=p,f;case Ks:return x=Ai(x,p.mode,f),x.return=p,x;case Kt:var g=x._init;return h(p,g(x._payload),f)}if(Ln(x)||Cn(x))return x=Ps(x,p.mode,f,null),x.return=p,x;qr(p,x)}return null}function m(p,x,f,g){var w=x!==null?x.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return w!==null?null:o(p,x,""+f,g);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ar:return f.key===w?c(p,x,f,g):null;case Ks:return f.key===w?d(p,x,f,g):null;case Kt:return w=f._init,m(p,x,w(f._payload),g)}if(Ln(f)||Cn(f))return w!==null?null:u(p,x,f,g,null);qr(p,f)}return null}function y(p,x,f,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return p=p.get(f)||null,o(x,p,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ar:return p=p.get(g.key===null?f:g.key)||null,c(x,p,g,w);case Ks:return p=p.get(g.key===null?f:g.key)||null,d(x,p,g,w);case Kt:var v=g._init;return y(p,x,f,v(g._payload),w)}if(Ln(g)||Cn(g))return p=p.get(f)||null,u(x,p,g,w,null);qr(x,g)}return null}function b(p,x,f,g){for(var w=null,v=null,_=x,M=x=0,O=null;_!==null&&M<f.length;M++){_.index>M?(O=_,_=null):O=_.sibling;var U=m(p,_,f[M],g);if(U===null){_===null&&(_=O);break}t&&_&&U.alternate===null&&e(p,_),x=i(U,x,M),v===null?w=U:v.sibling=U,v=U,_=O}if(M===f.length)return n(p,_),ce&&js(p,M),w;if(_===null){for(;M<f.length;M++)_=h(p,f[M],g),_!==null&&(x=i(_,x,M),v===null?w=_:v.sibling=_,v=_);return ce&&js(p,M),w}for(_=r(p,_);M<f.length;M++)O=y(_,p,M,f[M],g),O!==null&&(t&&O.alternate!==null&&_.delete(O.key===null?M:O.key),x=i(O,x,M),v===null?w=O:v.sibling=O,v=O);return t&&_.forEach(function(E){return e(p,E)}),ce&&js(p,M),w}function S(p,x,f,g){var w=Cn(f);if(typeof w!="function")throw Error(F(150));if(f=w.call(f),f==null)throw Error(F(151));for(var v=w=null,_=x,M=x=0,O=null,U=f.next();_!==null&&!U.done;M++,U=f.next()){_.index>M?(O=_,_=null):O=_.sibling;var E=m(p,_,U.value,g);if(E===null){_===null&&(_=O);break}t&&_&&E.alternate===null&&e(p,_),x=i(E,x,M),v===null?w=E:v.sibling=E,v=E,_=O}if(U.done)return n(p,_),ce&&js(p,M),w;if(_===null){for(;!U.done;M++,U=f.next())U=h(p,U.value,g),U!==null&&(x=i(U,x,M),v===null?w=U:v.sibling=U,v=U);return ce&&js(p,M),w}for(_=r(p,_);!U.done;M++,U=f.next())U=y(_,p,M,U.value,g),U!==null&&(t&&U.alternate!==null&&_.delete(U.key===null?M:U.key),x=i(U,x,M),v===null?w=U:v.sibling=U,v=U);return t&&_.forEach(function(D){return e(p,D)}),ce&&js(p,M),w}function j(p,x,f,g){if(typeof f=="object"&&f!==null&&f.type===Gs&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Ar:e:{for(var w=f.key,v=x;v!==null;){if(v.key===w){if(w=f.type,w===Gs){if(v.tag===7){n(p,v.sibling),x=a(v,f.props.children),x.return=p,p=x;break e}}else if(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Kt&&Mc(w)===v.type){n(p,v.sibling),x=a(v,f.props),x.ref=Dn(p,v,f),x.return=p,p=x;break e}n(p,v);break}else e(p,v);v=v.sibling}f.type===Gs?(x=Ps(f.props.children,p.mode,g,f.key),x.return=p,p=x):(g=oa(f.type,f.key,f.props,null,p.mode,g),g.ref=Dn(p,x,f),g.return=p,p=g)}return l(p);case Ks:e:{for(v=f.key;x!==null;){if(x.key===v)if(x.tag===4&&x.stateNode.containerInfo===f.containerInfo&&x.stateNode.implementation===f.implementation){n(p,x.sibling),x=a(x,f.children||[]),x.return=p,p=x;break e}else{n(p,x);break}else e(p,x);x=x.sibling}x=Ai(f,p.mode,g),x.return=p,p=x}return l(p);case Kt:return v=f._init,j(p,x,v(f._payload),g)}if(Ln(f))return b(p,x,f,g);if(Cn(f))return S(p,x,f,g);qr(p,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,x!==null&&x.tag===6?(n(p,x.sibling),x=a(x,f),x.return=p,p=x):(n(p,x),x=Ti(f,p.mode,g),x.return=p,p=x),l(p)):n(p,x)}return j}var xn=qu(!0),Bu=qu(!1),Na=fs(null),_a=null,sn=null,xo=null;function po(){xo=sn=_a=null}function go(t){var e=Na.current;oe(Na),t._currentValue=e}function xl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function dn(t,e){_a=t,xo=sn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Be=!0),t.firstContext=null)}function it(t){var e=t._currentValue;if(xo!==t)if(t={context:t,memoizedValue:e,next:null},sn===null){if(_a===null)throw Error(F(308));sn=t,_a.dependencies={lanes:0,firstContext:t}}else sn=sn.next=t;return e}var ks=null;function yo(t){ks===null?ks=[t]:ks.push(t)}function Vu(t,e,n,r){var a=e.interleaved;return a===null?(n.next=n,yo(e)):(n.next=a.next,a.next=n),e.interleaved=n,Ut(t,r)}function Ut(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gt=!1;function vo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hu(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function rs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,X&2){var a=r.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),r.pending=e,Ut(t,n)}return a=r.interleaved,a===null?(e.next=e,yo(r)):(e.next=a.next,a.next=e),r.interleaved=e,Ut(t,n)}function sa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,no(t,n)}}function Oc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?a=i=e:i=i.next=e}else a=i=e;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sa(t,e,n,r){var a=t.updateQueue;Gt=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;l=0,u=d=c=null,o=i;do{var m=o.lane,y=o.eventTime;if((r&m)===m){u!==null&&(u=u.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=t,S=o;switch(m=e,y=n,S.tag){case 1:if(b=S.payload,typeof b=="function"){h=b.call(y,h,m);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=S.payload,m=typeof b=="function"?b.call(y,h,m):b,m==null)break e;h=he({},h,m);break e;case 2:Gt=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=a.effects,m===null?a.effects=[o]:m.push(o))}else y={eventTime:y,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=y,c=h):u=u.next=y,l|=m;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;m=o,o=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,e=a.shared.interleaved,e!==null){a=e;do l|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);Is|=l,t.lanes=l,t.memoizedState=h}}function Rc(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(F(191,a));a.call(r)}}}var wr={},St=fs(wr),ur=fs(wr),hr=fs(wr);function Cs(t){if(t===wr)throw Error(F(174));return t}function bo(t,e){switch(ae(hr,e),ae(ur,t),ae(St,wr),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ji(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ji(e,t)}oe(St),ae(St,e)}function pn(){oe(St),oe(ur),oe(hr)}function Wu(t){Cs(hr.current);var e=Cs(St.current),n=Ji(e,t.type);e!==n&&(ae(ur,t),ae(St,n))}function jo(t){ur.current===t&&(oe(St),oe(ur))}var de=fs(0);function ka(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _i=[];function wo(){for(var t=0;t<_i.length;t++)_i[t]._workInProgressVersionPrimary=null;_i.length=0}var na=qt.ReactCurrentDispatcher,Si=qt.ReactCurrentBatchConfig,Ds=0,ue=null,je=null,Ne=null,Ca=!1,Kn=!1,mr=0,Nf=0;function Te(){throw Error(F(321))}function No(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yt(t[n],e[n]))return!1;return!0}function _o(t,e,n,r,a,i){if(Ds=i,ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,na.current=t===null||t.memoizedState===null?Cf:Ef,t=n(r,a),Kn){i=0;do{if(Kn=!1,mr=0,25<=i)throw Error(F(301));i+=1,Ne=je=null,e.updateQueue=null,na.current=Pf,t=n(r,a)}while(Kn)}if(na.current=Ea,e=je!==null&&je.next!==null,Ds=0,Ne=je=ue=null,Ca=!1,e)throw Error(F(300));return t}function So(){var t=mr!==0;return mr=0,t}function bt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?ue.memoizedState=Ne=t:Ne=Ne.next=t,Ne}function lt(){if(je===null){var t=ue.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var e=Ne===null?ue.memoizedState:Ne.next;if(e!==null)Ne=e,je=t;else{if(t===null)throw Error(F(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Ne===null?ue.memoizedState=Ne=t:Ne=Ne.next=t}return Ne}function fr(t,e){return typeof e=="function"?e(t):e}function ki(t){var e=lt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=je,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((Ds&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=h,l=r):c=c.next=h,ue.lanes|=u,Is|=u}d=d.next}while(d!==null&&d!==i);c===null?l=r:c.next=o,yt(r,e.memoizedState)||(Be=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do i=a.lane,ue.lanes|=i,Is|=i,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ci(t){var e=lt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,i=e.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do i=t(i,l.action),l=l.next;while(l!==a);yt(i,e.memoizedState)||(Be=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ku(){}function Gu(t,e){var n=ue,r=lt(),a=e(),i=!yt(r.memoizedState,a);if(i&&(r.memoizedState=a,Be=!0),r=r.queue,ko(Qu.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ne!==null&&Ne.memoizedState.tag&1){if(n.flags|=2048,xr(9,Yu.bind(null,n,r,a,e),void 0,null),Se===null)throw Error(F(349));Ds&30||Ju(n,e,a)}return a}function Ju(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Yu(t,e,n,r){e.value=n,e.getSnapshot=r,Zu(e)&&Xu(t)}function Qu(t,e,n){return n(function(){Zu(e)&&Xu(t)})}function Zu(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yt(t,n)}catch{return!0}}function Xu(t){var e=Ut(t,1);e!==null&&gt(e,t,1,-1)}function $c(t){var e=bt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:t},e.queue=t,t=t.dispatch=kf.bind(null,ue,t),[e.memoizedState,t]}function xr(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function eh(){return lt().memoizedState}function ra(t,e,n,r){var a=bt();ue.flags|=t,a.memoizedState=xr(1|e,n,void 0,r===void 0?null:r)}function Va(t,e,n,r){var a=lt();r=r===void 0?null:r;var i=void 0;if(je!==null){var l=je.memoizedState;if(i=l.destroy,r!==null&&No(r,l.deps)){a.memoizedState=xr(e,n,i,r);return}}ue.flags|=t,a.memoizedState=xr(1|e,n,i,r)}function Lc(t,e){return ra(8390656,8,t,e)}function ko(t,e){return Va(2048,8,t,e)}function th(t,e){return Va(4,2,t,e)}function sh(t,e){return Va(4,4,t,e)}function nh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rh(t,e,n){return n=n!=null?n.concat([t]):null,Va(4,4,nh.bind(null,e,t),n)}function Co(){}function ah(t,e){var n=lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&No(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ih(t,e){var n=lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&No(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function lh(t,e,n){return Ds&21?(yt(n,e)||(n=hu(),ue.lanes|=n,Is|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Be=!0),t.memoizedState=n)}function _f(t,e){var n=te;te=n!==0&&4>n?n:4,t(!0);var r=Si.transition;Si.transition={};try{t(!1),e()}finally{te=n,Si.transition=r}}function oh(){return lt().memoizedState}function Sf(t,e,n){var r=is(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ch(t))dh(e,n);else if(n=Vu(t,e,n,r),n!==null){var a=Re();gt(n,t,r,a),uh(n,e,r)}}function kf(t,e,n){var r=is(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ch(t))dh(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,o=i(l,n);if(a.hasEagerState=!0,a.eagerState=o,yt(o,l)){var c=e.interleaved;c===null?(a.next=a,yo(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}n=Vu(t,e,a,r),n!==null&&(a=Re(),gt(n,t,r,a),uh(n,e,r))}}function ch(t){var e=t.alternate;return t===ue||e!==null&&e===ue}function dh(t,e){Kn=Ca=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uh(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,no(t,n)}}var Ea={readContext:it,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},Cf={readContext:it,useCallback:function(t,e){return bt().memoizedState=[t,e===void 0?null:e],t},useContext:it,useEffect:Lc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ra(4194308,4,nh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ra(4194308,4,t,e)},useInsertionEffect:function(t,e){return ra(4,2,t,e)},useMemo:function(t,e){var n=bt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Sf.bind(null,ue,t),[r.memoizedState,t]},useRef:function(t){var e=bt();return t={current:t},e.memoizedState=t},useState:$c,useDebugValue:Co,useDeferredValue:function(t){return bt().memoizedState=t},useTransition:function(){var t=$c(!1),e=t[0];return t=_f.bind(null,t[1]),bt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ue,a=bt();if(ce){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Se===null)throw Error(F(349));Ds&30||Ju(r,e,n)}a.memoizedState=n;var i={value:n,getSnapshot:e};return a.queue=i,Lc(Qu.bind(null,r,i,t),[t]),r.flags|=2048,xr(9,Yu.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=bt(),e=Se.identifierPrefix;if(ce){var n=Ot,r=Mt;n=(r&~(1<<32-pt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=mr++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Nf++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ef={readContext:it,useCallback:ah,useContext:it,useEffect:ko,useImperativeHandle:rh,useInsertionEffect:th,useLayoutEffect:sh,useMemo:ih,useReducer:ki,useRef:eh,useState:function(){return ki(fr)},useDebugValue:Co,useDeferredValue:function(t){var e=lt();return lh(e,je.memoizedState,t)},useTransition:function(){var t=ki(fr)[0],e=lt().memoizedState;return[t,e]},useMutableSource:Ku,useSyncExternalStore:Gu,useId:oh,unstable_isNewReconciler:!1},Pf={readContext:it,useCallback:ah,useContext:it,useEffect:ko,useImperativeHandle:rh,useInsertionEffect:th,useLayoutEffect:sh,useMemo:ih,useReducer:Ci,useRef:eh,useState:function(){return Ci(fr)},useDebugValue:Co,useDeferredValue:function(t){var e=lt();return je===null?e.memoizedState=t:lh(e,je.memoizedState,t)},useTransition:function(){var t=Ci(fr)[0],e=lt().memoizedState;return[t,e]},useMutableSource:Ku,useSyncExternalStore:Gu,useId:oh,unstable_isNewReconciler:!1};function ht(t,e){if(t&&t.defaultProps){e=he({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:he({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ha={isMounted:function(t){return(t=t._reactInternals)?Rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Re(),a=is(t),i=Rt(r,a);i.payload=e,n!=null&&(i.callback=n),e=rs(t,i,a),e!==null&&(gt(e,t,a,r),sa(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Re(),a=is(t),i=Rt(r,a);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=rs(t,i,a),e!==null&&(gt(e,t,a,r),sa(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Re(),r=is(t),a=Rt(n,r);a.tag=2,e!=null&&(a.callback=e),e=rs(t,a,r),e!==null&&(gt(e,t,r,n),sa(e,t,r))}};function Uc(t,e,n,r,a,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,l):e.prototype&&e.prototype.isPureReactComponent?!lr(n,r)||!lr(a,i):!0}function hh(t,e,n){var r=!1,a=ds,i=e.contextType;return typeof i=="object"&&i!==null?i=it(i):(a=He(e)?Ts:Ie.current,r=e.contextTypes,i=(r=r!=null)?mn(t,a):ds),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ha,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function Fc(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ha.enqueueReplaceState(e,e.state,null)}function gl(t,e,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},vo(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=it(i):(i=He(e)?Ts:Ie.current,a.context=mn(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(pl(t,e,i,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Ha.enqueueReplaceState(a,a.state,null),Sa(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function gn(t,e){try{var n="",r=e;do n+=s0(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function Ei(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Tf=typeof WeakMap=="function"?WeakMap:Map;function mh(t,e,n){n=Rt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ta||(Ta=!0,El=r),yl(t,e)},n}function fh(t,e,n){n=Rt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=e.value;n.payload=function(){return r(a)},n.callback=function(){yl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){yl(t,e),typeof r!="function"&&(as===null?as=new Set([this]):as.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function zc(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Tf;var a=new Set;r.set(e,a)}else a=r.get(e),a===void 0&&(a=new Set,r.set(e,a));a.has(n)||(a.add(n),t=Vf.bind(null,t,e,n),e.then(t,t))}function qc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Bc(t,e,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rt(-1,1),e.tag=2,rs(n,e,1))),n.lanes|=1),t)}var Af=qt.ReactCurrentOwner,Be=!1;function Oe(t,e,n,r){e.child=t===null?Bu(e,null,n,r):xn(e,t.child,n,r)}function Vc(t,e,n,r,a){n=n.render;var i=e.ref;return dn(e,a),r=_o(t,e,n,r,i,a),n=So(),t!==null&&!Be?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Ft(t,e,a)):(ce&&n&&ho(e),e.flags|=1,Oe(t,e,r,a),e.child)}function Hc(t,e,n,r,a){if(t===null){var i=n.type;return typeof i=="function"&&!Oo(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,xh(t,e,i,r,a)):(t=oa(n.type,null,r,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:lr,n(l,r)&&t.ref===e.ref)return Ft(t,e,a)}return e.flags|=1,t=ls(i,r),t.ref=e.ref,t.return=e,e.child=t}function xh(t,e,n,r,a){if(t!==null){var i=t.memoizedProps;if(lr(i,r)&&t.ref===e.ref)if(Be=!1,e.pendingProps=r=i,(t.lanes&a)!==0)t.flags&131072&&(Be=!0);else return e.lanes=t.lanes,Ft(t,e,a)}return vl(t,e,n,r,a)}function ph(t,e,n){var r=e.pendingProps,a=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(rn,Ke),Ke|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ae(rn,Ke),Ke|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ae(rn,Ke),Ke|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ae(rn,Ke),Ke|=r;return Oe(t,e,a,n),e.child}function gh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vl(t,e,n,r,a){var i=He(n)?Ts:Ie.current;return i=mn(e,i),dn(e,a),n=_o(t,e,n,r,i,a),r=So(),t!==null&&!Be?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Ft(t,e,a)):(ce&&r&&ho(e),e.flags|=1,Oe(t,e,n,a),e.child)}function Wc(t,e,n,r,a){if(He(n)){var i=!0;ba(e)}else i=!1;if(dn(e,a),e.stateNode===null)aa(t,e),hh(e,n,r),gl(e,n,r,a),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var c=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=it(d):(d=He(n)?Ts:Ie.current,d=mn(e,d));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||c!==d)&&Fc(e,l,r,d),Gt=!1;var m=e.memoizedState;l.state=m,Sa(e,r,l,a),c=e.memoizedState,o!==r||m!==c||Ve.current||Gt?(typeof u=="function"&&(pl(e,n,u,r),c=e.memoizedState),(o=Gt||Uc(e,n,o,r,m,c,d))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),l.props=r,l.state=c,l.context=d,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,Hu(t,e),o=e.memoizedProps,d=e.type===e.elementType?o:ht(e.type,o),l.props=d,h=e.pendingProps,m=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=it(c):(c=He(n)?Ts:Ie.current,c=mn(e,c));var y=n.getDerivedStateFromProps;(u=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||m!==c)&&Fc(e,l,r,c),Gt=!1,m=e.memoizedState,l.state=m,Sa(e,r,l,a);var b=e.memoizedState;o!==h||m!==b||Ve.current||Gt?(typeof y=="function"&&(pl(e,n,y,r),b=e.memoizedState),(d=Gt||Uc(e,n,d,r,m,b,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,b,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,b,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),l.props=r,l.state=b,l.context=c,r=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return bl(t,e,n,r,i,a)}function bl(t,e,n,r,a,i){gh(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return a&&Ac(e,n,!1),Ft(t,e,i);r=e.stateNode,Af.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=xn(e,t.child,null,i),e.child=xn(e,null,o,i)):Oe(t,e,o,i),e.memoizedState=r.state,a&&Ac(e,n,!0),e.child}function yh(t){var e=t.stateNode;e.pendingContext?Tc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Tc(t,e.context,!1),bo(t,e.containerInfo)}function Kc(t,e,n,r,a){return fn(),fo(a),e.flags|=256,Oe(t,e,n,r),e.child}var jl={dehydrated:null,treeContext:null,retryLane:0};function wl(t){return{baseLanes:t,cachePool:null,transitions:null}}function vh(t,e,n){var r=e.pendingProps,a=de.current,i=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),ae(de,a&1),t===null)return fl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,i?(r=e.mode,i=e.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Ga(l,r,0,null),t=Ps(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=wl(n),e.memoizedState=jl,t):Eo(e,l));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return Df(t,e,l,r,o,a,n);if(i){i=r.fallback,l=e.mode,a=t.child,o=a.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&e.child!==a?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ls(a,c),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=ls(o,i):(i=Ps(i,l,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,l=t.child.memoizedState,l=l===null?wl(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~n,e.memoizedState=jl,r}return i=t.child,t=i.sibling,r=ls(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Eo(t,e){return e=Ga({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Br(t,e,n,r){return r!==null&&fo(r),xn(e,t.child,null,n),t=Eo(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Df(t,e,n,r,a,i,l){if(n)return e.flags&256?(e.flags&=-257,r=Ei(Error(F(422))),Br(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,a=e.mode,r=Ga({mode:"visible",children:r.children},a,0,null),i=Ps(i,a,l,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&xn(e,t.child,null,l),e.child.memoizedState=wl(l),e.memoizedState=jl,i);if(!(e.mode&1))return Br(t,e,l,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(F(419)),r=Ei(i,r,void 0),Br(t,e,l,r)}if(o=(l&t.childLanes)!==0,Be||o){if(r=Se,r!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ut(t,a),gt(r,t,a,-1))}return Mo(),r=Ei(Error(F(421))),Br(t,e,l,r)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Hf.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,Ge=ns(a.nextSibling),Je=e,ce=!0,xt=null,t!==null&&(tt[st++]=Mt,tt[st++]=Ot,tt[st++]=As,Mt=t.id,Ot=t.overflow,As=e),e=Eo(e,r.children),e.flags|=4096,e)}function Gc(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xl(t.return,e,n)}function Pi(t,e,n,r,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function bh(t,e,n){var r=e.pendingProps,a=r.revealOrder,i=r.tail;if(Oe(t,e,r.children,n),r=de.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gc(t,n,e);else if(t.tag===19)Gc(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ae(de,r),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&ka(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),Pi(e,!1,a,n,i);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&ka(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}Pi(e,!0,n,null,i);break;case"together":Pi(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function aa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ft(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Is|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=ls(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ls(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function If(t,e,n){switch(e.tag){case 3:yh(e),fn();break;case 5:Wu(e);break;case 1:He(e.type)&&ba(e);break;case 4:bo(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,a=e.memoizedProps.value;ae(Na,r._currentValue),r._currentValue=a;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ae(de,de.current&1),e.flags|=128,null):n&e.child.childLanes?vh(t,e,n):(ae(de,de.current&1),t=Ft(t,e,n),t!==null?t.sibling:null);ae(de,de.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return bh(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ae(de,de.current),r)break;return null;case 22:case 23:return e.lanes=0,ph(t,e,n)}return Ft(t,e,n)}var jh,Nl,wh,Nh;jh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nl=function(){};wh=function(t,e,n,r){var a=t.memoizedProps;if(a!==r){t=e.stateNode,Cs(St.current);var i=null;switch(n){case"input":a=Hi(t,a),r=Hi(t,r),i=[];break;case"select":a=he({},a,{value:void 0}),r=he({},r,{value:void 0}),i=[];break;case"textarea":a=Gi(t,a),r=Gi(t,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ya)}Yi(n,r);var l;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(er.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(o=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(er.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&le("scroll",t),i||o===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Nh=function(t,e,n,r){n!==r&&(e.flags|=4)};function In(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ae(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Mf(t,e,n){var r=e.pendingProps;switch(mo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ae(e),null;case 1:return He(e.type)&&va(),Ae(e),null;case 3:return r=e.stateNode,pn(),oe(Ve),oe(Ie),wo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zr(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xt!==null&&(Al(xt),xt=null))),Nl(t,e),Ae(e),null;case 5:jo(e);var a=Cs(hr.current);if(n=e.type,t!==null&&e.stateNode!=null)wh(t,e,n,r,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return Ae(e),null}if(t=Cs(St.current),zr(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[wt]=e,r[dr]=i,t=(e.mode&1)!==0,n){case"dialog":le("cancel",r),le("close",r);break;case"iframe":case"object":case"embed":le("load",r);break;case"video":case"audio":for(a=0;a<Fn.length;a++)le(Fn[a],r);break;case"source":le("error",r);break;case"img":case"image":case"link":le("error",r),le("load",r);break;case"details":le("toggle",r);break;case"input":nc(r,i),le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},le("invalid",r);break;case"textarea":ac(r,i),le("invalid",r)}Yi(n,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Fr(r.textContent,o,t),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Fr(r.textContent,o,t),a=["children",""+o]):er.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&le("scroll",r)}switch(n){case"input":Dr(r),rc(r,i,!0);break;case"textarea":Dr(r),ic(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ya)}r=a,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Qd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[wt]=e,t[dr]=r,jh(t,e,!1,!1),e.stateNode=t;e:{switch(l=Qi(n,r),n){case"dialog":le("cancel",t),le("close",t),a=r;break;case"iframe":case"object":case"embed":le("load",t),a=r;break;case"video":case"audio":for(a=0;a<Fn.length;a++)le(Fn[a],t);a=r;break;case"source":le("error",t),a=r;break;case"img":case"image":case"link":le("error",t),le("load",t),a=r;break;case"details":le("toggle",t),a=r;break;case"input":nc(t,r),a=Hi(t,r),le("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=he({},r,{value:void 0}),le("invalid",t);break;case"textarea":ac(t,r),a=Gi(t,r),le("invalid",t);break;default:a=r}Yi(n,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?eu(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Zd(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&tr(t,c):typeof c=="number"&&tr(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(er.hasOwnProperty(i)?c!=null&&i==="onScroll"&&le("scroll",t):c!=null&&Ql(t,i,c,l))}switch(n){case"input":Dr(t),rc(t,r,!1);break;case"textarea":Dr(t),ic(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?an(t,!!r.multiple,i,!1):r.defaultValue!=null&&an(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=ya)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ae(e),null;case 6:if(t&&e.stateNode!=null)Nh(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Cs(hr.current),Cs(St.current),zr(e)){if(r=e.stateNode,n=e.memoizedProps,r[wt]=e,(i=r.nodeValue!==n)&&(t=Je,t!==null))switch(t.tag){case 3:Fr(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fr(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wt]=e,e.stateNode=r}return Ae(e),null;case 13:if(oe(de),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&Ge!==null&&e.mode&1&&!(e.flags&128))zu(),fn(),e.flags|=98560,i=!1;else if(i=zr(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[wt]=e}else fn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ae(e),i=!1}else xt!==null&&(Al(xt),xt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||de.current&1?we===0&&(we=3):Mo())),e.updateQueue!==null&&(e.flags|=4),Ae(e),null);case 4:return pn(),Nl(t,e),t===null&&or(e.stateNode.containerInfo),Ae(e),null;case 10:return go(e.type._context),Ae(e),null;case 17:return He(e.type)&&va(),Ae(e),null;case 19:if(oe(de),i=e.memoizedState,i===null)return Ae(e),null;if(r=(e.flags&128)!==0,l=i.rendering,l===null)if(r)In(i,!1);else{if(we!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=ka(t),l!==null){for(e.flags|=128,In(i,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ae(de,de.current&1|2),e.child}t=t.sibling}i.tail!==null&&xe()>yn&&(e.flags|=128,r=!0,In(i,!1),e.lanes=4194304)}else{if(!r)if(t=ka(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),In(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!ce)return Ae(e),null}else 2*xe()-i.renderingStartTime>yn&&n!==1073741824&&(e.flags|=128,r=!0,In(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(n=i.last,n!==null?n.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=xe(),e.sibling=null,n=de.current,ae(de,r?n&1|2:n&1),e):(Ae(e),null);case 22:case 23:return Io(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ke&1073741824&&(Ae(e),e.subtreeFlags&6&&(e.flags|=8192)):Ae(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function Of(t,e){switch(mo(e),e.tag){case 1:return He(e.type)&&va(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pn(),oe(Ve),oe(Ie),wo(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jo(e),null;case 13:if(oe(de),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));fn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return oe(de),null;case 4:return pn(),null;case 10:return go(e.type._context),null;case 22:case 23:return Io(),null;case 24:return null;default:return null}}var Vr=!1,De=!1,Rf=typeof WeakSet=="function"?WeakSet:Set,H=null;function nn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){me(t,e,r)}else n.current=null}function _l(t,e,n){try{n()}catch(r){me(t,e,r)}}var Jc=!1;function $f(t,e){if(ll=xa,t=Eu(),uo(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=t,m=null;t:for(;;){for(var y;h!==n||a!==0&&h.nodeType!==3||(o=l+a),h!==i||r!==0&&h.nodeType!==3||(c=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===t)break t;if(m===n&&++d===a&&(o=l),m===i&&++u===r&&(c=l),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ol={focusedElem:t,selectionRange:n},xa=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var S=b.memoizedProps,j=b.memoizedState,p=e.stateNode,x=p.getSnapshotBeforeUpdate(e.elementType===e.type?S:ht(e.type,S),j);p.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var f=e.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(g){me(e,e.return,g)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return b=Jc,Jc=!1,b}function Gn(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&_l(e,n,i)}a=a.next}while(a!==r)}}function Wa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _h(t){var e=t.alternate;e!==null&&(t.alternate=null,_h(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wt],delete e[dr],delete e[ul],delete e[vf],delete e[bf])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Sh(t){return t.tag===5||t.tag===3||t.tag===4}function Yc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ya));else if(r!==4&&(t=t.child,t!==null))for(kl(t,e,n),t=t.sibling;t!==null;)kl(t,e,n),t=t.sibling}function Cl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Cl(t,e,n),t=t.sibling;t!==null;)Cl(t,e,n),t=t.sibling}var ke=null,mt=!1;function Vt(t,e,n){for(n=n.child;n!==null;)kh(t,e,n),n=n.sibling}function kh(t,e,n){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(La,n)}catch{}switch(n.tag){case 5:De||nn(n,e);case 6:var r=ke,a=mt;ke=null,Vt(t,e,n),ke=r,mt=a,ke!==null&&(mt?(t=ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ke.removeChild(n.stateNode));break;case 18:ke!==null&&(mt?(t=ke,n=n.stateNode,t.nodeType===8?wi(t.parentNode,n):t.nodeType===1&&wi(t,n),ar(t)):wi(ke,n.stateNode));break;case 4:r=ke,a=mt,ke=n.stateNode.containerInfo,mt=!0,Vt(t,e,n),ke=r,mt=a;break;case 0:case 11:case 14:case 15:if(!De&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&_l(n,e,l),a=a.next}while(a!==r)}Vt(t,e,n);break;case 1:if(!De&&(nn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){me(n,e,o)}Vt(t,e,n);break;case 21:Vt(t,e,n);break;case 22:n.mode&1?(De=(r=De)||n.memoizedState!==null,Vt(t,e,n),De=r):Vt(t,e,n);break;default:Vt(t,e,n)}}function Qc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Rf),e.forEach(function(r){var a=Wf.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function dt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:ke=o.stateNode,mt=!1;break e;case 3:ke=o.stateNode.containerInfo,mt=!0;break e;case 4:ke=o.stateNode.containerInfo,mt=!0;break e}o=o.return}if(ke===null)throw Error(F(160));kh(i,l,a),ke=null,mt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){me(a,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ch(e,t),e=e.sibling}function Ch(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dt(e,t),vt(t),r&4){try{Gn(3,t,t.return),Wa(3,t)}catch(S){me(t,t.return,S)}try{Gn(5,t,t.return)}catch(S){me(t,t.return,S)}}break;case 1:dt(e,t),vt(t),r&512&&n!==null&&nn(n,n.return);break;case 5:if(dt(e,t),vt(t),r&512&&n!==null&&nn(n,n.return),t.flags&32){var a=t.stateNode;try{tr(a,"")}catch(S){me(t,t.return,S)}}if(r&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,l=n!==null?n.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Jd(a,i),Qi(o,l);var d=Qi(o,i);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];u==="style"?eu(a,h):u==="dangerouslySetInnerHTML"?Zd(a,h):u==="children"?tr(a,h):Ql(a,u,h,d)}switch(o){case"input":Wi(a,i);break;case"textarea":Yd(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?an(a,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?an(a,!!i.multiple,i.defaultValue,!0):an(a,!!i.multiple,i.multiple?[]:"",!1))}a[dr]=i}catch(S){me(t,t.return,S)}}break;case 6:if(dt(e,t),vt(t),r&4){if(t.stateNode===null)throw Error(F(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(S){me(t,t.return,S)}}break;case 3:if(dt(e,t),vt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ar(e.containerInfo)}catch(S){me(t,t.return,S)}break;case 4:dt(e,t),vt(t);break;case 13:dt(e,t),vt(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Ao=xe())),r&4&&Qc(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(De=(d=De)||u,dt(e,t),De=d):dt(e,t),vt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(H=t,u=t.child;u!==null;){for(h=H=u;H!==null;){switch(m=H,y=m.child,m.tag){case 0:case 11:case 14:case 15:Gn(4,m,m.return);break;case 1:nn(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(S){me(r,n,S)}}break;case 5:nn(m,m.return);break;case 22:if(m.memoizedState!==null){Xc(h);continue}}y!==null?(y.return=m,H=y):Xc(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Xd("display",l))}catch(S){me(t,t.return,S)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(S){me(t,t.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:dt(e,t),vt(t),r&4&&Qc(t);break;case 21:break;default:dt(e,t),vt(t)}}function vt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Sh(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(tr(a,""),r.flags&=-33);var i=Yc(t);Cl(t,i,a);break;case 3:case 4:var l=r.stateNode.containerInfo,o=Yc(t);kl(t,o,l);break;default:throw Error(F(161))}}catch(c){me(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Lf(t,e,n){H=t,Eh(t)}function Eh(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var a=H,i=a.child;if(a.tag===22&&r){var l=a.memoizedState!==null||Vr;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||De;o=Vr;var d=De;if(Vr=l,(De=c)&&!d)for(H=a;H!==null;)l=H,c=l.child,l.tag===22&&l.memoizedState!==null?ed(a):c!==null?(c.return=l,H=c):ed(a);for(;i!==null;)H=i,Eh(i),i=i.sibling;H=a,Vr=o,De=d}Zc(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,H=i):Zc(t)}}function Zc(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:De||Wa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!De)if(n===null)r.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:ht(e.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Rc(e,i,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Rc(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&ar(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}De||e.flags&512&&Sl(e)}catch(m){me(e,e.return,m)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Xc(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function ed(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wa(4,e)}catch(c){me(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var a=e.return;try{r.componentDidMount()}catch(c){me(e,a,c)}}var i=e.return;try{Sl(e)}catch(c){me(e,i,c)}break;case 5:var l=e.return;try{Sl(e)}catch(c){me(e,l,c)}}}catch(c){me(e,e.return,c)}if(e===t){H=null;break}var o=e.sibling;if(o!==null){o.return=e.return,H=o;break}H=e.return}}var Uf=Math.ceil,Pa=qt.ReactCurrentDispatcher,Po=qt.ReactCurrentOwner,rt=qt.ReactCurrentBatchConfig,X=0,Se=null,ye=null,Ee=0,Ke=0,rn=fs(0),we=0,pr=null,Is=0,Ka=0,To=0,Jn=null,ze=null,Ao=0,yn=1/0,At=null,Ta=!1,El=null,as=null,Hr=!1,Xt=null,Aa=0,Yn=0,Pl=null,ia=-1,la=0;function Re(){return X&6?xe():ia!==-1?ia:ia=xe()}function is(t){return t.mode&1?X&2&&Ee!==0?Ee&-Ee:wf.transition!==null?(la===0&&(la=hu()),la):(t=te,t!==0||(t=window.event,t=t===void 0?16:vu(t.type)),t):1}function gt(t,e,n,r){if(50<Yn)throw Yn=0,Pl=null,Error(F(185));vr(t,n,r),(!(X&2)||t!==Se)&&(t===Se&&(!(X&2)&&(Ka|=n),we===4&&Yt(t,Ee)),We(t,r),n===1&&X===0&&!(e.mode&1)&&(yn=xe()+500,Ba&&xs()))}function We(t,e){var n=t.callbackNode;j0(t,e);var r=fa(t,t===Se?Ee:0);if(r===0)n!==null&&cc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&cc(n),e===1)t.tag===0?jf(td.bind(null,t)):Lu(td.bind(null,t)),gf(function(){!(X&6)&&xs()}),n=null;else{switch(mu(r)){case 1:n=so;break;case 4:n=du;break;case 16:n=ma;break;case 536870912:n=uu;break;default:n=ma}n=Rh(n,Ph.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ph(t,e){if(ia=-1,la=0,X&6)throw Error(F(327));var n=t.callbackNode;if(un()&&t.callbackNode!==n)return null;var r=fa(t,t===Se?Ee:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Da(t,r);else{e=r;var a=X;X|=2;var i=Ah();(Se!==t||Ee!==e)&&(At=null,yn=xe()+500,Es(t,e));do try{qf();break}catch(o){Th(t,o)}while(!0);po(),Pa.current=i,X=a,ye!==null?e=0:(Se=null,Ee=0,e=we)}if(e!==0){if(e===2&&(a=sl(t),a!==0&&(r=a,e=Tl(t,a))),e===1)throw n=pr,Es(t,0),Yt(t,r),We(t,xe()),n;if(e===6)Yt(t,r);else{if(a=t.current.alternate,!(r&30)&&!Ff(a)&&(e=Da(t,r),e===2&&(i=sl(t),i!==0&&(r=i,e=Tl(t,i))),e===1))throw n=pr,Es(t,0),Yt(t,r),We(t,xe()),n;switch(t.finishedWork=a,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:ws(t,ze,At);break;case 3:if(Yt(t,r),(r&130023424)===r&&(e=Ao+500-xe(),10<e)){if(fa(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){Re(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=dl(ws.bind(null,t,ze,At),e);break}ws(t,ze,At);break;case 4:if(Yt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,a=-1;0<r;){var l=31-pt(r);i=1<<l,l=e[l],l>a&&(a=l),r&=~i}if(r=a,r=xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Uf(r/1960))-r,10<r){t.timeoutHandle=dl(ws.bind(null,t,ze,At),r);break}ws(t,ze,At);break;case 5:ws(t,ze,At);break;default:throw Error(F(329))}}}return We(t,xe()),t.callbackNode===n?Ph.bind(null,t):null}function Tl(t,e){var n=Jn;return t.current.memoizedState.isDehydrated&&(Es(t,e).flags|=256),t=Da(t,e),t!==2&&(e=ze,ze=n,e!==null&&Al(e)),t}function Al(t){ze===null?ze=t:ze.push.apply(ze,t)}function Ff(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!yt(i(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yt(t,e){for(e&=~To,e&=~Ka,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pt(e),r=1<<n;t[n]=-1,e&=~r}}function td(t){if(X&6)throw Error(F(327));un();var e=fa(t,0);if(!(e&1))return We(t,xe()),null;var n=Da(t,e);if(t.tag!==0&&n===2){var r=sl(t);r!==0&&(e=r,n=Tl(t,r))}if(n===1)throw n=pr,Es(t,0),Yt(t,e),We(t,xe()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ws(t,ze,At),We(t,xe()),null}function Do(t,e){var n=X;X|=1;try{return t(e)}finally{X=n,X===0&&(yn=xe()+500,Ba&&xs())}}function Ms(t){Xt!==null&&Xt.tag===0&&!(X&6)&&un();var e=X;X|=1;var n=rt.transition,r=te;try{if(rt.transition=null,te=1,t)return t()}finally{te=r,rt.transition=n,X=e,!(X&6)&&xs()}}function Io(){Ke=rn.current,oe(rn)}function Es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pf(n)),ye!==null)for(n=ye.return;n!==null;){var r=n;switch(mo(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&va();break;case 3:pn(),oe(Ve),oe(Ie),wo();break;case 5:jo(r);break;case 4:pn();break;case 13:oe(de);break;case 19:oe(de);break;case 10:go(r.type._context);break;case 22:case 23:Io()}n=n.return}if(Se=t,ye=t=ls(t.current,null),Ee=Ke=e,we=0,pr=null,To=Ka=Is=0,ze=Jn=null,ks!==null){for(e=0;e<ks.length;e++)if(n=ks[e],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=a,r.next=l}n.pending=r}ks=null}return t}function Th(t,e){do{var n=ye;try{if(po(),na.current=Ea,Ca){for(var r=ue.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Ca=!1}if(Ds=0,Ne=je=ue=null,Kn=!1,mr=0,Po.current=null,n===null||n.return===null){we=1,pr=e,ye=null;break}e:{var i=t,l=n.return,o=n,c=e;if(e=Ee,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=qc(l);if(y!==null){y.flags&=-257,Bc(y,l,o,i,e),y.mode&1&&zc(i,d,e),e=y,c=d;var b=e.updateQueue;if(b===null){var S=new Set;S.add(c),e.updateQueue=S}else b.add(c);break e}else{if(!(e&1)){zc(i,d,e),Mo();break e}c=Error(F(426))}}else if(ce&&o.mode&1){var j=qc(l);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Bc(j,l,o,i,e),fo(gn(c,o));break e}}i=c=gn(c,o),we!==4&&(we=2),Jn===null?Jn=[i]:Jn.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=mh(i,c,e);Oc(i,p);break e;case 1:o=c;var x=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(as===null||!as.has(f)))){i.flags|=65536,e&=-e,i.lanes|=e;var g=fh(i,o,e);Oc(i,g);break e}}i=i.return}while(i!==null)}Ih(n)}catch(w){e=w,ye===n&&n!==null&&(ye=n=n.return);continue}break}while(!0)}function Ah(){var t=Pa.current;return Pa.current=Ea,t===null?Ea:t}function Mo(){(we===0||we===3||we===2)&&(we=4),Se===null||!(Is&268435455)&&!(Ka&268435455)||Yt(Se,Ee)}function Da(t,e){var n=X;X|=2;var r=Ah();(Se!==t||Ee!==e)&&(At=null,Es(t,e));do try{zf();break}catch(a){Th(t,a)}while(!0);if(po(),X=n,Pa.current=r,ye!==null)throw Error(F(261));return Se=null,Ee=0,we}function zf(){for(;ye!==null;)Dh(ye)}function qf(){for(;ye!==null&&!h0();)Dh(ye)}function Dh(t){var e=Oh(t.alternate,t,Ke);t.memoizedProps=t.pendingProps,e===null?Ih(t):ye=e,Po.current=null}function Ih(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Of(n,e),n!==null){n.flags&=32767,ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{we=6,ye=null;return}}else if(n=Mf(n,e,Ke),n!==null){ye=n;return}if(e=e.sibling,e!==null){ye=e;return}ye=e=t}while(e!==null);we===0&&(we=5)}function ws(t,e,n){var r=te,a=rt.transition;try{rt.transition=null,te=1,Bf(t,e,n,r)}finally{rt.transition=a,te=r}return null}function Bf(t,e,n,r){do un();while(Xt!==null);if(X&6)throw Error(F(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(w0(t,i),t===Se&&(ye=Se=null,Ee=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hr||(Hr=!0,Rh(ma,function(){return un(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=rt.transition,rt.transition=null;var l=te;te=1;var o=X;X|=4,Po.current=null,$f(t,n),Ch(n,t),cf(ol),xa=!!ll,ol=ll=null,t.current=n,Lf(n),m0(),X=o,te=l,rt.transition=i}else t.current=n;if(Hr&&(Hr=!1,Xt=t,Aa=a),i=t.pendingLanes,i===0&&(as=null),p0(n.stateNode),We(t,xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Ta)throw Ta=!1,t=El,El=null,t;return Aa&1&&t.tag!==0&&un(),i=t.pendingLanes,i&1?t===Pl?Yn++:(Yn=0,Pl=t):Yn=0,xs(),null}function un(){if(Xt!==null){var t=mu(Aa),e=rt.transition,n=te;try{if(rt.transition=null,te=16>t?16:t,Xt===null)var r=!1;else{if(t=Xt,Xt=null,Aa=0,X&6)throw Error(F(331));var a=X;for(X|=4,H=t.current;H!==null;){var i=H,l=i.child;if(H.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(H=d;H!==null;){var u=H;switch(u.tag){case 0:case 11:case 15:Gn(8,u,i)}var h=u.child;if(h!==null)h.return=u,H=h;else for(;H!==null;){u=H;var m=u.sibling,y=u.return;if(_h(u),u===d){H=null;break}if(m!==null){m.return=y,H=m;break}H=y}}}var b=i.alternate;if(b!==null){var S=b.child;if(S!==null){b.child=null;do{var j=S.sibling;S.sibling=null,S=j}while(S!==null)}}H=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,H=l;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Gn(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,H=p;break e}H=i.return}}var x=t.current;for(H=x;H!==null;){l=H;var f=l.child;if(l.subtreeFlags&2064&&f!==null)f.return=l,H=f;else e:for(l=x;H!==null;){if(o=H,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Wa(9,o)}}catch(w){me(o,o.return,w)}if(o===l){H=null;break e}var g=o.sibling;if(g!==null){g.return=o.return,H=g;break e}H=o.return}}if(X=a,xs(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(La,t)}catch{}r=!0}return r}finally{te=n,rt.transition=e}}return!1}function sd(t,e,n){e=gn(n,e),e=mh(t,e,1),t=rs(t,e,1),e=Re(),t!==null&&(vr(t,1,e),We(t,e))}function me(t,e,n){if(t.tag===3)sd(t,t,n);else for(;e!==null;){if(e.tag===3){sd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(as===null||!as.has(r))){t=gn(n,t),t=fh(e,t,1),e=rs(e,t,1),t=Re(),e!==null&&(vr(e,1,t),We(e,t));break}}e=e.return}}function Vf(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Re(),t.pingedLanes|=t.suspendedLanes&n,Se===t&&(Ee&n)===n&&(we===4||we===3&&(Ee&130023424)===Ee&&500>xe()-Ao?Es(t,0):To|=n),We(t,e)}function Mh(t,e){e===0&&(t.mode&1?(e=Or,Or<<=1,!(Or&130023424)&&(Or=4194304)):e=1);var n=Re();t=Ut(t,e),t!==null&&(vr(t,e,n),We(t,n))}function Hf(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Mh(t,n)}function Wf(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),Mh(t,n)}var Oh;Oh=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ve.current)Be=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Be=!1,If(t,e,n);Be=!!(t.flags&131072)}else Be=!1,ce&&e.flags&1048576&&Uu(e,wa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;aa(t,e),t=e.pendingProps;var a=mn(e,Ie.current);dn(e,n),a=_o(null,e,r,t,a,n);var i=So();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,He(r)?(i=!0,ba(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,vo(e),a.updater=Ha,e.stateNode=a,a._reactInternals=e,gl(e,r,t,n),e=bl(null,e,r,!0,i,n)):(e.tag=0,ce&&i&&ho(e),Oe(null,e,a,n),e=e.child),e;case 16:r=e.elementType;e:{switch(aa(t,e),t=e.pendingProps,a=r._init,r=a(r._payload),e.type=r,a=e.tag=Gf(r),t=ht(r,t),a){case 0:e=vl(null,e,r,t,n);break e;case 1:e=Wc(null,e,r,t,n);break e;case 11:e=Vc(null,e,r,t,n);break e;case 14:e=Hc(null,e,r,ht(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:ht(r,a),vl(t,e,r,a,n);case 1:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:ht(r,a),Wc(t,e,r,a,n);case 3:e:{if(yh(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,a=i.element,Hu(t,e),Sa(e,r,null,n);var l=e.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=gn(Error(F(423)),e),e=Kc(t,e,r,n,a);break e}else if(r!==a){a=gn(Error(F(424)),e),e=Kc(t,e,r,n,a);break e}else for(Ge=ns(e.stateNode.containerInfo.firstChild),Je=e,ce=!0,xt=null,n=Bu(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fn(),r===a){e=Ft(t,e,n);break e}Oe(t,e,r,n)}e=e.child}return e;case 5:return Wu(e),t===null&&fl(e),r=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,l=a.children,cl(r,a)?l=null:i!==null&&cl(r,i)&&(e.flags|=32),gh(t,e),Oe(t,e,l,n),e.child;case 6:return t===null&&fl(e),null;case 13:return vh(t,e,n);case 4:return bo(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xn(e,null,r,n):Oe(t,e,r,n),e.child;case 11:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:ht(r,a),Vc(t,e,r,a,n);case 7:return Oe(t,e,e.pendingProps,n),e.child;case 8:return Oe(t,e,e.pendingProps.children,n),e.child;case 12:return Oe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,a=e.pendingProps,i=e.memoizedProps,l=a.value,ae(Na,r._currentValue),r._currentValue=l,i!==null)if(yt(i.value,l)){if(i.children===a.children&&!Ve.current){e=Ft(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Rt(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),xl(i.return,n,e),o.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===e.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(F(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),xl(l,n,e),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===e){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Oe(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,r=e.pendingProps.children,dn(e,n),a=it(a),r=r(a),e.flags|=1,Oe(t,e,r,n),e.child;case 14:return r=e.type,a=ht(r,e.pendingProps),a=ht(r.type,a),Hc(t,e,r,a,n);case 15:return xh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:ht(r,a),aa(t,e),e.tag=1,He(r)?(t=!0,ba(e)):t=!1,dn(e,n),hh(e,r,a),gl(e,r,a,n),bl(null,e,r,!0,t,n);case 19:return bh(t,e,n);case 22:return ph(t,e,n)}throw Error(F(156,e.tag))};function Rh(t,e){return cu(t,e)}function Kf(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nt(t,e,n,r){return new Kf(t,e,n,r)}function Oo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gf(t){if(typeof t=="function")return Oo(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xl)return 11;if(t===eo)return 14}return 2}function ls(t,e){var n=t.alternate;return n===null?(n=nt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oa(t,e,n,r,a,i){var l=2;if(r=t,typeof t=="function")Oo(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Gs:return Ps(n.children,a,i,e);case Zl:l=8,a|=8;break;case zi:return t=nt(12,n,e,a|2),t.elementType=zi,t.lanes=i,t;case qi:return t=nt(13,n,e,a),t.elementType=qi,t.lanes=i,t;case Bi:return t=nt(19,n,e,a),t.elementType=Bi,t.lanes=i,t;case Wd:return Ga(n,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vd:l=10;break e;case Hd:l=9;break e;case Xl:l=11;break e;case eo:l=14;break e;case Kt:l=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=nt(l,n,e,a),e.elementType=t,e.type=r,e.lanes=i,e}function Ps(t,e,n,r){return t=nt(7,t,r,e),t.lanes=n,t}function Ga(t,e,n,r){return t=nt(22,t,r,e),t.elementType=Wd,t.lanes=n,t.stateNode={isHidden:!1},t}function Ti(t,e,n){return t=nt(6,t,null,e),t.lanes=n,t}function Ai(t,e,n){return e=nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Jf(t,e,n,r,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ui(0),this.expirationTimes=ui(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ui(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ro(t,e,n,r,a,i,l,o,c){return t=new Jf(t,e,n,o,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=nt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vo(i),t}function Yf(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ks,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $h(t){if(!t)return ds;t=t._reactInternals;e:{if(Rs(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(He(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(He(n))return $u(t,n,e)}return e}function Lh(t,e,n,r,a,i,l,o,c){return t=Ro(n,r,!0,t,a,i,l,o,c),t.context=$h(null),n=t.current,r=Re(),a=is(n),i=Rt(r,a),i.callback=e??null,rs(n,i,a),t.current.lanes=a,vr(t,a,r),We(t,r),t}function Ja(t,e,n,r){var a=e.current,i=Re(),l=is(a);return n=$h(n),e.context===null?e.context=n:e.pendingContext=n,e=Rt(i,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=rs(a,e,l),t!==null&&(gt(t,a,l,i),sa(t,a,l)),l}function Ia(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function nd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $o(t,e){nd(t,e),(t=t.alternate)&&nd(t,e)}function Qf(){return null}var Uh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lo(t){this._internalRoot=t}Ya.prototype.render=Lo.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Ja(t,e,null,null)};Ya.prototype.unmount=Lo.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ms(function(){Ja(null,t,null,null)}),e[Lt]=null}};function Ya(t){this._internalRoot=t}Ya.prototype.unstable_scheduleHydration=function(t){if(t){var e=pu();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Jt.length&&e!==0&&e<Jt[n].priority;n++);Jt.splice(n,0,t),n===0&&yu(t)}};function Uo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rd(){}function Zf(t,e,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var d=Ia(l);i.call(d)}}var l=Lh(e,r,t,0,null,!1,!1,"",rd);return t._reactRootContainer=l,t[Lt]=l.current,or(t.nodeType===8?t.parentNode:t),Ms(),l}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var d=Ia(c);o.call(d)}}var c=Ro(t,0,!1,null,null,!1,!1,"",rd);return t._reactRootContainer=c,t[Lt]=c.current,or(t.nodeType===8?t.parentNode:t),Ms(function(){Ja(e,c,n,r)}),c}function Za(t,e,n,r,a){var i=n._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=Ia(l);o.call(c)}}Ja(e,l,t,a)}else l=Zf(n,e,t,a,r);return Ia(l)}fu=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Un(e.pendingLanes);n!==0&&(no(e,n|1),We(e,xe()),!(X&6)&&(yn=xe()+500,xs()))}break;case 13:Ms(function(){var r=Ut(t,1);if(r!==null){var a=Re();gt(r,t,1,a)}}),$o(t,1)}};ro=function(t){if(t.tag===13){var e=Ut(t,134217728);if(e!==null){var n=Re();gt(e,t,134217728,n)}$o(t,134217728)}};xu=function(t){if(t.tag===13){var e=is(t),n=Ut(t,e);if(n!==null){var r=Re();gt(n,t,e,r)}$o(t,e)}};pu=function(){return te};gu=function(t,e){var n=te;try{return te=t,e()}finally{te=n}};Xi=function(t,e,n){switch(e){case"input":if(Wi(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var a=qa(r);if(!a)throw Error(F(90));Gd(r),Wi(r,a)}}}break;case"textarea":Yd(t,n);break;case"select":e=n.value,e!=null&&an(t,!!n.multiple,e,!1)}};nu=Do;ru=Ms;var Xf={usingClientEntryPoint:!1,Events:[jr,Zs,qa,tu,su,Do]},Mn={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ex={bundleType:Mn.bundleType,version:Mn.version,rendererPackageName:Mn.rendererPackageName,rendererConfig:Mn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lu(t),t===null?null:t.stateNode},findFiberByHostInstance:Mn.findFiberByHostInstance||Qf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wr.isDisabled&&Wr.supportsFiber)try{La=Wr.inject(ex),_t=Wr}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xf;Ze.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uo(e))throw Error(F(200));return Yf(t,e,null,n)};Ze.createRoot=function(t,e){if(!Uo(t))throw Error(F(299));var n=!1,r="",a=Uh;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Ro(t,1,!1,null,null,n,!1,r,a),t[Lt]=e.current,or(t.nodeType===8?t.parentNode:t),new Lo(e)};Ze.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=lu(e),t=t===null?null:t.stateNode,t};Ze.flushSync=function(t){return Ms(t)};Ze.hydrate=function(t,e,n){if(!Qa(e))throw Error(F(200));return Za(null,t,e,!0,n)};Ze.hydrateRoot=function(t,e,n){if(!Uo(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",l=Uh;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=Lh(e,null,t,1,n??null,a,!1,i,l),t[Lt]=e.current,or(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new Ya(e)};Ze.render=function(t,e,n){if(!Qa(e))throw Error(F(200));return Za(null,t,e,!1,n)};Ze.unmountComponentAtNode=function(t){if(!Qa(t))throw Error(F(40));return t._reactRootContainer?(Ms(function(){Za(null,null,t,!1,function(){t._reactRootContainer=null,t[Lt]=null})}),!0):!1};Ze.unstable_batchedUpdates=Do;Ze.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qa(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Za(t,e,n,!1,r)};Ze.version="18.3.1-next-f1338f8080-20240426";function Fh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fh)}catch(t){console.error(t)}}Fh(),Fd.exports=Ze;var tx=Fd.exports,zh,ad=tx;zh=ad.createRoot,ad.hydrateRoot;const sx="modulepreload",nx=function(t){return"/"+t},id={},Nr=function(e,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=nx(c),c in id)return;id[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":sx,d||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),d)return new Promise((m,y)=>{h.addEventListener("load",m),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},rx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Nr(async()=>{const{default:r}=await Promise.resolve().then(()=>_n);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Fo extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class ax extends Fo{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ld extends Fo{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class od extends Fo{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Dl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Dl||(Dl={}));var ix=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(u){try{d(r.next(u))}catch(h){l(h)}}function c(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((r=r.apply(t,e||[])).next())})};class lx{constructor(e,{headers:n={},customFetch:r,region:a=Dl.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=rx(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return ix(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:l}=n;let o={},{region:c}=n;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(o["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(o["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(o["Content-Type"]="application/json",u=JSON.stringify(l)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),a),body:u}).catch(S=>{throw new ax(S)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new ld(h);if(!h.ok)throw new od(h);let y=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return y==="application/json"?b=yield h.json():y==="application/octet-stream"?b=yield h.blob():y==="text/event-stream"?b=h:y==="multipart/form-data"?b=yield h.formData():b=yield h.text(),{data:b,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof od||a instanceof ld?a.context:void 0}}})}}var qe={},zo={},Xa={},_r={},ei={},ti={},ox=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},vn=ox();const cx=vn.fetch,qh=vn.fetch.bind(vn),Bh=vn.Headers,dx=vn.Request,ux=vn.Response,_n=Object.freeze(Object.defineProperty({__proto__:null,Headers:Bh,Request:dx,Response:ux,default:qh,fetch:cx},Symbol.toStringTag,{value:"Module"})),hx=Em(_n);var si={};Object.defineProperty(si,"__esModule",{value:!0});let mx=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};si.default=mx;var Vh=at&&at.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ti,"__esModule",{value:!0});const fx=Vh(hx),xx=Vh(si);let px=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=fx.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,c,d;let u=null,h=null,m=null,y=i.status,b=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?h=x:h=JSON.parse(x))}const j=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),p=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");j&&p&&p.length>1&&(m=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,y=406,b="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const j=await i.text();try{u=JSON.parse(j),Array.isArray(u)&&i.status===404&&(h=[],u=null,y=200,b="OK")}catch{i.status===404&&j===""?(y=204,b="No Content"):u={message:j}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,y=200,b="OK"),u&&this.shouldThrowOnError)throw new xx.default(u)}return{error:u,data:h,count:m,status:y,statusText:b}});return this.shouldThrowOnError||(a=a.catch(i=>{var l,o,c;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,n)}returns(){return this}overrideTypes(){return this}};ti.default=px;var gx=at&&at.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ei,"__esModule",{value:!0});const yx=gx(ti);let vx=class extends yx.default{select(e){let n=!1;const r=(e??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:i=a}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:a=r}={}){const i=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(l,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:i=!1,format:l="text"}={}){var o;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${d}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};ei.default=vx;var bx=at&&at.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_r,"__esModule",{value:!0});const jx=bx(ei);let wx=class extends jx.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const l=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${l}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};_r.default=wx;var Nx=at&&at.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xa,"__esModule",{value:!0});const On=Nx(_r);let _x=class{constructor(e,{headers:n={},schema:r,fetch:a}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=a}select(e,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let i=!1;const l=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),r&&this.headers.append("Prefer",`count=${r}`),new On.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var a;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new On.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:i=!0}={}){var l;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new On.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(e,{count:n}={}){var r;const a="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new On.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new On.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Xa.default=_x;var Hh=at&&at.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zo,"__esModule",{value:!0});const Sx=Hh(Xa),kx=Hh(_r);let Cx=class Wh{constructor(e,{headers:n={},schema:r,fetch:a}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=a}from(e){const n=new URL(`${this.url}/${e}`);return new Sx.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Wh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:a=!1,count:i}={}){var l;let o;const c=new URL(`${this.url}/rpc/${e}`);let d;r||a?(o=r?"HEAD":"GET",Object.entries(n).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(o="POST",d=n);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new kx.default({method:o,url:c,headers:u,schema:this.schemaName,body:d,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};zo.default=Cx;var Sn=at&&at.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qe,"__esModule",{value:!0});qe.PostgrestError=qe.PostgrestBuilder=qe.PostgrestTransformBuilder=qe.PostgrestFilterBuilder=qe.PostgrestQueryBuilder=qe.PostgrestClient=void 0;const Kh=Sn(zo);qe.PostgrestClient=Kh.default;const Gh=Sn(Xa);qe.PostgrestQueryBuilder=Gh.default;const Jh=Sn(_r);qe.PostgrestFilterBuilder=Jh.default;const Yh=Sn(ei);qe.PostgrestTransformBuilder=Yh.default;const Qh=Sn(ti);qe.PostgrestBuilder=Qh.default;const Zh=Sn(si);qe.PostgrestError=Zh.default;var Ex=qe.default={PostgrestClient:Kh.default,PostgrestQueryBuilder:Gh.default,PostgrestFilterBuilder:Jh.default,PostgrestTransformBuilder:Yh.default,PostgrestBuilder:Qh.default,PostgrestError:Zh.default};const{PostgrestClient:Px,PostgrestQueryBuilder:vy,PostgrestFilterBuilder:by,PostgrestTransformBuilder:jy,PostgrestBuilder:wy,PostgrestError:Ny}=Ex;class Tx{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Ax="2.15.1",Dx=`realtime-js/${Ax}`,Ix="1.0.0",Il=1e4,Mx=1e3,Ox=100;var Qn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Qn||(Qn={}));var ve;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ve||(ve={}));var ft;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ft||(ft={}));var Ml;(function(t){t.websocket="websocket"})(Ml||(Ml={}));var _s;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(_s||(_s={}));class Rx{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const a=n.getUint8(1),i=n.getUint8(2);let l=this.HEADER_LENGTH+2;const o=r.decode(e.slice(l,l+a));l=l+a;const c=r.decode(e.slice(l,l+i));l=l+i;const d=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}class Xh{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var re;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(re||(re={}));const cd=(t,e,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,l)=>(i[l]=$x(l,t,e,a),i),{})},$x=(t,e,n,r)=>{const a=e.find(o=>o.name===t),i=a==null?void 0:a.type,l=n[t];return i&&!r.includes(i)?em(i,l):Ol(l)},em=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return zx(e,n)}switch(t){case re.bool:return Lx(e);case re.float4:case re.float8:case re.int2:case re.int4:case re.int8:case re.numeric:case re.oid:return Ux(e);case re.json:case re.jsonb:return Fx(e);case re.timestamp:return qx(e);case re.abstime:case re.date:case re.daterange:case re.int4range:case re.int8range:case re.money:case re.reltime:case re.text:case re.time:case re.timestamptz:case re.timetz:case re.tsrange:case re.tstzrange:return Ol(e);default:return Ol(e)}},Ol=t=>t,Lx=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ux=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Fx=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},zx=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const l=t.slice(1,n);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>em(e,o))}return t},qx=t=>typeof t=="string"?t.replace(" ","T"):t,tm=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Di{constructor(e,n,r={},a=Il){this.channel=e,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(dd||(dd={}));class Zn{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zn.syncState(this.state,a,i,l),this.pendingDiffs.forEach(c=>{this.state=Zn.syncDiff(this.state,c,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Zn.syncDiff(this.state,a,i,l),o())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,a){const i=this.cloneDeep(e),l=this.transformState(n),o={},c={};return this.map(i,(d,u)=>{l[d]||(c[d]=u)}),this.map(l,(d,u)=>{const h=i[d];if(h){const m=u.map(j=>j.presence_ref),y=h.map(j=>j.presence_ref),b=u.filter(j=>y.indexOf(j.presence_ref)<0),S=h.filter(j=>m.indexOf(j.presence_ref)<0);b.length>0&&(o[d]=b),S.length>0&&(c[d]=S)}else o[d]=u}),this.syncDiff(i,{joins:o,leaves:c},r,a)}static syncDiff(e,n,r,a){const{joins:i,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(o,c)=>{var d;const u=(d=e[o])!==null&&d!==void 0?d:[];if(e[o]=this.cloneDeep(c),u.length>0){const h=e[o].map(y=>y.presence_ref),m=u.filter(y=>h.indexOf(y.presence_ref)<0);e[o].unshift(...m)}r(o,u,c)}),this.map(l,(o,c)=>{let d=e[o];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[o]=d,a(o,d,c),d.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const a=e[r];return"metas"in a?n[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ud;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ud||(ud={}));var Xn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Xn||(Xn={}));var Dt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Dt||(Dt={}));class qo{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Di(this,ft.join,this.params,this.timeout),this.rejoinTimer=new Xh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ve.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ft.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Zn(this),this.broadcastEndpointURL=tm(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ve.closed){const{config:{broadcast:i,presence:l,private:o}}=this.params,c=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Xn.PRESENCE]&&this.bindings[Xn.PRESENCE].length>0,u={},h={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(Dt.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Dt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket.setAuth(),m===void 0){e==null||e(Dt.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,S=(y=b==null?void 0:b.length)!==null&&y!==void 0?y:0,j=[];for(let p=0;p<S;p++){const x=b[p],{filter:{event:f,schema:g,table:w,filter:v}}=x,_=m&&m[p];if(_&&_.event===f&&_.schema===g&&_.table===w&&_.filter===v)j.push(Object.assign(Object.assign({},x),{id:_.id}));else{this.unsubscribe(),this.state=ve.errored,e==null||e(Dt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,e&&e(Dt.SUBSCRIBED);return}}).receive("error",m=>{this.state=ve.errored,e==null||e(Dt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Dt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ve.joined&&e===Xn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,c;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ve.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ft.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new Di(this,ft.leave,{},e),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ve.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Di(this,e,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Ox){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var a,i;const l=e.toLocaleLowerCase(),{close:o,error:c,leave:d,join:u}=ft;if(r&&[o,c,d,u].indexOf(l)>=0&&r!==this._joinRef())return;let m=this._onMessage(l,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var b,S,j;return((b=y.filter)===null||b===void 0?void 0:b.event)==="*"||((j=(S=y.filter)===null||S===void 0?void 0:S.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===l}).map(y=>y.callback(m,r)):(i=this.bindings[l])===null||i===void 0||i.filter(y=>{var b,S,j,p,x,f;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in y){const g=y.id,w=(b=y.filter)===null||b===void 0?void 0:b.event;return g&&((S=n.ids)===null||S===void 0?void 0:S.includes(g))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const g=(x=(p=y==null?void 0:y.filter)===null||p===void 0?void 0:p.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return g==="*"||g===((f=n==null?void 0:n.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===l}).map(y=>{if(typeof m=="object"&&"ids"in m){const b=m.data,{schema:S,table:j,commit_timestamp:p,type:x,errors:f}=b;m=Object.assign(Object.assign({},{schema:S,table:j,commit_timestamp:p,eventType:x,new:{},old:{},errors:f}),this._getPayloadRecords(b))}y.callback(m,r)})}_isClosed(){return this.state===ve.closed}_isJoined(){return this.state===ve.joined}_isJoining(){return this.state===ve.joining}_isLeaving(){return this.state===ve.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const a=e.toLocaleLowerCase(),i={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&qo.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ft.close,{},e)}_onError(e){this._on(ft.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ve.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=cd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=cd(e.columns,e.old_record)),n}}const hd=()=>{},Kr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bx=[1e3,2e3,5e3,1e4],Vx=1e4,Hx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Wx{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Il,this.transport=null,this.heartbeatIntervalMs=Kr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hd,this.ref=0,this.reconnectTimer=null,this.logger=hd,this.conn=null,this.sendBuffer=[],this.serializer=new Rx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...l)=>Nr(async()=>{const{default:o}=await Promise.resolve().then(()=>_n);return{default:o}},void 0).then(({default:o})=>o(...l)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Ml.websocket}`,this.httpEndpoint=tm(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Tx.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ix}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Qn.connecting:return _s.Connecting;case Qn.open:return _s.Open;case Qn.closing:return _s.Closing;default:return _s.Closed}}isConnected(){return this.connectionState()===_s.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new qo(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:a,ref:i}=e,l=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${n} ${r} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Mx,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Kr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:i,ref:l}=n,o=l?`(${l})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${a} ${o}`.trim(),i),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(a,i,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ft.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${r}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Hx],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:Dx};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(ft.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Xh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Kr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,a,i,l,o,c,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Il,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Kr.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=e==null?void 0:e.reconnectAfterMs)!==null&&o!==void 0?o:u=>Bx[u-1]||Vx,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(u,h)=>h(JSON.stringify(u)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Bo extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function be(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Kx extends Bo{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Rl extends Bo{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Gx=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(u){try{d(r.next(u))}catch(h){l(h)}}function c(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((r=r.apply(t,e||[])).next())})};const sm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Nr(async()=>{const{default:r}=await Promise.resolve().then(()=>_n);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Jx=()=>Gx(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Nr(()=>Promise.resolve().then(()=>_n),void 0)).Response:Response}),$l=t=>{if(Array.isArray(t))return t.map(n=>$l(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=$l(r)}),e},Yx=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var $s=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(u){try{d(r.next(u))}catch(h){l(h)}}function c(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((r=r.apply(t,e||[])).next())})};const Ii=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Qx=(t,e,n)=>$s(void 0,void 0,void 0,function*(){const r=yield Jx();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(a=>{const i=t.status||500,l=(a==null?void 0:a.statusCode)||i+"";e(new Kx(Ii(a),i,l))}).catch(a=>{e(new Rl(Ii(a),a))}):e(new Rl(Ii(t),t))}),Zx=(t,e,n,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?a:(Yx(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),n))};function Sr(t,e,n,r,a,i){return $s(this,void 0,void 0,function*(){return new Promise((l,o)=>{t(n,Zx(e,r,a,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Qx(c,o,r))})})}function Ma(t,e,n,r){return $s(this,void 0,void 0,function*(){return Sr(t,"GET",e,n,r)})}function jt(t,e,n,r,a){return $s(this,void 0,void 0,function*(){return Sr(t,"POST",e,r,a,n)})}function Ll(t,e,n,r,a){return $s(this,void 0,void 0,function*(){return Sr(t,"PUT",e,r,a,n)})}function Xx(t,e,n,r){return $s(this,void 0,void 0,function*(){return Sr(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function nm(t,e,n,r,a){return $s(this,void 0,void 0,function*(){return Sr(t,"DELETE",e,r,a,n)})}var Me=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(u){try{d(r.next(u))}catch(h){l(h)}}function c(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((r=r.apply(t,e||[])).next())})};const ep={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},md={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tp{constructor(e,n={},r,a){this.url=e,this.headers=n,this.bucketId=r,this.fetch=sm(a)}uploadOrUpdate(e,n,r,a){return Me(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},md),a);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const d=this._removeEmptyFolders(n),u=this._getFinalPath(d),h=yield(e=="PUT"?Ll:jt)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(be(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,a){return Me(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",n);try{let c;const d=Object.assign({upsert:md.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield Ll(this.fetch,o.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(be(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Me(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=yield jt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new Bo("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:o},error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}update(e,n,r){return Me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Me(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(be(a))return{data:null,error:a};throw a}})}copy(e,n,r){return Me(this,void 0,void 0,function*(){try{return{data:{path:(yield jt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(be(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,r){return Me(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield jt(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(be(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,r){return Me(this,void 0,void 0,function*(){try{const a=yield jt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(be(a))return{data:null,error:a};throw a}})}download(e,n){return Me(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Ma(this.fetch,`${this.url}/${a}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(be(o))return{data:null,error:o};throw o}})}info(e){return Me(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ma(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:$l(r),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}exists(e){return Me(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Xx(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(be(r)&&r instanceof Rl){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),a=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&a.push(i);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${d}`)}}}remove(e){return Me(this,void 0,void 0,function*(){try{return{data:yield nm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}list(e,n,r){return Me(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},ep),n),{prefix:e||""});return{data:yield jt(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(be(a))return{data:null,error:a};throw a}})}listV2(e,n){return Me(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield jt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const sp="2.11.0",np={"X-Client-Info":`storage-js/${sp}`};var Fs=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(u){try{d(r.next(u))}catch(h){l(h)}}function c(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((r=r.apply(t,e||[])).next())})};class rp{constructor(e,n={},r,a){const i=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},np),n),this.fetch=sm(r)}listBuckets(){return Fs(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(be(e))return{data:null,error:e};throw e}})}getBucket(e){return Fs(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Fs(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Fs(this,void 0,void 0,function*(){try{return{data:yield Ll(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Fs(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Fs(this,void 0,void 0,function*(){try{return{data:yield nm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}}class ap extends rp{constructor(e,n={},r,a){super(e,n,r,a)}from(e){return new tp(this.url,this.headers,e,this.fetch)}}const ip="2.56.0";let zn="";typeof Deno<"u"?zn="deno":typeof document<"u"?zn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zn="react-native":zn="node";const lp={"X-Client-Info":`supabase-js-${zn}/${ip}`},op={headers:lp},cp={schema:"public"},dp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},up={};var hp=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(u){try{d(r.next(u))}catch(h){l(h)}}function c(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((r=r.apply(t,e||[])).next())})};const mp=t=>{let e;return t?e=t:typeof fetch>"u"?e=qh:e=fetch,(...n)=>e(...n)},fp=()=>typeof Headers>"u"?Bh:Headers,xp=(t,e,n)=>{const r=mp(n),a=fp();return(i,l)=>hp(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:t;let d=new a(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},l),{headers:d}))})};var pp=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(u){try{d(r.next(u))}catch(h){l(h)}}function c(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((r=r.apply(t,e||[])).next())})};function gp(t){return t.endsWith("/")?t:t+"/"}function yp(t,e){var n,r;const{db:a,auth:i,realtime:l,global:o}=t,{db:c,auth:d,realtime:u,global:h}=e,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),l),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>pp(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const rm="2.71.1",Hs=30*1e3,Ul=3,Mi=Ul*Hs,vp="http://localhost:9999",bp="supabase.auth.token",jp={"X-Client-Info":`gotrue-js/${rm}`},Fl="X-Supabase-Api-Version",am={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},wp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Np=10*60*1e3;class Vo extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Y(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class _p extends Vo{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Sp(t){return Y(t)&&t.name==="AuthApiError"}class im extends Vo{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ps extends Vo{constructor(e,n,r,a){super(e,r,a),this.name=n,this.status=r}}class Wt extends ps{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kp(t){return Y(t)&&t.name==="AuthSessionMissingError"}class Gr extends ps{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jr extends ps{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Yr extends ps{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Cp(t){return Y(t)&&t.name==="AuthImplicitGrantRedirectError"}class fd extends ps{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zl extends ps{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Oi(t){return Y(t)&&t.name==="AuthRetryableFetchError"}class xd extends ps{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ql extends ps{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pd=` 	
\r=`.split(""),Ep=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<pd.length;e+=1)t[pd[e].charCodeAt(0)]=-2;for(let e=0;e<Oa.length;e+=1)t[Oa[e].charCodeAt(0)]=e;return t})();function gd(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Oa[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Oa[r]),e.queuedBits-=6}}function lm(t,e,n){const r=Ep[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function yd(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=l=>{Ap(l,r,n)};for(let l=0;l<t.length;l+=1)lm(t.charCodeAt(l),a,i);return e.join("")}function Pp(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Tp(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}Pp(r,e)}}function Ap(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Dp(t){const e=[],n={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)lm(t.charCodeAt(a),n,r);return new Uint8Array(e)}function Ip(t){const e=[];return Tp(t,n=>e.push(n)),new Uint8Array(e)}function Mp(t){const e=[],n={queue:0,queuedBits:0},r=a=>{e.push(a)};return t.forEach(a=>gd(a,n,r)),gd(null,n,r),e.join("")}function Op(t){return Math.round(Date.now()/1e3)+t}function Rp(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ut=()=>typeof window<"u"&&typeof document<"u",vs={tested:!1,writable:!1},om=()=>{if(!ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vs.tested)return vs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),vs.tested=!0,vs.writable=!0}catch{vs.tested=!0,vs.writable=!1}return vs.writable};function $p(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return n.searchParams.forEach((r,a)=>{e[a]=r}),e}const cm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Nr(async()=>{const{default:r}=await Promise.resolve().then(()=>_n);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Lp=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ws=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},bs=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ht=async(t,e)=>{await t.removeItem(e)};class ni{constructor(){this.promise=new ni.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ni.promiseConstructor=Promise;function Ri(t){const e=t.split(".");if(e.length!==3)throw new ql("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!wp.test(e[r]))throw new ql("JWT not in base64url format");return{header:JSON.parse(yd(e[0])),payload:JSON.parse(yd(e[1])),signature:Dp(e[2]),raw:{header:e[0],payload:e[1]}}}async function Up(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Fp(t,e){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await t(i);if(!e(i,null,l)){r(l);return}}catch(l){if(!e(i,l)){a(l);return}}})()})}function zp(t){return("0"+t.toString(16)).substr(-2)}function qp(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,zp).join("")}async function Bp(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Vp(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Bp(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zs(t,e,n=!1){const r=qp();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Ws(t,`${e}-code-verifier`,a);const i=await Vp(r);return[i,r===i?"plain":"s256"]}const Hp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Wp(t){const e=t.headers.get(Fl);if(!e||!e.match(Hp))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Kp(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Gp(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Jp=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qs(t){if(!Jp.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $i(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vd(t){return JSON.parse(JSON.stringify(t))}var Yp=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};const Ns=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Qp=[502,503,504];async function bd(t){var e;if(!Lp(t))throw new zl(Ns(t),0);if(Qp.includes(t.status))throw new zl(Ns(t),t.status);let n;try{n=await t.json()}catch(i){throw new im(Ns(i),i)}let r;const a=Wp(t);if(a&&a.getTime()>=am["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new xd(Ns(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Wt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new xd(Ns(n),t.status,n.weak_password.reasons);throw new _p(Ns(n),t.status||500,r)}const Zp=(t,e,n,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function Q(t,e,n,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[Fl]||(i[Fl]=am["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const l=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Xp(t,e,n+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Xp(t,e,n,r,a,i){const l=Zp(e,r,a,i);let o;try{o=await t(n,Object.assign({},l))}catch(c){throw console.error(c),new zl(Ns(c),0)}if(o.ok||await bd(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(c){await bd(c)}}function Tt(t){var e;let n=null;ng(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Op(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function jd(t){const e=Tt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Qt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function eg(t){return{data:t,error:null}}function tg(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=t,l=Yp(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function sg(t){return t}function ng(t){return t.access_token&&t.refresh_token&&t.expires_in}const Li=["global","local","others"];var rg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};class ag{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=cm(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Li[0]){if(Li.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Li.join(", ")}`);try{return await Q(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Qt})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=rg(e,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:tg,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Y(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qt})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,a,i,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:sg});if(u.error)throw u.error;const h=await u.json(),m=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(b=>{const S=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(b.split(";")[1].split("=")[1]);d[`${j}Page`]=S}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(Y(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){qs(e);try{return await Q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qt})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){qs(e);try{return await Q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Qt})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){qs(e);try{return await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Qt})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){qs(e.userId);try{const{data:n,error:r}=await Q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _deleteFactor(e){qs(e.userId),qs(e.id);try{return{data:await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}}}function wd(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function ig(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Bs={debug:!!(globalThis&&om()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class lg extends dm{}async function og(t,e,n){Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new lg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Bs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}ig();const cg={url:vp,storageKey:bp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Nd(t,e,n){return await n()}const Vs={};class gr{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=gr.nextInstanceID,gr.nextInstanceID+=1,this.instanceID>0&&ut()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},cg),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new ag({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=cm(a.fetch),this.lock=a.lock||Nd,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ut()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=og:this.lock=Nd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:om()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=wd(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=wd(this.memoryStorage)),ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Vs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Vs[this.storageKey]=Object.assign(Object.assign({},Vs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Vs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vs[this.storageKey]=Object.assign(Object.assign({},Vs[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${rm}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=$p(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ut()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Cp(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Y(n)?{error:n}:{error:new im("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,a;try{const i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Tt}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Y(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,a;try{let i;if("email"in e){const{email:u,password:h,options:m}=e;let y=null,b=null;this.flowType==="pkce"&&([y,b]=await zs(this.storage,this.storageKey)),i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:b},xform:Tt})}else if("phone"in e){const{phone:u,password:h,options:m}=e;i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Tt})}else throw new Jr("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Y(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:l,options:o}=e;n=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:jd})}else if("phone"in e){const{phone:i,password:l,options:o}=e;n=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:jd})}else throw new Jr("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Gr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(Y(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,a,i,l,o,c,d,u,h,m,y;let b,S;if("message"in e)b=e.message,S=e.signature;else{const{chain:j,wallet:p,statement:x,options:f}=e;let g;if(ut())if(typeof p=="object")g=p;else{const v=window;if("solana"in v&&typeof v.solana=="object"&&("signIn"in v.solana&&typeof v.solana.signIn=="function"||"signMessage"in v.solana&&typeof v.solana.signMessage=="function"))g=v.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=p}const w=new URL((n=f==null?void 0:f.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in g&&g.signIn){const v=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),x?{statement:x}:null));let _;if(Array.isArray(v)&&v[0]&&typeof v[0]=="object")_=v[0];else if(v&&typeof v=="object"&&"signedMessage"in v&&"signature"in v)_=v;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)b=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),S=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in g)||typeof g.signMessage!="function"||!("publicKey"in g)||typeof g!="object"||!g.publicKey||!("toBase58"in g.publicKey)||typeof g.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${w.host} wants you to sign in with your Solana account:`,g.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(a=(r=f==null?void 0:f.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=f==null?void 0:f.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((d=f==null?void 0:f.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((h=(u=f==null?void 0:f.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...f.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const v=await g.signMessage(new TextEncoder().encode(b),"utf8");if(!v||!(v instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=v}}try{const{data:j,error:p}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Mp(S)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Tt});if(p)throw p;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Gr}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:p})}catch(j){if(Y(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const n=await bs(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:i,error:l}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Tt});if(await Ht(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Gr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(Y(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:a,access_token:i,nonce:l}=e,o=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Tt}),{data:c,error:d}=o;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Gr}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(n){if(Y(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,a,i,l;try{if("email"in e){const{email:o,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await zs(this.storage,this.storageKey));const{error:h}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:c}=e,{data:d,error:u}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Jr("You must provide either an email or phone number.")}catch(o){if(Y(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var n,r;try{let a,i;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:o}=await Q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Tt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(Y(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var n,r,a;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await zs(this.storage,this.storageKey)),await Q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:eg})}catch(i){if(Y(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Wt;const{error:a}=await Q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Y(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:i}=e,{error:l}=await Q(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:a,options:i}=e,{data:l,error:o}=await Q(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new Jr("You must provide either an email or phone number and a type")}catch(n){if(Y(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await bs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Mi:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await bs(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=$i()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qt}):await this._useSession(async n=>{var r,a,i;const{data:l,error:o}=n;if(o)throw o;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wt}:await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Qt})})}catch(n){if(Y(n))return kp(n)&&(await this._removeSession(),await Ht(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new Wt;const l=a.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await zs(this.storage,this.storageKey));const{data:d,error:u}=await Q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Qt});if(u)throw u;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Wt;const n=Date.now()/1e3;let r=n,a=!0,i=null;const{payload:l}=Ri(e.access_token);if(l.exp&&(r=l.exp,a=r<=n),a){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Y(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:o}=n;if(o)throw o;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Wt;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Y(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!ut())throw new Yr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Yr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new fd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yr("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new fd("No code detected.");const{data:x,error:f}=await this._exchangeCodeForSession(e.code);if(f)throw f;const g=new URL(window.location.href);return g.searchParams.delete("code"),window.history.replaceState(window.history.state,"",g.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:o,expires_at:c,token_type:d}=e;if(!i||!o||!l||!d)throw new Yr("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let m=u+h;c&&(m=parseInt(c));const y=m-u;y*1e3<=Hs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const b=m-h;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,m,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,m,u);const{data:S,error:j}=await this._getUser(i);if(j)throw j;const p={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:l,token_type:d,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(r){if(Y(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await bs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{error:i};const l=(r=a.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:o}=await this.admin.signOut(l,e);if(o&&!(Sp(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Ht(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Rp(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,a;try{const{data:{session:i},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await zs(this.storage,this.storageKey,!0));try{return await Q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Y(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:a}=await this._useSession(async i=>{var l,o,c,d,u;const{data:h,error:m}=i;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Q(this.fetch,"GET",y,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return ut()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Y(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,a;const{data:i,error:l}=n;if(l)throw l;return await Q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Fp(async a=>(a>0&&await Up(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Tt})),(a,i)=>{const l=200*Math.pow(2,a);return i&&Oi(i)&&Date.now()+l-r<Hs})}catch(r){if(this._debug(n,"error",r),Y(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ut()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await bs(this.storage,this.storageKey);if(a&&this.userStorage){let l=await bs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await Ws(this.userStorage,this.storageKey+"-user",l)),a.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:$i()}else if(a&&!a.user&&!a.user){const l=await bs(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await Ht(this.storage,this.storageKey+"-user"),await Ws(this.storage,this.storageKey,a)):a.user=$i()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Mi;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Mi}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),Oi(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(a.access_token);!o&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Wt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new ni;const{data:i,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!i.session)throw new Wt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),Y(i)){const l={session:null,error:i};return Oi(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ws(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=vd(a);await Ws(this.storage,this.storageKey,i)}else{const a=vd(n);await Ws(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ht(this.storage,this.storageKey),await Ht(this.storage,this.storageKey+"-code-verifier"),await Ht(this.storage,this.storageKey+"-user"),this.userStorage&&await Ht(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/Hs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Hs}ms, refresh threshold is ${Ul} ticks`),a<=Ul&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof dm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,l]=await zs(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await Q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,a;const{data:i,error:l}=n;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await Q(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{data:null,error:i};const{data:l,error:o}=await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(n){if(Y(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Y(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],a=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Ri(a.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+Np>a)return r;const{data:i,error:l}=await Q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:y,error:b}=await this.getSession();if(b||!y.session)return{data:null,error:b};r=y.session.access_token}const{header:a,payload:i,signature:l,raw:{header:o,payload:c}}=Ri(r);n!=null&&n.allowExpired||Kp(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:i,header:a,signature:l},error:null}}const u=Gp(a.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,l,Ip(`${o}.${c}`)))throw new ql("Invalid JWT signature");return{data:{claims:i,header:a,signature:l},error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}}}gr.nextInstanceID=0;const dg=gr;class ug extends dg{constructor(e){super(e)}}var hg=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(u){try{d(r.next(u))}catch(h){l(h)}}function c(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((r=r.apply(t,e||[])).next())})};class mg{constructor(e,n,r){var a,i,l;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const o=gp(e),c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:cp,realtime:up,auth:Object.assign(Object.assign({},dp),{storageKey:d}),global:op},h=yp(r??{},u);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=xp(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Px(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new ap(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new lx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return hg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,storageKey:i,flowType:l,lock:o,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ug({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,flowType:l,lock:o,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Wx(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const fg=(t,e,n)=>new mg(t,e,n);function xg(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}xg()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const um="https://ynzoqkhnpvkiizugursp.supabase.co",pg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inluem9xa2hucHZraWl6dWd1cnNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyMDMzNDIsImV4cCI6MjA3MTc3OTM0Mn0.OYPsOjTLCbHmyExmUFtr3pvtH-JrlQC9K_QDS6_cRmg",hm=um.includes("supabase.co");let B=null;if(hm)try{B=fg(um,pg)}catch(t){console.warn("Failed to initialize Supabase client:",t)}const J=hm&&B!==null,fe=()=>{const[t,e]=N.useState(null),[n,r]=N.useState(null),[a,i]=N.useState(null),[l,o]=N.useState(!1),[c,d]=N.useState(!0),u=N.useRef(!1);N.useEffect(()=>{if(u.current)return;u.current=!0,console.log("Auth hook initializing..."),(async()=>{try{if(!J){console.log("Demo mode - creating demo user");const f={id:"demo-user-id",email:"demo@healthsphere.com",user_metadata:{}},g={id:"demo-user-id",email:"demo@healthsphere.com",name:"Dr. Demo User",country:"US",phone:"+1 (555) 123-4567",timezone:"UTC",subscription_plan:"pro",ai_minutes_used:120,msg_quota_used:432,created_at:new Date().toISOString()};e(f),r(g),i(null),o(!1),d(!1),console.log("Demo user created successfully");return}console.log("Checking Supabase session...");const{data:{session:p}}=await B.auth.getSession();p!=null&&p.user?(console.log("Found existing session:",p.user.email),e(p.user),await h(p.user.id,p.user.email)):(console.log("No existing session found"),d(!1));const{data:{subscription:x}}=B.auth.onAuthStateChange(async(f,g)=>{var w;console.log("Auth state changed:",f,(w=g==null?void 0:g.user)==null?void 0:w.email),g!=null&&g.user?(e(g.user),await h(g.user.id,g.user.email)):(e(null),r(null),i(null),o(!1),d(!1))});return()=>x.unsubscribe()}catch(p){console.error("Auth initialization error:",p),d(!1)}})()},[]);const h=async(j,p)=>{try{if(console.log("Fetching user profile for:",j,p),p==="admin@healthsphere.com"){console.log("Default admin detected");const v={id:"admin-id",user_id:j,email:p,name:"Dr. Sarah Johnson",role:"super_admin",permissions:{view_all:!0,manage_doctors:!0,view_logs:!0,compliance:!0},created_at:new Date().toISOString(),updated_at:new Date().toISOString()};i(v),o(!0),r(null),d(!1);return}const{data:x}=await B.from("admins").select("*").eq("user_id",j).maybeSingle();if(x){console.log("Admin profile found:",x.name),i(x),o(!0),r(null),d(!1);return}const{data:f}=await B.from("doctors").select("*").eq("id",j).maybeSingle();if(f){console.log("Doctor profile found:",f.name),r(f),o(!1),i(null),d(!1);return}console.log("Creating default doctor profile");const g=m(p),w={id:j,email:p,name:g,country:"US",phone:"+1 (555) 123-4567",timezone:"UTC",subscription_plan:"starter",ai_minutes_used:0,msg_quota_used:0,created_at:new Date().toISOString()};try{await B.from("doctors").insert([w])}catch{console.log("Could not insert doctor profile, using local data")}r(w),o(!1),i(null),d(!1)}catch(x){console.error("Error fetching user profile:",x),d(!1)}},m=j=>{if(j==="rghatwai@gmail.com")return"Dr. Rahul Ghatwai";if(j==="admin@healthsphere.com")return"System Administrator";if(j==="doctor@healthsphere.com")return"Dr. Michael Chen";const p=j.split("@")[0];return p==="rghatwai"||p.includes("ghatwai")||p.includes("rahul")?"Dr. Rahul Ghatwai":`Dr. ${p.split(/[._-]/).map(g=>g.charAt(0).toUpperCase()+g.slice(1).toLowerCase()).join(" ")}`},y=async(j,p)=>{if(!J){console.log("Demo sign in for:",j),d(!0);const x={id:"demo-user-id",email:j};if(j==="admin@healthsphere.com"){const f={id:"admin-user-id",user_id:"admin-user-id",email:j,name:"System Administrator",role:"super_admin",permissions:{view_all:!0,manage_doctors:!0,view_logs:!0,compliance:!0},created_at:new Date().toISOString(),updated_at:new Date().toISOString()};e(x),i(f),o(!0),r(null)}else{const f={id:"demo-user-id",email:j,name:"Dr. Demo User",country:"US",phone:"+1 (555) 123-4567",timezone:"UTC",subscription_plan:"pro",ai_minutes_used:120,msg_quota_used:432,created_at:new Date().toISOString()};e(x),r(f),o(!1),i(null)}return d(!1),{data:{user:x},error:null}}d(!0);try{const{data:x,error:f}=await B.auth.signInWithPassword({email:j,password:p});return f&&(console.error("Supabase sign in error:",f),d(!1)),{data:x,error:f}}catch(x){return console.error("Sign in exception:",x),d(!1),{data:null,error:x}}},b=async(j,p,x)=>{if(!J){console.log("Demo sign up for:",j),d(!0);const f={id:"demo-user-id",email:j},g={id:"demo-user-id",email:j,name:(x==null?void 0:x.name)||"New Doctor",country:(x==null?void 0:x.country)||"US",phone:(x==null?void 0:x.phone)||"",timezone:"UTC",subscription_plan:"starter",ai_minutes_used:0,msg_quota_used:0,created_at:new Date().toISOString()};return e(f),r(g),o(!1),i(null),d(!1),{data:{user:f},error:null}}d(!0);try{const{data:f,error:g}=await B.auth.signUp({email:j,password:p,options:{emailRedirectTo:void 0,data:x}});return g&&(console.error("Supabase sign up error:",g),d(!1)),{data:f,error:g}}catch(f){return console.error("Sign up exception:",f),d(!1),{data:null,error:f}}},S=N.useCallback(async()=>{if(console.log("signOut called, isSupabaseConfigured:",J),e(null),r(null),i(null),o(!1),d(!1),!J){console.log("Demo mode - clearing user state");return}try{console.log("Attempting Supabase signOut..."),typeof window<"u"&&Object.keys(localStorage).forEach(p=>{(p.startsWith("sb-")||p.includes("supabase"))&&localStorage.removeItem(p)});try{await B.auth.signOut({scope:"local"})}catch(j){console.log("Supabase signOut failed (expected):",j)}console.log("Supabase signOut completed")}catch(j){console.error("Sign out error:",j)}console.log("User state cleared, should redirect to landing page")},[]);return{user:t,doctor:n,admin:a,isAdmin:l,loading:c,signIn:y,signUp:b,signOut:S}};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),W=(t,e)=>{const n=N.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...d},u)=>N.createElement("svg",{ref:u,...gg,width:a,height:a,stroke:r,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${yg(t)}`,o].join(" "),...d},[...e.map(([h,m])=>N.createElement(h,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=W("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=W("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=W("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=W("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=W("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=W("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=W("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=W("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=W("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=W("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=W("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=W("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=W("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=W("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=W("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=W("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=W("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=W("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=W("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=W("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=W("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=W("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=W("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=W("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=W("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=W("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=W("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=W("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=W("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=W("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=W("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=W("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=W("MemoryStick",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=W("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=W("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=W("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=W("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=W("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=W("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=W("PhoneIncoming",[["polyline",{points:"16 2 16 8 22 8",key:"1ygljm"}],["line",{x1:"22",x2:"16",y1:"2",y2:"8",key:"1xzwqn"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=W("PhoneOutgoing",[["polyline",{points:"22 8 22 2 16 2",key:"1g204g"}],["line",{x1:"16",x2:"22",y1:"8",y2:"2",key:"1ggias"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=W("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=W("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=W("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=W("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=W("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=W("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=W("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=W("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=W("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=W("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=W("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=W("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=W("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=W("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=W("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=W("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=W("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=W("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=W("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=W("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=W("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=W("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=W("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=W("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=W("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),qg=({initialMode:t="signin",onBack:e})=>{const[n,r]=N.useState(t==="signup"),[a,i]=N.useState(""),[l,o]=N.useState(""),[c,d]=N.useState(""),[u,h]=N.useState(""),[m,y]=N.useState("US"),[b,S]=N.useState(!1),[j,p]=N.useState(""),[x,f]=N.useState(""),{signIn:g,signUp:w}=fe(),v=O=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(O)?![/^[^@]+@[^@]+\.(test|example|invalid|localhost)$/i,/^[^@]+@[^@]+\.(com\.com|org\.org)$/i,/^[^@]+@[^@]*\.(co\.uk\.com|gmail\.co)$/i,/^[^@]+@[^@]*\.(clinic\d*\.com)$/i].some(D=>D.test(O)):!1,_=O=>{const U=O.target.value;i(U),f(""),p(""),U&&!v(U)&&f("Please enter a valid email address from a real domain (e.g., gmail.com, outlook.com)")},M=async O=>{var U,E,D,R,P;if(O.preventDefault(),!v(a)){f("Please enter a valid email address from a real domain");return}S(!0),p(""),f("");try{if(n){const{error:k}=await w(a,l,{name:c,phone:u,country:m});if(k)throw k}else{const{error:k}=await g(a,l);if(k)throw k}}catch(k){console.error("Auth error:",k),k.code==="invalid_credentials"||(U=k.message)!=null&&U.includes("Invalid login credentials")?p(n?"Failed to create account. Please try a different email or contact support.":"Invalid email or password. Please check your credentials and try again. For new users, please sign up first."):(E=k.message)!=null&&E.includes("email_address_invalid")||(D=k.message)!=null&&D.includes("Email address")&&((R=k.message)!=null&&R.includes("is invalid"))||k.code==="email_address_invalid"?f("Invalid email address. Please use a real email from domains like gmail.com, outlook.com, yahoo.com, or your company domain. Avoid test domains like clinic1.com, example.com, or temporary email services."):k.code==="email_not_confirmed"||(P=k.message)!=null&&P.includes("Email not confirmed")?p("Please check your email and click the confirmation link before signing in. If you haven't received the email, please contact support."):p(k.message||"An error occurred")}finally{S(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center px-4",children:s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:s.jsx(os,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"HealthSphere CMS"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"AI-First Clinical Management System"}),e&&s.jsx("button",{onClick:e,className:"mt-4 text-blue-600 hover:text-blue-800 text-sm font-medium",children:"← Back to Home"})]}),s.jsxs("form",{onSubmit:M,className:"space-y-6",children:[n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(ie,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:c,onChange:O=>d(O.target.value),className:"pl-10 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Dr. John Smith",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(se,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"tel",value:u,onChange:O=>h(O.target.value),className:"pl-10 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+1 (555) 123-4567",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ho,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsxs("select",{value:m,onChange:O=>y(O.target.value),className:"pl-10 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"US",children:"United States"}),s.jsx("option",{value:"IN",children:"India"}),s.jsx("option",{value:"GB",children:"United Kingdom"}),s.jsx("option",{value:"CA",children:"Canada"}),s.jsx("option",{value:"AU",children:"Australia"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ls,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"email",value:a,onChange:_,className:`pl-10 w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:border-transparent ${x?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`,placeholder:"doctor@example.com",required:!0})]}),x&&s.jsx("p",{className:"mt-2 text-sm text-red-600",children:x}),s.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[s.jsx("p",{className:"font-medium",children:"Email Requirements:"}),s.jsx("p",{children:"✅ Use real domains: gmail.com, outlook.com, yahoo.com, company.com"}),s.jsx("p",{children:"❌ Avoid: clinic1.com, test.com, example.com, fake.com, temp emails"}),s.jsx("p",{children:"💡 Must be able to receive confirmation emails"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vl,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"password",value:l,onChange:O=>o(O.target.value),className:"pl-10 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),j&&s.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:j}),s.jsx("button",{type:"submit",disabled:b||!!x,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:b?"Please wait...":n?"Create Account":"Sign In"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:()=>r(!n),className:"text-blue-600 hover:text-blue-800 font-medium",children:n?"Already have an account? Sign in":"Don't have an account? Sign up"})}),!n&&!J&&s.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg text-center",children:s.jsx("p",{className:"text-xs text-gray-600",children:"Demo: Use any email/password to continue"})}),!n&&J&&s.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-blue-800 font-medium mb-2",children:"⚠️ Setup Required:"}),s.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[s.jsx("div",{children:"1. Apply database migrations in Supabase"}),s.jsx("div",{children:"2. Create users: admin@healthsphere.com / admin123"}),s.jsx("div",{children:"3. Or register new accounts using the sign up form"})]}),s.jsx("p",{className:"text-xs text-blue-600 mt-2",children:'Getting "Invalid credentials"? The database needs setup first.'})]}),!J&&s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg",children:s.jsx("p",{className:"text-xs text-gray-500",children:"Supabase not configured. Using demo mode."})}),J&&s.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-lg border border-green-200",children:s.jsxs("p",{className:"text-xs text-green-700",children:[s.jsx("strong",{children:"✅ Database Updated:"})," Email confirmation disabled via migration. For complete setup, also disable in Supabase Dashboard:",s.jsx("br",{}),s.jsx("span",{className:"font-mono text-xs",children:"Authentication → Settings → Email Confirmation → OFF"})]})})]})})})},Bg=({onShowAuth:t})=>{const e=[{icon:os,title:"AI Voice Agent",description:"Intelligent voice assistant handles patient calls, schedules appointments, and provides 24/7 support automatically.",color:"from-purple-500 to-indigo-600"},{icon:Er,title:"AI Video Creation",description:"Generate personalized patient education videos and treatment explanations using advanced AI technology.",color:"from-blue-500 to-cyan-600"},{icon:Ce,title:"Patient Management",description:"Comprehensive patient records, medical history, vitals tracking, and secure data management in one place.",color:"from-green-500 to-emerald-600"},{icon:ee,title:"Smart Appointment Reminders",description:"Automated appointment reminders via WhatsApp, SMS, and email with intelligent scheduling optimization.",color:"from-orange-500 to-red-600"}],n=["Reduce administrative workload by 70%","Improve patient satisfaction scores","24/7 AI-powered patient support","HIPAA compliant and secure","Multi-clinic management","Real-time analytics and insights"],r=[{name:"Dr. Sarah Johnson",role:"Family Medicine",content:"HealthSphere has transformed my practice. The AI voice agent handles routine calls perfectly, and my staff can focus on patient care.",rating:5},{name:"Dr. Michael Chen",role:"Internal Medicine",content:"The patient management system is intuitive and the AI video creation feature helps me explain complex conditions easily.",rating:5},{name:"Dr. Emily Rodriguez",role:"Pediatrics",content:"Appointment reminders have reduced no-shows by 60%. The system pays for itself with improved efficiency.",rating:5}];return s.jsxs("div",{className:"min-h-screen bg-white",children:[s.jsx("header",{className:"bg-white border-b border-gray-100 sticky top-0 z-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx(os,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"HealthSphere"}),s.jsx("p",{className:"text-xs text-gray-500",children:"AI-First CMS"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>t("signup"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Get Started"}),s.jsx("button",{onClick:()=>t("signin"),className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Sign In"})]})]})})}),s.jsx("section",{className:"relative bg-gradient-to-br from-blue-50 via-white to-indigo-50 py-20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium mb-8",children:[s.jsx(xm,{className:"w-4 h-4 mr-2"}),"AI-Powered Clinical Management"]}),s.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6",children:["Transform Your",s.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:" Medical Practice"})]}),s.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"The first AI-powered clinical management system that handles patient calls, creates educational videos, manages appointments, and streamlines your entire practice workflow."}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:[s.jsxs("button",{onClick:()=>t("signup"),className:"bg-blue-600 text-white px-8 py-4 rounded-lg hover:bg-blue-700 transition-colors font-medium text-lg flex items-center space-x-2",children:[s.jsx("span",{children:"Start Free Trial"}),s.jsx(jg,{className:"w-5 h-5"})]}),s.jsxs("button",{className:"border border-gray-300 text-gray-700 px-8 py-4 rounded-lg hover:bg-gray-50 transition-colors font-medium text-lg flex items-center space-x-2",children:[s.jsx(mm,{className:"w-5 h-5"}),s.jsx("span",{children:"Watch Demo"})]})]}),s.jsxs("div",{className:"mt-12 flex items-center justify-center space-x-8 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_e,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{children:"No setup fees"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_e,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{children:"14-day free trial"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_e,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{children:"Cancel anytime"})]})]})]})})}),s.jsx("section",{className:"py-20 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Powerful Features for Modern Healthcare"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Everything you need to run an efficient, patient-focused medical practice with cutting-edge AI technology."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:e.map((a,i)=>{const l=a.icon;return s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-8 hover:shadow-xl transition-shadow",children:[s.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${a.color} rounded-2xl flex items-center justify-center mb-6`,children:s.jsx(l,{className:"w-8 h-8 text-white"})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:a.title}),s.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:a.description})]},i)})})]})}),s.jsx("section",{className:"py-20 bg-gray-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Why Choose HealthSphere?"}),s.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Join thousands of healthcare providers who have revolutionized their practice with our AI-first approach."}),s.jsx("div",{className:"space-y-4",children:n.map((a,i)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(_e,{className:"w-6 h-6 text-green-500 flex-shrink-0"}),s.jsx("span",{className:"text-lg text-gray-700",children:a})]},i))}),s.jsx("button",{onClick:()=>t("signup"),className:"mt-8 bg-blue-600 text-white px-8 py-4 rounded-lg hover:bg-blue-700 transition-colors font-medium text-lg",children:"Get Started Today"})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ct,{className:"w-10 h-10 text-white"})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"HIPAA Compliant"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Enterprise-grade security for your patient data"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"99.9%"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Uptime"})]}),s.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:"256-bit"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Encryption"})]}),s.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"24/7"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Support"})]}),s.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"SOC 2"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Certified"})]})]})]})]})})}),s.jsx("section",{className:"py-20 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Trusted by Healthcare Professionals"}),s.jsx("p",{className:"text-xl text-gray-600",children:"See what doctors are saying about HealthSphere"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:r.map((a,i)=>s.jsxs("div",{className:"bg-gray-50 rounded-2xl p-8",children:[s.jsx("div",{className:"flex items-center mb-4",children:[...Array(a.rating)].map((l,o)=>s.jsx(Lg,{className:"w-5 h-5 text-yellow-400 fill-current"},o))}),s.jsxs("p",{className:"text-gray-700 mb-6 italic",children:['"',a.content,'"']}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:a.name}),s.jsx("div",{className:"text-gray-600 text-sm",children:a.role})]})]},i))})]})}),s.jsx("section",{className:"py-20 bg-gradient-to-r from-blue-600 to-indigo-600",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[s.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Ready to Transform Your Practice?"}),s.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Join thousands of healthcare providers using HealthSphere to deliver better patient care with AI."}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:[s.jsx("button",{onClick:()=>t("signup"),className:"bg-white text-blue-600 px-8 py-4 rounded-lg hover:bg-gray-50 transition-colors font-medium text-lg",children:"Start Your Free Trial"}),s.jsx("button",{className:"border border-white text-white px-8 py-4 rounded-lg hover:bg-white hover:text-blue-600 transition-colors font-medium text-lg",children:"Schedule Demo"})]}),s.jsx("p",{className:"text-blue-100 text-sm mt-6",children:"No credit card required • 14-day free trial • Setup in minutes"})]})}),s.jsx("footer",{className:"bg-gray-900 text-white py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx(os,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:"HealthSphere"}),s.jsx("p",{className:"text-xs text-gray-400",children:"AI-First CMS"})]})]}),s.jsx("p",{className:"text-gray-400",children:"The future of clinical management is here. Powered by AI, designed for healthcare."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-4",children:"Product"}),s.jsxs("ul",{className:"space-y-2 text-gray-400",children:[s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Security"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Integrations"})})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-4",children:"Support"}),s.jsxs("ul",{className:"space-y-2 text-gray-400",children:[s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Help Center"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact Us"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Status"})})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-4",children:"Company"}),s.jsxs("ul",{className:"space-y-2 text-gray-400",children:[s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Careers"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})]})]})]}),s.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:s.jsx("p",{children:"© 2025 HealthSphere. All rights reserved."})})]})})]})},Vg=({activeTab:t,setActiveTab:e,isOpen:n,onClose:r})=>{const{isAdmin:a}=fe(),i=[{id:"dashboard",label:"Dashboard",icon:Cg},{id:"clinics",label:"Clinics",icon:ge},{id:"patients",label:"Patients",icon:Ce},{id:"appointments",label:"Appointments",icon:ee},{id:"prescriptions",label:"Prescriptions",icon:pe},{id:"communication",label:"Communication",icon:ct},...a?[{id:"analytics",label:"Analytics",icon:Ra},{id:"database-status",label:"Database Status",icon:Nt},{id:"compliance",label:"Compliance",icon:Ct},{id:"settings",label:"Settings",icon:Ko}]:[],{id:"billing",label:"Billing",icon:_g}];return s.jsxs(s.Fragment,{children:[n&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:r}),s.jsxs("div",{className:`
        fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 h-screen overflow-y-auto transform transition-transform duration-300 ease-in-out
        ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx(os,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"HealthSphere"}),s.jsx("p",{className:"text-xs text-gray-500",children:"AI-First CMS"})]})]})}),s.jsx("nav",{className:"mt-6",children:s.jsx("ul",{className:"space-y-1 px-3",children:i.map(l=>{const o=l.icon;return s.jsx("li",{children:s.jsxs("button",{onClick:()=>{e(l.id),r()},className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors ${t===l.id?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx(o,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:l.label})]})},l.id)})})})]})]})},Hg=({sidebarOpen:t,setSidebarOpen:e})=>{const{doctor:n,admin:r,isAdmin:a,signOut:i}=fe(),[l,o]=N.useState(!1),c=async()=>{try{console.log("Attempting to sign out..."),await i(),console.log("Sign out successful")}catch(h){console.error("Sign out error:",h)}},d=a?"Super Admin":"Doctor",u=()=>a&&r?r.name:n?n.email==="rghatwai@gmail.com"?"Dr. Rahul Ghatwai":n.name||"Doctor":"User";return s.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:s.jsxs("div",{className:"px-6 py-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsx("button",{onClick:()=>e(!t),className:"lg:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-xl transition-all duration-200",children:t?s.jsx(Et,{className:"w-6 h-6"}):s.jsx(Tg,{className:"w-6 h-6"})}),s.jsxs("div",{className:"relative hidden md:block",children:[s.jsx(Ye,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search patients, appointments...",className:"pl-10 pr-4 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64 lg:w-80 bg-gray-50 hover:bg-white transition-colors"})]}),s.jsx("button",{onClick:()=>o(!l),className:"md:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-xl transition-all duration-200",children:s.jsx(Ye,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"hidden sm:flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1.5 bg-gradient-to-r from-green-50 to-emerald-50 rounded-full border border-green-200",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs font-semibold text-green-800",children:"AI Active"})]}),s.jsx("div",{className:`px-3 py-1.5 rounded-full text-xs font-semibold ${a?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:a?"Super Admin":"Pro Plan"}),!a&&s.jsx("div",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded-full",children:"120/500 AI mins"})]}),s.jsxs("button",{className:"relative p-2.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-xl transition-all duration-200",children:[s.jsx(wg,{className:"w-5 h-5"}),s.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"flex items-center space-x-3 pl-4 border-l border-gray-200",children:[s.jsxs("div",{className:"text-right hidden lg:block",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:u()}),s.jsx("p",{className:"text-xs text-gray-500",children:d})]}),s.jsx("div",{className:`w-10 h-10 ${a?"bg-red-100":"bg-blue-100"} rounded-xl flex items-center justify-center shadow-sm`,children:s.jsx(ie,{className:`w-5 h-5 ${a?"text-red-600":"text-blue-600"}`})}),s.jsx("button",{onClick:c,className:"p-2.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all duration-200",title:"Sign Out",children:s.jsx(Eg,{className:"w-5 h-5"})})]})]})]}),l&&s.jsx("div",{className:"mt-4 md:hidden",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search patients, appointments...",className:"pl-10 pr-4 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full bg-gray-50 hover:bg-white transition-colors",autoFocus:!0})]})})]})})},pm=N.createContext(void 0),Fe=()=>{const t=N.useContext(pm);if(t===void 0)throw new Error("useClinicContext must be used within a ClinicProvider");return t},Wg=({children:t})=>{const[e,n]=N.useState("all"),[r,a]=N.useState([]),[i,l]=N.useState(!0),{doctor:o,isAdmin:c}=fe(),d=async()=>{if(c||!o){l(!1);return}try{if(!J){const b=[{id:"1",doctor_id:o.id,name:"Main Medical Center",address:"123 Health St",city:"New York",state:"NY",country:"US",phone:"+1 (555) 123-4567",hours_json:{monday:{open:"09:00",close:"17:00"},tuesday:{open:"09:00",close:"17:00"},wednesday:{open:"09:00",close:"17:00"},thursday:{open:"09:00",close:"17:00"},friday:{open:"09:00",close:"17:00"},saturday:{open:"09:00",close:"13:00"},sunday:{open:"closed",close:"closed"}},created_at:"2024-01-15T10:00:00Z"},{id:"2",doctor_id:o.id,name:"Downtown Clinic",address:"456 Medical Ave",city:"New York",state:"NY",country:"US",phone:"+1 (555) 987-6543",hours_json:{monday:{open:"08:00",close:"18:00"},tuesday:{open:"08:00",close:"18:00"},wednesday:{open:"08:00",close:"18:00"},thursday:{open:"08:00",close:"18:00"},friday:{open:"08:00",close:"16:00"},saturday:{open:"closed",close:"closed"},sunday:{open:"closed",close:"closed"}},created_at:"2024-02-01T10:00:00Z"}];a(b),l(!1);return}const{data:m,error:y}=await B.from("clinics").select("*").eq("doctor_id",o.id).order("created_at",{ascending:!1});if(y)throw y;a(m||[])}catch(m){console.error("Error fetching clinics:",m),a([])}finally{l(!1)}},u=async()=>{l(!0),await d()};N.useEffect(()=>{d()},[o,c]);const h={selectedClinic:e,setSelectedClinic:n,clinics:r,loading:i,refreshClinics:u};return s.jsx(pm.Provider,{value:h,children:t})},Kg=()=>{const{selectedClinic:t,clinics:e}=Fe(),{doctor:n}=fe(),[r,a]=N.useState({appointments:"0",patients:"0",prescriptions:"0",messages:"0"}),[i,l]=N.useState(!0);N.useEffect(()=>{n&&o()},[n,t]);const o=async()=>{if(n)try{if(!J){const w=c();a(w),l(!1);return}const m=new Date().toISOString().split("T")[0];let y=B.from("appointments").select("*",{count:"exact",head:!0}).eq("doctor_id",n.id).gte("start_ts",`${m}T00:00:00`).lt("start_ts",`${m}T23:59:59`),b=B.from("patients").select("*",{count:"exact",head:!0}).eq("doctor_id",n.id),S=B.from("prescriptions").select("*",{count:"exact",head:!0}).eq("doctor_id",n.id).gte("created_at",`${m}T00:00:00`),j=B.from("messages").select("*",{count:"exact",head:!0}).eq("doctor_id",n.id).gte("created_at",`${m}T00:00:00`);t&&t!=="all"&&(y=y.eq("clinic_id",t),b=b.eq("clinic_id",t),S=S.eq("clinic_id",t));const[p,x,f,g]=await Promise.all([y,b,S,j]);a({appointments:(p.count||0).toString(),patients:(x.count||0).toString(),prescriptions:(f.count||0).toString(),messages:(g.count||0).toString()})}catch(m){console.error("Error fetching real stats:",m);const y=c();a(y)}finally{l(!1)}},c=()=>{var y;if(!t||t==="all")return{appointments:"12",patients:"1,247",prescriptions:"86",messages:"432"};const m=(y=e.find(b=>b.id===t))==null?void 0:y.name;return m==="Main Medical Center"?{appointments:"8",patients:"847",prescriptions:"56",messages:"298"}:m==="Downtown Clinic"?{appointments:"4",patients:"400",prescriptions:"30",messages:"134"}:{appointments:"2",patients:"150",prescriptions:"12",messages:"45"}},d=r,u=[{title:"Today's Appointments",value:d.appointments,change:"+2 from yesterday",icon:ee,color:"blue"},{title:"Active Patients",value:d.patients,change:"+18 this month",icon:Ce,color:"green"},{title:"Prescriptions Sent",value:d.prescriptions,change:"+12% this week",icon:pe,color:"purple"},{title:"Messages Delivered",value:d.messages,change:"98.5% success rate",icon:ct,color:"orange"}],h=m=>{const y={blue:"bg-blue-500 text-blue-600 bg-blue-50",green:"bg-green-500 text-green-600 bg-green-50",purple:"bg-purple-500 text-purple-600 bg-purple-50",orange:"bg-orange-500 text-orange-600 bg-orange-50"};return y[m]||y.blue};return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i&&s.jsxs("div",{className:"col-span-full text-center py-4",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Loading statistics..."})]}),u.map((m,y)=>{const b=h(m.color).split(" "),S=m.icon;return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:`p-3 rounded-lg ${b[2]}`,children:s.jsx(S,{className:`w-6 h-6 ${b[1]}`})}),s.jsxs("div",{className:"flex items-center text-green-600",children:[s.jsx(Go,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"text-sm font-medium",children:"+5.2%"})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:m.value}),s.jsx("p",{className:"text-sm font-medium text-gray-600",children:m.title}),s.jsx("p",{className:"text-xs text-gray-500",children:m.change})]})]},y)})]})},gm=({isOpen:t,onClose:e,onAppointmentCreated:n})=>{const{doctor:r}=fe(),{selectedClinic:a,clinics:i}=Fe(),[l,o]=N.useState(!1),[c,d]=N.useState(""),[u,h]=N.useState(""),[m,y]=N.useState([]),[b,S]=N.useState([]),[j,p]=N.useState(""),[x,f]=N.useState(!1),[g,w]=N.useState([]),[v,_]=N.useState({patientId:"",clinicId:a!=="all"&&a||"",date:"",startTime:"",endTime:"",channel:"manual",notes:""});N.useEffect(()=>{t&&r&&(M(),O())},[t,r]),N.useEffect(()=>{const A=m.filter(z=>`${z.first_name} ${z.last_name}`.toLowerCase().includes(j.toLowerCase())||z.phone.includes(j)||z.email.toLowerCase().includes(j.toLowerCase()));S(A)},[m,j]);const M=async()=>{if(r)try{if(!J){const I=[{id:"1",doctor_id:r.id,clinic_id:"1",first_name:"John",last_name:"Smith",dob:"1985-06-15",sex:"male",phone:"+1 (555) 123-4567",email:"john.smith@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["diabetes","hypertension"],created_at:"2024-01-15T10:00:00Z"},{id:"2",doctor_id:r.id,clinic_id:"1",first_name:"Sarah",last_name:"Johnson",dob:"1990-03-22",sex:"female",phone:"+1 (555) 987-6543",email:"sarah.johnson@email.com",consent_flags_json:{messaging:!0,marketing:!0,voice_calls:!0},tags:["allergies"],created_at:"2024-01-20T14:30:00Z"},{id:"3",doctor_id:r.id,clinic_id:"2",first_name:"Michael",last_name:"Davis",dob:"1978-11-10",sex:"male",phone:"+1 (555) 456-7890",email:"michael.davis@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["cardiac"],created_at:"2024-02-01T09:15:00Z"},{id:"4",doctor_id:r.id,clinic_id:"1",first_name:"Emma",last_name:"Wilson",dob:"1992-07-25",sex:"female",phone:"+1 (555) 789-0123",email:"emma.wilson@email.com",consent_flags_json:{messaging:!0,marketing:!0,voice_calls:!1},tags:["dermatology"],created_at:"2024-02-05T16:45:00Z"},{id:"5",doctor_id:r.id,clinic_id:"1",first_name:"Robert",last_name:"Chen",dob:"1975-09-18",sex:"male",phone:"+1 (555) 321-0987",email:"robert.chen@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["orthopedic"],created_at:"2024-02-10T11:20:00Z"}];y(I),S(I);return}const{data:A,error:z}=await B.from("patients").select("*").eq("doctor_id",r.id).order("first_name",{ascending:!0});if(z)throw z;y(A||[]),S(A||[])}catch(A){console.error("Error fetching patients:",A),y([]),S([])}},O=async()=>{if(r)try{if(!J){w([{id:"1",start_ts:new Date(Date.now()+2*60*60*1e3).toISOString(),end_ts:new Date(Date.now()+2.5*60*60*1e3).toISOString(),clinic_id:"1"}]);return}const{data:A,error:z}=await B.from("appointments").select("id, start_ts, end_ts, clinic_id").eq("doctor_id",r.id).eq("status","booked");if(z)throw z;w(A||[])}catch(A){console.error("Error fetching existing appointments:",A),w([])}},U=A=>{_(z=>({...z,patientId:A.id})),p(`${A.first_name} ${A.last_name}`),f(!1)},E=A=>{if(!A)return"";const[z,I]=A.split(":").map(Number);let C=z,$=I+30;return $>=60&&(C+=Math.floor($/60),$=$%60),C>=24&&(C=23,$=59),`${C.toString().padStart(2,"0")}:${$.toString().padStart(2,"0")}`},D=A=>{_(z=>({...z,startTime:A,endTime:E(A)}))},R=async A=>{A.preventDefault(),o(!0),d(""),h("");try{if(!r)throw new Error("Doctor information not available");if(!v.patientId)throw new Error("Please select a patient");if(!v.clinicId)throw new Error("Please select a clinic");const z=new Date(`${v.date}T${v.startTime}`).toISOString(),I=new Date(`${v.date}T${v.endTime}`).toISOString(),C={doctor_id:r.id,clinic_id:v.clinicId,patient_id:v.patientId,start_ts:z,end_ts:I,status:"booked",channel:v.channel,notes:v.notes||null};if(!J){const q=m.find(L=>L.id===v.patientId),T=i.find(L=>L.id===v.clinicId);h(`Demo: Appointment scheduled for ${q==null?void 0:q.first_name} ${q==null?void 0:q.last_name} at ${T==null?void 0:T.name} on ${v.date} at ${v.startTime}!`),setTimeout(()=>{n(),P()},2e3);return}const{error:$}=await B.from("appointments").insert([C]);if($)throw $;h("Appointment scheduled successfully!"),n(),setTimeout(()=>{P()},2e3)}catch(z){console.error("Error creating appointment:",z),d(z.message||"Failed to create appointment")}finally{o(!1)}},P=()=>{_({patientId:"",clinicId:a!=="all"&&a||"",date:"",startTime:"",endTime:"",channel:"manual",notes:""}),p(""),f(!1),d(""),h(""),e()};if(!t)return null;const k=m.find(A=>A.id===v.patientId);return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:s.jsx(ee,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Schedule Appointment"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Create a new appointment for a patient"})]})]}),s.jsx("button",{onClick:P,className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:s.jsx(Et,{className:"w-5 h-5 text-gray-400"})})]})}),s.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Patient *"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ie,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:j,onChange:A=>{p(A.target.value),f(!0),A.target.value||_(z=>({...z,patientId:""}))},onFocus:()=>f(!0),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",placeholder:"Search patients by name, phone, or email...",required:!0}),s.jsx(Ye,{className:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 transform -translate-y-1/2"})]}),x&&b.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg max-h-60 overflow-y-auto",children:b.map(A=>s.jsx("button",{type:"button",onClick:()=>U(A),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 focus:outline-none focus:bg-blue-50",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(ie,{className:"w-4 h-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900",children:[A.first_name," ",A.last_name]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[A.phone," • ",A.email]})]})]})},A.id))})]}),k&&s.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(ie,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-blue-900",children:[k.first_name," ",k.last_name]}),s.jsxs("p",{className:"text-sm text-blue-700",children:[k.phone," • ",k.email]})]})]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Clinic *"}),s.jsxs("div",{className:"relative",children:[s.jsx(ge,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsxs("select",{value:v.clinicId,onChange:A=>_({...v,clinicId:A.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors appearance-none",required:!0,children:[s.jsx("option",{value:"",children:"Select a clinic"}),i.map(A=>s.jsx("option",{value:A.id,children:A.name},A.id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date *"}),s.jsxs("div",{className:"relative",children:[s.jsx(ee,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"date",value:v.date,onChange:A=>_({...v,date:A.target.value}),min:new Date().toISOString().split("T")[0],className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Start Time *"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"time",value:v.startTime,onChange:A=>D(A.target.value),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"End Time *"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"time",value:v.endTime,onChange:A=>_({...v,endTime:A.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",required:!0})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Appointment Type *"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("button",{type:"button",onClick:()=>_({...v,channel:"voice"}),className:`p-4 rounded-xl border-2 transition-all duration-200 ${v.channel==="voice"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(se,{className:"w-6 h-6 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium",children:"Phone Call"})]}),s.jsxs("button",{type:"button",onClick:()=>_({...v,channel:"web"}),className:`p-4 rounded-xl border-2 transition-all duration-200 ${v.channel==="web"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(Er,{className:"w-6 h-6 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium",children:"Video Call"})]}),s.jsxs("button",{type:"button",onClick:()=>_({...v,channel:"manual"}),className:`p-4 rounded-xl border-2 transition-all duration-200 ${v.channel==="manual"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(gs,{className:"w-6 h-6 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium",children:"In-Person"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:v.notes,onChange:A=>_({...v,notes:A.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors resize-none",placeholder:"Add any notes about this appointment..."})]}),c&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:s.jsx("p",{className:"text-red-800 text-sm font-medium",children:c})}),u&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:s.jsx("p",{className:"text-green-800 text-sm font-medium",children:u})}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:P,className:"px-6 py-3 text-gray-700 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:l,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center space-x-2 font-medium shadow-lg",children:[s.jsx(ys,{className:"w-4 h-4"}),s.jsx("span",{children:l?"Scheduling...":"Schedule Appointment"})]})]})]})]})})},Gg=({isOpen:t,onClose:e,onPatientAdded:n,selectedClinicId:r,clinics:a})=>{const{doctor:i}=fe(),[l,o]=N.useState(!1),[c,d]=N.useState(""),[u,h]=N.useState(""),[m,y]=N.useState({firstName:"",lastName:"",mobileNumber:"",clinicId:r||(a.length>0?a[0].id:"")});ca.useEffect(()=>{r&&y(j=>({...j,clinicId:r}))},[r]);const b=async j=>{var p;j.preventDefault(),o(!0),d(""),h("");try{if(!i)throw new Error("Doctor information not available");if(!m.clinicId)throw new Error("Please select a clinic");const x={doctor_id:i.id,clinic_id:m.clinicId,first_name:m.firstName,last_name:m.lastName,dob:"1990-01-01",sex:"other",phone:m.mobileNumber,email:`${m.firstName.toLowerCase()}.${m.lastName.toLowerCase()}@example.com`,consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:[]};if(!J){h(`Demo: Patient "${m.firstName} ${m.lastName}" would be added to ${(p=a.find(g=>g.id===m.clinicId))==null?void 0:p.name}!`),setTimeout(()=>{n(),S()},2e3);return}const{error:f}=await B.from("patients").insert([x]);if(f)throw f;h(`Patient "${m.firstName} ${m.lastName}" added successfully!`),n(),setTimeout(()=>{S()},2e3)}catch(x){console.error("Error adding patient:",x),d(x.message||"Failed to add patient")}finally{o(!1)}},S=()=>{y({firstName:"",lastName:"",mobileNumber:"",clinicId:r||(a.length>0?a[0].id:"")}),d(""),h(""),e()};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[s.jsx("div",{className:"p-6 border-b border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:s.jsx(ie,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Patient"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Create a new patient record"})]})]}),s.jsx("button",{onClick:S,className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:s.jsx(Et,{className:"w-5 h-5 text-gray-400"})})]})}),s.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"First Name *"}),s.jsx("input",{type:"text",value:m.firstName,onChange:j=>y({...m,firstName:j.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",placeholder:"John",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Last Name *"}),s.jsx("input",{type:"text",value:m.lastName,onChange:j=>y({...m,lastName:j.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",placeholder:"Smith",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mobile Number *"}),s.jsxs("div",{className:"relative",children:[s.jsx(se,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"tel",value:m.mobileNumber,onChange:j=>y({...m,mobileNumber:j.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",placeholder:"+1 (555) 123-4567",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Clinic *"}),s.jsxs("div",{className:"relative",children:[s.jsx(ge,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsxs("select",{value:m.clinicId,onChange:j=>y({...m,clinicId:j.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors appearance-none",required:!0,children:[s.jsx("option",{value:"",children:"Select a clinic"}),a.map(j=>s.jsx("option",{value:j.id,children:j.name},j.id))]})]})]}),c&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:s.jsx("p",{className:"text-red-800 text-sm font-medium",children:c})}),u&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:s.jsx("p",{className:"text-green-800 text-sm font-medium",children:u})}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:S,className:"px-6 py-3 text-gray-700 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:l,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center space-x-2 font-medium shadow-lg",children:[s.jsx(ys,{className:"w-4 h-4"}),s.jsx("span",{children:l?"Adding...":"Add Patient"})]})]})]})]})}):null},Jg=({setActiveTab:t})=>{const{selectedClinic:e,clinics:n}=Fe(),[r,a]=N.useState(!1),[i,l]=N.useState(!1),o=[{title:"New Patient",description:"Add a new patient to your clinic",icon:kt,color:"blue",action:()=>a(!0)},{title:"Schedule Appointment",description:"Book an appointment quickly",icon:ee,color:"green",action:()=>l(!0)},{title:"Write Prescription",description:"Create and send prescription",icon:pe,color:"purple",action:()=>t("prescriptions")},{title:"Send Message",description:"Communicate with patients",icon:ct,color:"orange",action:()=>t("communication")}],c=d=>{const u={blue:"from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",green:"from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",purple:"from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700",orange:"from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700"};return u[d]||u.blue};return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(xm,{className:"w-4 h-4 mr-1 text-yellow-500"}),s.jsx("span",{children:"AI Powered"})]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:o.map((d,u)=>{const h=d.icon,m=c(d.color);return s.jsx("button",{onClick:d.action,className:`p-4 rounded-lg bg-gradient-to-r ${m} text-white text-left transition-all duration-200 transform hover:scale-105 hover:shadow-lg`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"p-2 bg-white bg-opacity-20 rounded-lg",children:s.jsx(h,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:d.title}),s.jsx("p",{className:"text-sm opacity-90 mt-1",children:d.description})]})]})},u)})}),s.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-indigo-50 to-blue-50 rounded-lg border border-blue-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:s.jsx(se,{className:"w-5 h-5 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-indigo-900",children:"AI Voice Agent Status"}),s.jsx("p",{className:"text-sm text-indigo-700",children:"Active - Handling calls and scheduling appointments"})]}),s.jsx("div",{className:"ml-auto",children:s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"})})]})}),s.jsx(Gg,{isOpen:r,onClose:()=>a(!1),onPatientAdded:()=>{a(!1)},selectedClinicId:e!=="all"?e:null,clinics:n}),s.jsx(gm,{isOpen:i,onClose:()=>l(!1),onAppointmentCreated:()=>{l(!1)}})]})},Yg=()=>{const{doctor:t}=fe(),[e,n]=N.useState([]),[r,a]=N.useState(!0);N.useEffect(()=>{t&&i()},[t]);const i=async()=>{if(t)try{if(!J){n(o()),a(!1);return}const[u,h,m]=await Promise.all([B.from("appointments").select(`
            id,
            created_at,
            status,
            channel,
            patients:patient_id (first_name, last_name)
          `).eq("doctor_id",t.id).order("created_at",{ascending:!1}).limit(3),B.from("prescriptions").select(`
            id,
            created_at,
            patients:patient_id (first_name, last_name)
          `).eq("doctor_id",t.id).order("created_at",{ascending:!1}).limit(2),B.from("messages").select(`
            id,
            created_at,
            status,
            channel,
            patients:patient_id (first_name, last_name)
          `).eq("doctor_id",t.id).order("created_at",{ascending:!1}).limit(2)]),y=[];(u.data||[]).forEach(b=>{var S,j;y.push({id:`apt-${b.id}`,type:"appointment",title:b.status==="booked"?"Appointment scheduled":"Appointment updated",description:`${(S=b.patients)==null?void 0:S.first_name} ${(j=b.patients)==null?void 0:j.last_name} - ${b.channel==="voice"?"Phone Call":b.channel==="web"?"Video Call":"In-Person"}`,time:l(b.created_at),icon:ee,color:"blue",status:b.status})}),(h.data||[]).forEach(b=>{var S,j;y.push({id:`rx-${b.id}`,type:"prescription",title:"Prescription sent",description:`${(S=b.patients)==null?void 0:S.first_name} ${(j=b.patients)==null?void 0:j.last_name} - Delivered successfully`,time:l(b.created_at),icon:pe,color:"green",status:"delivered"})}),(m.data||[]).forEach(b=>{var S,j;y.push({id:`msg-${b.id}`,type:"message",title:"Message sent",description:`${(S=b.patients)==null?void 0:S.first_name} ${(j=b.patients)==null?void 0:j.last_name} - ${b.channel.toUpperCase()}`,time:l(b.created_at),icon:ct,color:"purple",status:b.status})}),y.sort((b,S)=>new Date(S.created_at||0).getTime()-new Date(b.created_at||0).getTime()),n(y.slice(0,5))}catch(u){console.error("Error fetching recent activity:",u),n(o())}finally{a(!1)}},l=u=>{const h=new Date,m=new Date(u),y=Math.floor((h.getTime()-m.getTime())/(1e3*60));return y<1?"Just now":y<60?`${y} minutes ago`:y<1440?`${Math.floor(y/60)} hours ago`:`${Math.floor(y/1440)} days ago`},o=()=>[{id:1,type:"appointment",title:"Appointment scheduled",description:"John Smith - Tomorrow 10:00 AM via AI Voice Agent",time:"5 minutes ago",icon:ee,color:"blue",status:"confirmed"},{id:2,type:"prescription",title:"Prescription sent",description:"Sarah Johnson - Delivered via WhatsApp",time:"15 minutes ago",icon:pe,color:"green",status:"delivered"},{id:3,type:"message",title:"Follow-up message sent",description:"Mike Davis - Post-consultation care instructions",time:"32 minutes ago",icon:ct,color:"purple",status:"read"},{id:4,type:"call",title:"AI call handled",description:"Emma Wilson - Appointment rescheduled successfully",time:"1 hour ago",icon:se,color:"orange",status:"completed"},{id:5,type:"appointment",title:"Appointment completed",description:"Robert Chen - Follow-up scheduled automatically",time:"2 hours ago",icon:_e,color:"green",status:"completed"}],c=u=>{const h={blue:"bg-blue-50 text-blue-600 border-blue-200",green:"bg-green-50 text-green-600 border-green-200",purple:"bg-purple-50 text-purple-600 border-purple-200",orange:"bg-orange-50 text-orange-600 border-orange-200"};return h[u]||h.blue},d=u=>{const h={confirmed:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",read:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800"};return h[u]||h.confirmed};return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),r&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Loading..."})]}),s.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All"})]}),r?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-gray-600",children:"Loading activity..."})]}):e.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-600",children:"No recent activity found"})}):s.jsx("div",{className:"space-y-4",children:e.map(u=>{const h=u.icon,m=c(u.color),y=d(u.status);return s.jsxs("div",{className:"flex items-start space-x-4 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[s.jsx("div",{className:`p-2 rounded-lg border ${m}`,children:s.jsx(h,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.title}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${y}`,children:u.status})})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u.description}),s.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-500",children:[s.jsx($e,{className:"w-3 h-3 mr-1"}),u.time]})]})]},u.id)})}),s.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:"Load More Activities"})})})]})},Qg=()=>{var y;const{selectedClinic:t,clinics:e}=Fe(),{doctor:n}=fe(),[r,a]=N.useState([]),[i,l]=N.useState(!0);N.useEffect(()=>{n&&c()},[n,t]);const o=async b=>{try{if(!J){a(j=>j.map(p=>p.id===b?{...p,status:"complete"}:p.filter(x=>x.id!==b))),alert("Demo: Appointment marked as complete!");return}const{error:S}=await B.from("appointments").update({status:"complete",notes:`Completed on ${new Date().toLocaleString()}`}).eq("id",b);if(S)throw S;a(j=>j.filter(p=>p.id!==b)),alert("Appointment marked as complete successfully!")}catch(S){console.error("Error completing appointment:",S),alert("Failed to mark appointment as complete")}},c=async()=>{if(n)try{if(!J){const f=d(),g=t&&t!=="all"?f.filter(w=>w.clinic_id===t):f;a(g),l(!1);return}const b=new Date().toISOString();let S=B.from("appointments").select(`
          *,
          patients:patient_id (
            first_name,
            last_name
          ),
          clinics:clinic_id (
            name
          )
        `).eq("doctor_id",n.id).eq("status","booked").gte("start_ts",b).order("start_ts",{ascending:!0}).limit(5);t&&t!=="all"&&(S=S.eq("clinic_id",t));const{data:j,error:p}=await S;if(p)throw p;const x=(j||[]).map(f=>{var g;return{...f,patient_name:f.patients?`${f.patients.first_name} ${f.patients.last_name}`:"Unknown Patient",clinic_name:((g=f.clinics)==null?void 0:g.name)||"Unknown Clinic"}});a(x)}catch(b){console.error("Error fetching upcoming appointments:",b);const S=d(),j=t&&t!=="all"?S.filter(p=>p.clinic_id===t):S;a(j)}finally{l(!1)}},d=()=>[{id:"1",doctor_id:"1",clinic_id:"1",patient_id:"1",start_ts:new Date(Date.now()+2*60*60*1e3).toISOString(),end_ts:new Date(Date.now()+2.5*60*60*1e3).toISOString(),status:"booked",channel:"voice",notes:"Follow-up consultation",patient_name:"John Smith",clinic_name:"Main Medical Center"},{id:"2",doctor_id:"1",clinic_id:"1",patient_id:"2",start_ts:new Date(Date.now()+4*60*60*1e3).toISOString(),end_ts:new Date(Date.now()+4.5*60*60*1e3).toISOString(),status:"booked",channel:"web",notes:"Regular checkup",patient_name:"Sarah Johnson",clinic_name:"Main Medical Center"},{id:"3",doctor_id:"1",clinic_id:"2",patient_id:"3",start_ts:new Date(Date.now()+6*60*60*1e3).toISOString(),end_ts:new Date(Date.now()+6.5*60*60*1e3).toISOString(),status:"booked",channel:"manual",notes:"New patient consultation",patient_name:"Mike Davis",clinic_name:"Downtown Clinic"},{id:"4",doctor_id:"1",clinic_id:"1",patient_id:"4",start_ts:new Date(Date.now()+8*60*60*1e3).toISOString(),end_ts:new Date(Date.now()+8.5*60*60*1e3).toISOString(),status:"booked",channel:"voice",notes:"Follow-up appointment",patient_name:"Emma Wilson",clinic_name:"Main Medical Center"},{id:"5",doctor_id:"1",clinic_id:"2",patient_id:"5",start_ts:new Date(Date.now()+10*60*60*1e3).toISOString(),end_ts:new Date(Date.now()+10.5*60*60*1e3).toISOString(),status:"booked",channel:"web",notes:"Consultation",patient_name:"Robert Johnson",clinic_name:"Downtown Clinic"}],u=b=>{switch(b){case"voice":return s.jsx(se,{className:"w-4 h-4"});case"web":return s.jsx(Er,{className:"w-4 h-4"});default:return s.jsx(ee,{className:"w-4 h-4"})}},h=b=>{switch(b){case"voice":return"bg-green-100 text-green-800";case"web":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},m=b=>new Date(b).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Appointments"}),i&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Loading..."})]}),t&&s.jsxs("div",{className:"text-sm text-blue-600 font-medium",children:[(y=e.find(b=>b.id===t))==null?void 0:y.name," (",r.length,")"]}),!t&&s.jsxs("div",{className:"text-sm text-gray-600",children:["All Clinics (",r.length,")"]}),s.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View Schedule"})]}),i?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-gray-600",children:"Loading appointments..."})]}):s.jsx("div",{className:"space-y-4",children:r.map(b=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(ie,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:b.patient_name}),s.jsx("p",{className:"text-sm text-gray-600",children:b.notes})]})]}),s.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${h(b.channel)}`,children:[u(b.channel),s.jsx("span",{className:"capitalize",children:b.channel})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx($e,{className:"w-4 h-4"}),s.jsxs("span",{children:[m(b.start_ts)," - ",m(b.end_ts)]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(gs,{className:"w-4 h-4"}),s.jsx("span",{children:b.clinic_name})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{className:"px-3 py-1 text-xs bg-green-100 text-green-800 rounded-full hover:bg-green-200 transition-colors",children:["onClick=",()=>o(b.id),"Start"]}),s.jsx("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-800 rounded-full hover:bg-gray-200 transition-colors",children:"Reschedule"})]})]})]},b.id))}),s.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:s.jsx("div",{className:"text-center",children:s.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View Full Calendar"})})})]})},Zg=()=>{const t=[{type:"scheduling",title:"Peak Booking Hours",description:"Most appointments are scheduled between 10-11 AM. Consider adjusting AI agent availability.",icon:ee,color:"blue",action:"Optimize Schedule"},{type:"communication",title:"Message Response Rate",description:"95% of patients respond to WhatsApp messages within 2 hours.",icon:ct,color:"green",action:"View Analytics"},{type:"patients",title:"Follow-up Reminders",description:"12 patients need follow-up appointments this week.",icon:Ce,color:"orange",action:"Send Reminders"},{type:"ai-usage",title:"AI Voice Agent Performance",description:"89% successful call resolution rate. 23 calls handled today.",icon:Sd,color:"purple",action:"View Details"}],e=n=>{const r={blue:"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100",green:"bg-green-50 text-green-600 border-green-200 hover:bg-green-100",orange:"bg-orange-50 text-orange-600 border-orange-200 hover:bg-orange-100",purple:"bg-purple-50 text-purple-600 border-purple-200 hover:bg-purple-100"};return r[n]||r.blue};return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Sd,{className:"w-5 h-5 text-purple-600"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"AI Insights"})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),s.jsx("span",{children:"Real-time"})]})]}),s.jsx("div",{className:"space-y-4",children:t.map((n,r)=>{const a=n.icon,i=e(n.color);return s.jsx("div",{className:`border rounded-lg p-4 transition-colors ${i.includes("border-")?i:`border-gray-200 hover:${i.split(" ")[0]}`}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${i.split(" ")[0]} ${i.split(" ")[1]}`,children:s.jsx(a,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:n.title}),s.jsx("button",{className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:n.action})]}),s.jsx("p",{className:"text-sm text-gray-600",children:n.description})]})]})},r)})}),s.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-orange-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(bn,{className:"w-5 h-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-orange-900",children:"Recommendation"}),s.jsx("p",{className:"text-sm text-orange-700 mt-1",children:"Consider enabling automated follow-up reminders for better patient engagement."})]}),s.jsx("button",{className:"ml-auto px-3 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full hover:bg-orange-200 transition-colors",children:"Enable Now"})]})})]})},Xg=({isOpen:t,onClose:e,onDoctorAdded:n})=>{const[r,a]=N.useState({name:"",email:"",phone:"",country:"US",timezone:"UTC",subscription_plan:"starter",generatePassword:!0,customPassword:""}),[i,l]=N.useState(!1),[o,c]=N.useState(""),[d,u]=N.useState(""),[h,m]=N.useState(!1),[y,b]=N.useState(null),S=[{code:"US",name:"United States"},{code:"CA",name:"Canada"},{code:"GB",name:"United Kingdom"},{code:"AU",name:"Australia"},{code:"IN",name:"India"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"JP",name:"Japan"}],j=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Toronto","Europe/London","Europe/Paris","Europe/Berlin","Asia/Tokyo","Asia/Kolkata","Australia/Sydney"],p=()=>{const g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let w="";for(let v=0;v<12;v++)w+=g.charAt(Math.floor(Math.random()*g.length));return w},x=async g=>{g.preventDefault(),l(!0),c(""),u("");try{const w=r.generatePassword?p():r.customPassword;if(!J){b({email:r.email,password:w}),u(`Demo: Doctor ${r.name} would be created with email: ${r.email}`),l(!1);return}const{data:v,error:_}=await B.auth.admin.createUser({email:r.email,password:w,email_confirm:!0,user_metadata:{name:r.name,role:"doctor"}});if(_)throw new Error(`Failed to create user account: ${_.message}`);if(!v.user)throw new Error("User creation failed - no user data returned");const M={id:v.user.id,email:r.email,name:r.name,phone:r.phone,country:r.country,timezone:r.timezone,subscription_plan:r.subscription_plan,ai_minutes_used:0,msg_quota_used:0};let O=null;try{const{error:U}=await B.rpc("create_doctor_as_admin",{doctor_id:v.user.id,doctor_email:r.email,doctor_name:r.name,doctor_phone:r.phone,doctor_country:r.country,doctor_timezone:r.timezone,doctor_subscription_plan:r.subscription_plan});O=U}catch{const{error:E}=await B.from("doctors").insert([M]);O=E}if(O){try{await B.auth.admin.deleteUser(v.user.id)}catch(U){console.error("Failed to cleanup auth user:",U)}throw new Error(`Failed to create doctor profile: ${O.message}`)}b({email:r.email,password:w}),u(`Doctor ${r.name} created successfully!`),n(),a({name:"",email:"",phone:"",country:"US",timezone:"UTC",subscription_plan:"starter",generatePassword:!0,customPassword:""})}catch(w){console.error("Error creating doctor:",w),c(w.message||"Failed to create doctor")}finally{l(!1)}},f=()=>{a({name:"",email:"",phone:"",country:"US",timezone:"UTC",subscription_plan:"starter",generatePassword:!0,customPassword:""}),c(""),u(""),b(null),e()};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Doctor"}),s.jsx("button",{onClick:f,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Et,{className:"w-5 h-5"})})]})}),s.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(ie,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:r.name,onChange:g=>a({...r,name:g.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Dr. John Smith",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ls,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"email",value:r.email,onChange:g=>a({...r,email:g.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"doctor@example.com",required:!0})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be used as the login username"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),s.jsxs("div",{className:"relative",children:[s.jsx(se,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"tel",value:r.phone,onChange:g=>a({...r,phone:g.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+1 (555) 123-4567",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ho,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("select",{value:r.country,onChange:g=>a({...r,country:g.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:S.map(g=>s.jsx("option",{value:g.code,children:g.name},g.code))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),s.jsx("select",{value:r.timezone,onChange:g=>a({...r,timezone:g.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:j.map(g=>s.jsx("option",{value:g,children:g},g))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subscription Plan"}),s.jsxs("div",{className:"relative",children:[s.jsx(ge,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsxs("select",{value:r.subscription_plan,onChange:g=>a({...r,subscription_plan:g.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"starter",children:"Starter Plan"}),s.jsx("option",{value:"pro",children:"Pro Plan"}),s.jsx("option",{value:"pro_plus",children:"Pro Plus Plan"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Login Credentials"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",id:"generatePassword",name:"passwordOption",checked:r.generatePassword,onChange:()=>a({...r,generatePassword:!0}),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"generatePassword",className:"text-sm font-medium text-gray-700",children:"Generate secure password automatically"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",id:"customPassword",name:"passwordOption",checked:!r.generatePassword,onChange:()=>a({...r,generatePassword:!1}),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"customPassword",className:"text-sm font-medium text-gray-700",children:"Set custom password"})]}),!r.generatePassword&&s.jsx("div",{className:"ml-7",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:h?"text":"password",value:r.customPassword,onChange:g=>a({...r,customPassword:g.target.value}),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter password (min 8 characters)",minLength:8,required:!r.generatePassword}),s.jsx("button",{type:"button",onClick:()=>m(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h?s.jsx(Sg,{className:"w-5 h-5"}):s.jsx(us,{className:"w-5 h-5"})})]})})]})]}),o&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-800 text-sm",children:o})}),d&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsx("p",{className:"text-green-800 text-sm",children:d})}),y&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Login Credentials Created"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-blue-800",children:"Email:"}),s.jsx("span",{className:"ml-2 font-mono text-blue-700",children:y.email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-blue-800",children:"Password:"}),s.jsx("span",{className:"ml-2 font-mono text-blue-700",children:y.password})]})]}),s.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"⚠️ Please save these credentials securely and share them with the doctor."})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[s.jsx(ys,{className:"w-4 h-4"}),s.jsx("span",{children:i?"Creating...":"Create Doctor"})]})]})]})]})}):null},ey=({doctor:t,onBack:e})=>{const[n,r]=N.useState("overview"),[a,i]=N.useState(!0),[l,o]=N.useState([]),[c,d]=N.useState([]),[u,h]=N.useState([]),[m,y]=N.useState([]),[b,S]=N.useState([]),[j,p]=N.useState([]);N.useEffect(()=>{x()},[t.id]);const x=async()=>{try{if(!J){o([{id:"1",doctor_id:t.id,name:"Main Medical Center",address:"123 Health St",city:"New York",state:"NY",country:"US",phone:"+1 (555) 123-4567",hours_json:{monday:{open:"09:00",close:"17:00"},tuesday:{open:"09:00",close:"17:00"},wednesday:{open:"09:00",close:"17:00"},thursday:{open:"09:00",close:"17:00"},friday:{open:"09:00",close:"17:00"},saturday:{open:"09:00",close:"13:00"},sunday:{open:"closed",close:"closed"}},created_at:"2024-01-15T10:00:00Z"}]),d([{id:"1",doctor_id:t.id,clinic_id:"1",first_name:"John",last_name:"Smith",dob:"1985-06-15",sex:"male",phone:"+1 (555) 123-4567",email:"john.smith@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["diabetes","hypertension"],created_at:"2024-01-15T10:00:00Z"}]),S([{id:"1",doctor_id:t.id,patient_id:"1",call_id:"call_001",phone_number:"+1 (555) 123-4567",call_type:"inbound",status:"completed",duration_seconds:180,transcript:"Patient called to schedule appointment. AI successfully booked for next Tuesday at 2 PM.",ai_confidence_score:.95,actions_taken:[{action:"schedule_appointment",timestamp:"2024-01-15T10:30:00Z"}],created_at:"2024-01-15T10:30:00Z",ended_at:"2024-01-15T10:33:00Z"}]),p([{id:"1",doctor_id:t.id,report_type:"hipaa",status:"compliant",details:{last_audit:"2024-01-01",encryption_status:"enabled"},risk_level:"low",resolved:!0,created_at:"2024-01-15T10:00:00Z"}]),i(!1);return}const[E,D,R,P,k,A]=await Promise.all([B.from("clinics").select("*").eq("doctor_id",t.id),B.from("patients").select("*").eq("doctor_id",t.id),B.from("appointments").select("*").eq("doctor_id",t.id),B.from("prescriptions").select("*").eq("doctor_id",t.id),B.from("voice_agent_logs").select("*").eq("doctor_id",t.id),B.from("compliance_reports").select("*").eq("doctor_id",t.id)]);o(E.data||[]),d(D.data||[]),h(R.data||[]),y(P.data||[]),S(k.data||[]),p(A.data||[])}catch(E){console.error("Error fetching doctor data:",E)}finally{i(!1)}},f=[{id:"overview",label:"Overview",icon:ie},{id:"clinics",label:"Clinics",icon:ge},{id:"patients",label:"Patients",icon:Ce},{id:"appointments",label:"Appointments",icon:ee},{id:"prescriptions",label:"Prescriptions",icon:pe},{id:"voice-agent",label:"Voice Agent",icon:se},{id:"compliance",label:"Compliance",icon:Ct}],g=E=>{switch(E){case"compliant":case"completed":return"text-green-600 bg-green-100";case"warning":return"text-yellow-600 bg-yellow-100";case"violation":case"failed":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},w=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Clinics"})]}),s.jsx(ge,{className:"w-8 h-8 text-blue-600"})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Patients"})]}),s.jsx(Ce,{className:"w-8 h-8 text-green-600"})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Appointments"})]}),s.jsx(ee,{className:"w-8 h-8 text-purple-600"})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Voice Calls"})]}),s.jsx(se,{className:"w-8 h-8 text-orange-600"})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Doctor Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.country})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subscription Plan"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:t.subscription_plan.replace("_"," ")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"AI Minutes Used"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.ai_minutes_used})]})]})]})]}),v=()=>s.jsx("div",{className:"space-y-4",children:l.map(E=>s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:E.name}),s.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(gs,{className:"w-4 h-4 mr-2"}),E.address,", ",E.city,", ",E.state,", ",E.country]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(se,{className:"w-4 h-4 mr-2"}),E.phone]})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"text-sm text-gray-500",children:["Created ",new Date(E.created_at).toLocaleDateString()]})})]})},E.id))}),_=()=>s.jsx("div",{className:"space-y-4",children:c.map(E=>s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[E.first_name," ",E.last_name]}),s.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600",children:[s.jsxs("p",{children:["Email: ",E.email]}),s.jsxs("p",{children:["Phone: ",E.phone]}),s.jsxs("p",{children:["DOB: ",new Date(E.dob).toLocaleDateString()]}),s.jsxs("p",{children:["Sex: ",E.sex]})]}),E.tags.length>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:E.tags.map(D=>s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:D},D))})]})})},E.id))}),M=()=>s.jsx("div",{className:"space-y-4",children:b.map(E=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Call ",E.call_id]}),s.jsx("p",{className:"text-sm text-gray-600",children:E.phone_number})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g(E.status)}`,children:E.status}),s.jsxs("span",{className:"text-sm text-gray-500",children:[Math.floor(E.duration_seconds/60),":",(E.duration_seconds%60).toString().padStart(2,"0")]})]})]}),E.transcript&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Transcript"}),s.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:E.transcript})]}),E.ai_confidence_score&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"AI Confidence Score"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${E.ai_confidence_score*100}%`}})}),s.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:[(E.ai_confidence_score*100).toFixed(1),"%"]})]})]}),s.jsx("div",{className:"text-xs text-gray-500",children:new Date(E.created_at).toLocaleString()})]},E.id))}),O=()=>s.jsx("div",{className:"space-y-4",children:j.map(E=>s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 capitalize",children:[E.report_type," Compliance"]}),s.jsxs("div",{className:"mt-2 flex items-center space-x-4",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g(E.status)}`,children:E.status}),s.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E.risk_level==="low"?"text-green-600 bg-green-100":E.risk_level==="medium"?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"}`,children:[E.risk_level," risk"]}),E.resolved?s.jsx(_e,{className:"w-4 h-4 text-green-600"}):s.jsx(hs,{className:"w-4 h-4 text-red-600"})]}),s.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Created: ",new Date(E.created_at).toLocaleDateString(),E.resolved_at&&s.jsxs("span",{className:"ml-4",children:["Resolved: ",new Date(E.resolved_at).toLocaleDateString()]})]})]})})},E.id))}),U=()=>{switch(n){case"overview":return w();case"clinics":return v();case"patients":return _();case"appointments":return s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Appointments view coming soon"});case"prescriptions":return s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Prescriptions view coming soon"});case"voice-agent":return M();case"compliance":return O();default:return w()}};return a?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading doctor details..."})]})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[s.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(bg,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.name}),s.jsx("p",{className:"text-gray-600",children:t.email})]})]}),s.jsx("div",{className:"border-b border-gray-200 mb-6",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:f.map(E=>{const D=E.icon;return s.jsxs("button",{onClick:()=>r(E.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${n===E.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(D,{className:"w-4 h-4"}),s.jsx("span",{children:E.label})]},E.id)})})}),s.jsx("div",{className:"min-h-96",children:U()})]})},ty=({activeTab:t,setActiveTab:e})=>{const[n,r]=N.useState([]),[a,i]=N.useState(null),[l,o]=N.useState(!1),[c,d]=N.useState(!1),[u,h]=N.useState(""),[m,y]=N.useState({totalDoctors:0,totalPatients:0,totalAppointments:0,totalClinics:0,activeVoiceCalls:0,complianceScore:95});N.useEffect(()=>{b(),S()},[]);const b=async()=>{d(!0);try{if(!J){r([{id:"doctor-1",email:"dr.smith@clinic.com",name:"Dr. John Smith",country:"US",phone:"+1 (555) 123-4567",timezone:"America/New_York",subscription_plan:"pro",ai_minutes_used:450,msg_quota_used:1200,created_at:"2024-01-15T10:00:00Z"},{id:"doctor-2",email:"dr.johnson@medical.com",name:"Dr. Sarah Johnson",country:"US",phone:"+1 (555) 987-6543",timezone:"America/Los_Angeles",subscription_plan:"pro_plus",ai_minutes_used:780,msg_quota_used:2100,created_at:"2024-02-20T14:30:00Z"},{id:"doctor-3",email:"dr.chen@healthcare.com",name:"Dr. Michael Chen",country:"CA",phone:"+1 (416) 555-0123",timezone:"America/Toronto",subscription_plan:"starter",ai_minutes_used:120,msg_quota_used:350,created_at:"2024-03-10T09:15:00Z"}]),d(!1);return}const{data:f,error:g}=await B.from("doctors").select("*").order("created_at",{ascending:!1});if(g)throw g;r(f||[])}catch(f){console.error("Error fetching doctors:",f),r([])}finally{d(!1)}},S=async()=>{try{if(!J){y({totalDoctors:3,totalPatients:1247,totalAppointments:45,totalClinics:8,activeVoiceCalls:2,complianceScore:95});return}const[f,g,w,v]=await Promise.all([B.from("doctors").select("*",{count:"exact",head:!0}),B.from("patients").select("*",{count:"exact",head:!0}),B.from("appointments").select("*",{count:"exact",head:!0}),B.from("clinics").select("*",{count:"exact",head:!0})]);y({totalDoctors:f.count||0,totalPatients:g.count||0,totalAppointments:w.count||0,totalClinics:v.count||0,activeVoiceCalls:2,complianceScore:95})}catch(f){console.error("Error fetching system stats:",f)}},j=n.filter(f=>f.name.toLowerCase().includes(u.toLowerCase())||f.email.toLowerCase().includes(u.toLowerCase())||f.phone.includes(u)),p=f=>{i(f)},x=()=>{i(null)};return a?s.jsx(ey,{doctor:a,onBack:x}):s.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"System overview and doctor management"})]}),s.jsxs("button",{onClick:()=>o(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 flex items-center space-x-2 font-medium shadow-lg hover:shadow-xl transform hover:scale-105",children:[s.jsx(kt,{className:"w-5 h-5"}),s.jsx("span",{children:"Add Doctor"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(Ce,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.totalDoctors}),s.jsx("p",{className:"text-sm text-gray-600",children:"Doctors"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(Ce,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.totalPatients}),s.jsx("p",{className:"text-sm text-gray-600",children:"Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx(ee,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.totalAppointments}),s.jsx("p",{className:"text-sm text-gray-600",children:"Appointments"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:s.jsx(ge,{className:"w-5 h-5 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.totalClinics}),s.jsx("p",{className:"text-sm text-gray-600",children:"Clinics"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:s.jsx(se,{className:"w-5 h-5 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.activeVoiceCalls}),s.jsx("p",{className:"text-sm text-gray-600",children:"Active Calls"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(Ct,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[m.complianceScore,"%"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Compliance"})]})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[s.jsx("button",{onClick:()=>e("database-status"),className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200 text-left",children:s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:s.jsx(Nt,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Database Status"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Monitor system health"})]})]})}),s.jsx("button",{onClick:()=>e("voice-agent"),className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200 text-left",children:s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:s.jsx(se,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Voice Agent Logs"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Review AI call activity"})]})]})}),s.jsx("button",{onClick:()=>e("compliance"),className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200 text-left",children:s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:s.jsx(Ct,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Compliance"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Security & audit reports"})]})]})}),s.jsx("button",{onClick:()=>e("analytics"),className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200 text-left",children:s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:s.jsx(Ra,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Analytics"}),s.jsx("p",{className:"text-sm text-gray-600",children:"System performance"})]})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ye,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search doctors by name, email, or phone...",value:u,onChange:f=>h(f.target.value),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors"})]}),s.jsxs("button",{className:"px-6 py-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors flex items-center space-x-2 font-medium",children:[s.jsx(kn,{className:"w-4 h-4"}),s.jsx("span",{children:"Filter"})]}),s.jsxs("button",{className:"px-6 py-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors flex items-center space-x-2 font-medium",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Export"})]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Registered Doctors (",j.length,")"]})}),c?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading doctors..."})]}):j.length===0?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx(Ce,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No doctors found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:u?"Try adjusting your search criteria.":"Get started by adding your first doctor."}),!u&&s.jsx("button",{onClick:()=>o(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Add First Doctor"})]}):s.jsx("div",{className:"divide-y divide-gray-200",children:j.map(f=>s.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:s.jsx(Ce,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.name}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[s.jsx("span",{children:f.email}),s.jsx("span",{children:f.phone}),s.jsx("span",{className:"capitalize",children:f.subscription_plan.replace("_"," ")})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right text-sm",children:[s.jsxs("div",{className:"text-gray-900 font-medium",children:[f.ai_minutes_used," AI mins used"]}),s.jsxs("div",{className:"text-gray-600",children:[f.msg_quota_used," messages sent"]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>p(f),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-1",children:[s.jsx(us,{className:"w-4 h-4"}),s.jsx("span",{children:"View"})]}),s.jsxs("button",{className:"px-4 py-2 border border-gray-200 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-1",children:[s.jsx(kr,{className:"w-4 h-4"}),s.jsx("span",{children:"Edit"})]})]})]})]})},f.id))})]}),s.jsx(Xg,{isOpen:l,onClose:()=>o(!1),onDoctorAdded:b})]})},ym=({isOpen:t,onClose:e,onClinicCreated:n})=>{const{doctor:r}=fe(),{refreshClinics:a}=Fe(),[i,l]=N.useState(!1),[o,c]=N.useState(""),[d,u]=N.useState(""),[h,m]=N.useState({name:"",address:"",city:"",state:"",country:"US",zipCode:"",phone:"",email:"",website:"",specialties:[],hours:{monday:{open:"09:00",close:"17:00",closed:!1},tuesday:{open:"09:00",close:"17:00",closed:!1},wednesday:{open:"09:00",close:"17:00",closed:!1},thursday:{open:"09:00",close:"17:00",closed:!1},friday:{open:"09:00",close:"17:00",closed:!1},saturday:{open:"09:00",close:"13:00",closed:!1},sunday:{open:"closed",close:"closed",closed:!0}}}),y=[{code:"US",name:"United States"},{code:"CA",name:"Canada"},{code:"GB",name:"United Kingdom"},{code:"AU",name:"Australia"},{code:"IN",name:"India"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"JP",name:"Japan"}],b=["Family Medicine","Internal Medicine","Pediatrics","Cardiology","Dermatology","Orthopedics","Neurology","Psychiatry","Radiology","Emergency Medicine","Anesthesiology","Surgery"],S=[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}],j=(g,w)=>{m(w?v=>({...v,specialties:[...v.specialties,g]}):v=>({...v,specialties:v.specialties.filter(_=>_!==g)}))},p=(g,w,v)=>{m(_=>({..._,hours:{..._.hours,[g]:{..._.hours[g],[w]:v}}}))},x=async g=>{g.preventDefault(),l(!0),c(""),u("");try{if(!r)throw new Error("Doctor information not available");const w=Object.entries(h.hours).reduce((M,[O,U])=>(M[O]=U.closed?{open:"closed",close:"closed"}:{open:U.open,close:U.close},M),{}),v={doctor_id:r.id,name:h.name,address:h.address,city:h.city,state:h.state,country:h.country,phone:h.phone,hours_json:w};if(!J){u(`Demo: Clinic "${h.name}" would be created successfully!`),setTimeout(()=>{n(),f()},2e3);return}const{error:_}=await B.from("clinics").insert([v]);if(_)throw _;u(`Clinic "${h.name}" created successfully!`),n(),a(),setTimeout(()=>{f(),a()},2e3)}catch(w){console.error("Error creating clinic:",w),c(w.message||"Failed to create clinic")}finally{l(!1)}},f=()=>{m({name:"",address:"",city:"",state:"",country:"US",zipCode:"",phone:"",email:"",website:"",specialties:[],hours:{monday:{open:"09:00",close:"17:00",closed:!1},tuesday:{open:"09:00",close:"17:00",closed:!1},wednesday:{open:"09:00",close:"17:00",closed:!1},thursday:{open:"09:00",close:"17:00",closed:!1},friday:{open:"09:00",close:"17:00",closed:!1},saturday:{open:"09:00",close:"13:00",closed:!1},sunday:{open:"closed",close:"closed",closed:!0}}}),c(""),u(""),e()};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(ge,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Clinic"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Add a new clinic location to your practice"})]})]}),s.jsx("button",{onClick:f,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Et,{className:"w-5 h-5"})})]})}),s.jsxs("form",{onSubmit:x,className:"p-6 space-y-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center space-x-2",children:[s.jsx(ge,{className:"w-5 h-5"}),s.jsx("span",{children:"Basic Information"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Clinic Name *"}),s.jsx("input",{type:"text",value:h.name,onChange:g=>m({...h,name:g.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Main Medical Center",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),s.jsxs("div",{className:"relative",children:[s.jsx(se,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"tel",value:h.phone,onChange:g=>m({...h,phone:g.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+1 (555) 123-4567",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",value:h.email,onChange:g=>m({...h,email:g.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"info@clinic.com"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center space-x-2",children:[s.jsx(gs,{className:"w-5 h-5"}),s.jsx("span",{children:"Location"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address *"}),s.jsx("input",{type:"text",value:h.address,onChange:g=>m({...h,address:g.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"123 Medical Drive",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),s.jsx("input",{type:"text",value:h.city,onChange:g=>m({...h,city:g.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"New York",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province *"}),s.jsx("input",{type:"text",value:h.state,onChange:g=>m({...h,state:g.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"NY",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ho,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("select",{value:h.country,onChange:g=>m({...h,country:g.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:y.map(g=>s.jsx("option",{value:g.code,children:g.name},g.code))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP/Postal Code"}),s.jsx("input",{type:"text",value:h.zipCode,onChange:g=>m({...h,zipCode:g.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10001"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center space-x-2",children:[s.jsx($e,{className:"w-5 h-5"}),s.jsx("span",{children:"Operating Hours"})]}),s.jsx("div",{className:"space-y-3",children:S.map(({key:g,label:w})=>s.jsxs("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"w-20 text-sm font-medium text-gray-700",children:w}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:h.hours[g].closed,onChange:v=>p(g,"closed",v.target.checked),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Closed"})]}),!h.hours[g].closed&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"time",value:h.hours[g].open,onChange:v=>p(g,"open",v.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),s.jsx("span",{className:"text-gray-500",children:"to"}),s.jsx("input",{type:"time",value:h.hours[g].close,onChange:v=>p(g,"close",v.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})]},g))})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center space-x-2",children:[s.jsx(ie,{className:"w-5 h-5"}),s.jsx("span",{children:"Medical Specialties"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:b.map(g=>s.jsxs("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded-lg cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:h.specialties.includes(g),onChange:w=>j(g,w.target.checked),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:g})]},g))})]}),o&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-800 text-sm",children:o})}),d&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsx("p",{className:"text-green-800 text-sm",children:d})}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:f,className:"px-6 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[s.jsx(ys,{className:"w-4 h-4"}),s.jsx("span",{children:i?"Creating...":"Create Clinic"})]})]})]})]})}):null},Ed=({activeTab:t,setActiveTab:e})=>{var m;const{isAdmin:n,admin:r,doctor:a}=fe(),{selectedClinic:i,setSelectedClinic:l,clinics:o,loading:c,refreshClinics:d}=Fe(),[u,h]=ca.useState(!1);return n?s.jsx(ty,{activeTab:t,setActiveTab:e}):a?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),a&&s.jsxs("div",{className:"flex items-center space-x-3 bg-gray-50 px-4 py-2 rounded-xl border border-gray-200",children:[s.jsx(ge,{className:"w-5 h-5 text-blue-600"}),s.jsxs("select",{value:i||"all",onChange:y=>{if(y.target.value==="create-new"){h(!0);return}l(y.target.value==="all"?null:y.target.value)},disabled:c,className:"bg-transparent border-none focus:outline-none focus:ring-0 text-sm font-medium text-gray-700 cursor-pointer pr-6 appearance-none",style:{backgroundImage:`url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1rem"},children:[s.jsx("option",{value:"all",children:"All Clinics"}),o.map(y=>s.jsx("option",{value:y.id,children:y.name},y.id)),s.jsx("option",{value:"create-new",className:"font-medium text-blue-600",children:"+ Create New Clinic"})]})]})]}),s.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",(a==null?void 0:a.name)||"Doctor",". ",i&&i!=="all"?`Here's what's happening at ${((m=o.find(y=>y.id===i))==null?void 0:m.name)||"your clinic"} today.`:"Here's what's happening across all your clinics today."]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-gray-600",children:"Today"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),s.jsx(Kg,{}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(Jg,{setActiveTab:e}),s.jsx(Zg,{})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(Qg,{}),s.jsx(Yg,{})]}),s.jsx(ym,{isOpen:u,onClose:()=>h(!1),onClinicCreated:()=>{d()}})]}):s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading doctor profile..."})]})})},vm=({isOpen:t,onClose:e,onPrescriptionCreated:n,preselectedPatient:r=null})=>{const{doctor:a}=fe(),{selectedClinic:i,clinics:l}=Fe(),[o,c]=N.useState(!1),[d,u]=N.useState(""),[h,m]=N.useState(""),[y,b]=N.useState([]),[S,j]=N.useState([]),[p,x]=N.useState(""),[f,g]=N.useState(!1),[w,v]=N.useState(!1),[_,M]=N.useState(null),[O,U]=N.useState({patientId:(r==null?void 0:r.id)||"",clinicId:i!=="all"&&i||"",medications:[{name:"",dosage:"",frequency:"",duration:"",notes:""}],instructions:"",followUp:"",sendEmail:!0,sendSms:!1});N.useEffect(()=>{t&&a&&(E(),r&&(x(`${r.first_name} ${r.last_name}`),U(T=>({...T,patientId:r.id}))))},[t,a,r]),N.useEffect(()=>{const T=y.filter(L=>`${L.first_name} ${L.last_name}`.toLowerCase().includes(p.toLowerCase())||L.phone.includes(p)||L.email.toLowerCase().includes(p.toLowerCase()));j(T)},[y,p]);const E=async()=>{if(a)try{if(!J){const V=[{id:"1",doctor_id:a.id,clinic_id:"1",first_name:"John",last_name:"Smith",dob:"1985-06-15",sex:"male",phone:"+1 (555) 123-4567",email:"john.smith@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["diabetes","hypertension"],created_at:"2024-01-15T10:00:00Z"},{id:"2",doctor_id:a.id,clinic_id:"1",first_name:"Sarah",last_name:"Johnson",dob:"1990-03-22",sex:"female",phone:"+1 (555) 987-6543",email:"sarah.johnson@email.com",consent_flags_json:{messaging:!0,marketing:!0,voice_calls:!0},tags:["allergies"],created_at:"2024-01-20T14:30:00Z"}];b(V),j(V);return}const{data:T,error:L}=await B.from("patients").select("*").eq("doctor_id",a.id).order("first_name",{ascending:!0});if(L)throw L;b(T||[]),j(T||[])}catch(T){console.error("Error fetching patients:",T),b([]),j([])}},D=T=>{U(L=>({...L,patientId:T.id})),x(`${T.first_name} ${T.last_name}`),g(!1),M(T)},R=()=>{U(T=>({...T,medications:[...T.medications,{name:"",dosage:"",frequency:"",duration:"",notes:""}]}))},P=T=>{U(L=>({...L,medications:L.medications.filter((V,K)=>K!==T)}))},k=(T,L,V)=>{U(K=>({...K,medications:K.medications.map((G,ne)=>ne===T?{...G,[L]:V}:G)}))},A=async(T,L)=>new Promise(V=>{setTimeout(()=>{const K=`https://example.com/prescriptions/${T.id}.pdf`;V(K)},1e3)}),z=async(T,L)=>new Promise(V=>{setTimeout(()=>{console.log(`Email sent to ${T.email} with PDF: ${L}`),V()},500)}),I=async(T,L)=>new Promise(V=>{setTimeout(()=>{console.log(`SMS sent to ${T.phone} for prescription: ${L}`),V()},500)}),C=async T=>{T.preventDefault(),c(!0),u(""),m("");try{if(!a)throw new Error("Doctor information not available");if(!O.patientId)throw new Error("Please select a patient");if(!O.clinicId)throw new Error("Please select a clinic");if(O.medications.some(G=>!G.name||!G.dosage||!G.frequency))throw new Error("Please fill in all required medication fields");const L=y.find(G=>G.id===O.patientId);if(!L)throw new Error("Selected patient not found");const V={doctor_id:a.id,clinic_id:O.clinicId,patient_id:O.patientId,rx_json:{medications:O.medications.filter(G=>G.name),instructions:O.instructions,follow_up:O.followUp},signed_by:a.name,signed_ts:new Date().toISOString()};let K="";if(!J)K=`demo-rx-${Date.now()}`,m("Demo: Prescription created successfully!");else{const{data:G,error:ne}=await B.from("prescriptions").insert([V]).select().single();if(ne)throw ne;K=G.id,m("Prescription created successfully!")}if(O.sendEmail||O.sendSms){v(!0);try{const G=await A({...V,id:K},L);O.sendEmail&&L.consent_flags_json.messaging&&await z(L,G),O.sendSms&&L.consent_flags_json.messaging&&await I(L,K),m(ne=>ne+" PDF generated and sent successfully!")}catch(G){console.error("Communication error:",G),m(ne=>ne+" (Note: Communication sending failed)")}finally{v(!1)}}n(),setTimeout(()=>{$()},3e3)}catch(L){console.error("Error creating prescription:",L),u(L.message||"Failed to create prescription")}finally{c(!1)}},$=()=>{U({patientId:(r==null?void 0:r.id)||"",clinicId:i!=="all"&&i||"",medications:[{name:"",dosage:"",frequency:"",duration:"",notes:""}],instructions:"",followUp:"",sendEmail:!0,sendSms:!1}),x(r?`${r.first_name} ${r.last_name}`:""),g(!1),u(""),m(""),v(!1),e()};if(!t)return null;const q=y.find(T=>T.id===O.patientId);return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center",children:s.jsx(pe,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create Prescription"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Write and send a new prescription"})]})]}),s.jsx("button",{onClick:$,className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:s.jsx(Et,{className:"w-5 h-5 text-gray-400"})})]})}),s.jsxs("form",{onSubmit:C,className:"p-6 space-y-6",children:[!r&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Patient *"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ie,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:p,onChange:T=>{x(T.target.value),g(!0),T.target.value||U(L=>({...L,patientId:""}))},onFocus:()=>g(!0),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",placeholder:"Search patients by name, phone, or email...",required:!0}),s.jsx(Ye,{className:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 transform -translate-y-1/2"})]}),f&&S.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg max-h-60 overflow-y-auto",children:S.map(T=>s.jsx("button",{type:"button",onClick:()=>D(T),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 focus:outline-none focus:bg-green-50",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(ie,{className:"w-4 h-4 text-green-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900",children:[T.first_name," ",T.last_name]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[T.phone," • ",T.email]})]})]})},T.id))})]}),q&&s.jsx("div",{className:"mt-3 p-3 bg-green-50 rounded-lg border border-green-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(ie,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-green-900",children:[q.first_name," ",q.last_name]}),s.jsxs("p",{className:"text-sm text-green-700",children:[q.phone," • ",q.email]}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:q.tags.map(T=>s.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-800 text-xs rounded-full",children:T},T))})]})]})})]}),r&&s.jsx("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(ie,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold text-green-900",children:["Prescription for: ",r.first_name," ",r.last_name]}),s.jsxs("p",{className:"text-sm text-green-700",children:[r.phone," • ",r.email]}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:r.tags.map(T=>s.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-800 text-xs rounded-full",children:T},T))})]})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Clinic *"}),s.jsxs("div",{className:"relative",children:[s.jsx(ge,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsxs("select",{value:O.clinicId,onChange:T=>U({...O,clinicId:T.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors appearance-none",required:!0,children:[s.jsx("option",{value:"",children:"Select a clinic"}),l.map(T=>s.jsx("option",{value:T.id,children:T.name},T.id))]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Medications *"}),s.jsxs("button",{type:"button",onClick:R,className:"px-3 py-1 bg-green-100 text-green-800 rounded-lg hover:bg-green-200 transition-colors flex items-center space-x-1 text-sm",children:[s.jsx(kt,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Medication"})]})]}),s.jsx("div",{className:"space-y-4",children:O.medications.map((T,L)=>s.jsxs("div",{className:"p-4 border border-gray-200 rounded-xl bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-medium text-gray-900",children:["Medication ",L+1]}),O.medications.length>1&&s.jsx("button",{type:"button",onClick:()=>P(L),className:"p-1 text-red-600 hover:bg-red-100 rounded",children:s.jsx(Cr,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Medication Name *"}),s.jsx("input",{type:"text",value:T.name,onChange:V=>k(L,"name",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm",placeholder:"e.g., Metformin",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Dosage *"}),s.jsx("input",{type:"text",value:T.dosage,onChange:V=>k(L,"dosage",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm",placeholder:"e.g., 500mg",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Frequency *"}),s.jsx("input",{type:"text",value:T.frequency,onChange:V=>k(L,"frequency",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm",placeholder:"e.g., Twice daily",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Duration"}),s.jsx("input",{type:"text",value:T.duration,onChange:V=>k(L,"duration",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm",placeholder:"e.g., 30 days"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("input",{type:"text",value:T.notes,onChange:V=>k(L,"notes",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm",placeholder:"e.g., Take with meals"})]})]})]},L))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Instructions"}),s.jsx("textarea",{value:O.instructions,onChange:T=>U({...O,instructions:T.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors resize-none",placeholder:"Additional instructions for the patient..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Follow-up"}),s.jsx("input",{type:"text",value:O.followUp,onChange:T=>U({...O,followUp:T.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",placeholder:"e.g., 2 weeks, 1 month"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Send Prescription"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"sendEmail",checked:O.sendEmail,onChange:T=>U({...O,sendEmail:T.target.checked}),className:"w-4 h-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),s.jsxs("label",{htmlFor:"sendEmail",className:"flex items-center space-x-2 text-sm text-gray-700",children:[s.jsx(Ls,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{children:"Send PDF via Email"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"sendSms",checked:O.sendSms,onChange:T=>U({...O,sendSms:T.target.checked}),className:"w-4 h-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),s.jsxs("label",{htmlFor:"sendSms",className:"flex items-center space-x-2 text-sm text-gray-700",children:[s.jsx(se,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Send notification via SMS"})]})]})]})]}),d&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:s.jsx("p",{className:"text-red-800 text-sm font-medium",children:d})}),h&&s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[s.jsx("p",{className:"text-green-800 text-sm font-medium",children:h}),w&&s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-green-600 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-green-700 text-xs",children:"Generating PDF and sending..."})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:$,className:"px-6 py-3 text-gray-700 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:o||w,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center space-x-2 font-medium shadow-lg",children:[s.jsx(ys,{className:"w-4 h-4"}),s.jsx("span",{children:o?"Creating...":w?"Sending...":"Create & Send Prescription"})]})]})]})]})})},bm=({isOpen:t,onClose:e,prescription:n})=>{var c,d,u;const r=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),a=()=>{console.log("Downloading prescription PDF..."),alert("PDF download would start here")},i=()=>{console.log("Sending prescription via email..."),alert("Prescription would be sent via email")},l=()=>{console.log("Sending prescription via SMS..."),alert("Prescription notification would be sent via SMS")},o=()=>{window.print()};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:s.jsx(pe,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Prescription Details"}),s.jsx("p",{className:"text-sm text-gray-500",children:"View and manage prescription"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:a,className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Download PDF",children:s.jsx(ot,{className:"w-5 h-5"})}),s.jsx("button",{onClick:o,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-colors",title:"Print",children:s.jsx(Cd,{className:"w-5 h-5"})}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:s.jsx(Et,{className:"w-5 h-5 text-gray-400"})})]})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx(ie,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-blue-900",children:"Patient Information"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-blue-800",children:"Name:"}),s.jsx("span",{className:"ml-2 text-blue-700",children:n.patient?`${n.patient.first_name} ${n.patient.last_name}`:"Unknown Patient"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-blue-800",children:"Phone:"}),s.jsx("span",{className:"ml-2 text-blue-700",children:(c=n.patient)==null?void 0:c.phone})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-blue-800",children:"Email:"}),s.jsx("span",{className:"ml-2 text-blue-700",children:(d=n.patient)==null?void 0:d.email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-blue-800",children:"DOB:"}),s.jsx("span",{className:"ml-2 text-blue-700",children:(u=n.patient)!=null&&u.dob?new Date(n.patient.dob).toLocaleDateString():"N/A"})]})]})]}),s.jsxs("div",{className:"bg-green-50 rounded-xl p-4 border border-green-200",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx(pe,{className:"w-5 h-5 text-green-600"}),s.jsx("h3",{className:"font-semibold text-green-900",children:"Prescription Information"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-green-800",children:"Prescription ID:"}),s.jsx("span",{className:"ml-2 text-green-700 font-mono",children:n.id})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-green-800",children:"Signed By:"}),s.jsx("span",{className:"ml-2 text-green-700",children:n.signed_by})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-green-800",children:"Date Signed:"}),s.jsx("span",{className:"ml-2 text-green-700",children:r(n.signed_ts)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-green-800",children:"Created:"}),s.jsx("span",{className:"ml-2 text-green-700",children:r(n.created_at)})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[s.jsx(pe,{className:"w-5 h-5"}),s.jsx("span",{children:"Medications"})]}),s.jsx("div",{className:"space-y-4",children:n.rx_json.medications.map((h,m)=>s.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:h.name}),s.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:h.dosage})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Frequency:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:h.frequency})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Duration:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:h.duration||"As needed"})]}),h.notes&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Notes:"}),s.jsx("span",{className:"ml-2 text-gray-600 italic",children:h.notes})]})]})]},m))})]}),n.rx_json.instructions&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Instructions"}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:s.jsx("p",{className:"text-gray-700",children:n.rx_json.instructions})})]}),n.rx_json.follow_up&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Follow-up"}),s.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:s.jsx("p",{className:"text-gray-700",children:n.rx_json.follow_up})})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 pt-4 border-t border-gray-200",children:[s.jsxs("button",{onClick:a,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-200 flex items-center space-x-2 font-medium shadow-lg",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Generate & Download PDF"})]}),s.jsxs("button",{onClick:i,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-200 flex items-center space-x-2 font-medium shadow-lg",children:[s.jsx(Ls,{className:"w-4 h-4"}),s.jsx("span",{children:"Send via Email"})]}),s.jsxs("button",{onClick:l,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all duration-200 flex items-center space-x-2 font-medium shadow-lg",children:[s.jsx(se,{className:"w-4 h-4"}),s.jsx("span",{children:"Send via SMS"})]}),s.jsxs("button",{onClick:o,className:"px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 transition-all duration-200 flex items-center space-x-2 font-medium shadow-lg",children:[s.jsx(Cd,{className:"w-4 h-4"}),s.jsx("span",{children:"Print"})]})]})]})]})}):null},sy=({isOpen:t,onClose:e,patient:n,onPatientUpdated:r})=>{const{doctor:a}=fe(),{clinics:i}=Fe(),[l,o]=N.useState("overview"),[c,d]=N.useState([]),[u,h]=N.useState([]),[m,y]=N.useState(!1),[b,S]=N.useState(!1),[j,p]=N.useState(!1),[x,f]=N.useState(null);N.useEffect(()=>{t&&n&&g()},[t,n]);const g=async()=>{y(!0);try{await Promise.all([w(),v()])}catch(R){console.error("Error fetching patient data:",R)}finally{y(!1)}},w=async()=>{try{if(!J){const k=[{id:"1",doctor_id:(a==null?void 0:a.id)||"",clinic_id:n.clinic_id,patient_id:n.id,rx_json:{medications:[{name:"Metformin",dosage:"500mg",frequency:"Twice daily",duration:"30 days",notes:"Take with meals"},{name:"Lisinopril",dosage:"10mg",frequency:"Once daily",duration:"30 days",notes:"Take in the morning"}],instructions:"Monitor blood sugar levels daily. Follow up in 2 weeks.",follow_up:"2 weeks"},pdf_url:null,signed_by:(a==null?void 0:a.name)||"Dr. Demo",signed_ts:new Date().toISOString(),created_at:new Date(Date.now()-6048e5).toISOString()},{id:"2",doctor_id:(a==null?void 0:a.id)||"",clinic_id:n.clinic_id,patient_id:n.id,rx_json:{medications:[{name:"Vitamin D3",dosage:"1000 IU",frequency:"Once daily",duration:"90 days",notes:"Take with food"}],instructions:"Continue current diet and exercise routine",follow_up:"3 months"},pdf_url:null,signed_by:(a==null?void 0:a.name)||"Dr. Demo",signed_ts:new Date().toISOString(),created_at:new Date(Date.now()-12096e5).toISOString()}];d(k);return}const{data:R,error:P}=await B.from("prescriptions").select("*").eq("patient_id",n.id).order("created_at",{ascending:!1});if(P)throw P;d(R||[])}catch(R){console.error("Error fetching prescriptions:",R),d([])}},v=async()=>{try{if(!J){const k=[{id:"1",doctor_id:(a==null?void 0:a.id)||"",clinic_id:n.clinic_id,patient_id:n.id,start_ts:new Date(Date.now()+6048e5).toISOString(),end_ts:new Date(Date.now()+6048e5+18e5).toISOString(),status:"booked",channel:"manual",notes:"Follow-up consultation",created_at:new Date().toISOString()},{id:"2",doctor_id:(a==null?void 0:a.id)||"",clinic_id:n.clinic_id,patient_id:n.id,start_ts:new Date(Date.now()-12096e5).toISOString(),end_ts:new Date(Date.now()-12096e5+18e5).toISOString(),status:"complete",channel:"voice",notes:"Initial consultation",created_at:new Date(Date.now()-12096e5).toISOString()}];h(k);return}const{data:R,error:P}=await B.from("appointments").select("*").eq("patient_id",n.id).order("start_ts",{ascending:!1}).limit(10);if(P)throw P;h(R||[])}catch(R){console.error("Error fetching appointments:",R),h([])}},_=R=>{f(R),p(!0)},M=R=>new Date().getFullYear()-new Date(R).getFullYear(),O=R=>new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),U=R=>new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=R=>{var P;return((P=i.find(k=>k.id===R))==null?void 0:P.name)||"Unknown Clinic"};if(!t)return null;const D=[{id:"overview",label:"Overview",icon:ie},{id:"prescriptions",label:"Prescriptions",icon:pe},{id:"appointments",label:"Appointments",icon:ee},{id:"vitals",label:"Vitals",icon:zt}];return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"p-6 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:s.jsx(ie,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[n.first_name," ",n.last_name]}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[s.jsxs("span",{children:[M(n.dob)," years old"]}),s.jsx("span",{className:"capitalize",children:n.sex}),s.jsx("span",{children:n.phone}),s.jsx("span",{children:n.email})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx(ge,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm text-gray-600",children:E(n.clinic_id)})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[s.jsx(kt,{className:"w-4 h-4"}),s.jsx("span",{children:"New Prescription"})]}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:s.jsx(Et,{className:"w-6 h-6 text-gray-400"})})]})]}),s.jsx("div",{className:"mt-6 border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:D.map(R=>{const P=R.icon;return s.jsxs("button",{onClick:()=>o(R.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${l===R.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(P,{className:"w-4 h-4"}),s.jsx("span",{children:R.label})]},R.id)})})})]}),s.jsxs("div",{className:"p-6",children:[m&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading patient data..."})]}),!m&&l==="overview"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Personal Information"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-medium text-blue-800",children:"Date of Birth:"}),s.jsx("span",{className:"text-blue-700",children:O(n.dob)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-medium text-blue-800",children:"Age:"}),s.jsxs("span",{className:"text-blue-700",children:[M(n.dob)," years"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-medium text-blue-800",children:"Sex:"}),s.jsx("span",{className:"text-blue-700 capitalize",children:n.sex})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-medium text-blue-800",children:"Phone:"}),s.jsx("span",{className:"text-blue-700",children:n.phone})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-medium text-blue-800",children:"Email:"}),s.jsx("span",{className:"text-blue-700",children:n.email})]})]})]}),s.jsxs("div",{className:"bg-green-50 rounded-xl p-6 border border-green-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"Medical Information"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-green-800",children:"Medical Tags:"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:n.tags.length>0?n.tags.map(R=>s.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:R},R)):s.jsx("span",{className:"text-green-600 text-xs",children:"No tags assigned"})})]}),n.chief_complaint&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-green-800",children:"Chief Complaint:"}),s.jsx("p",{className:"text-green-700 mt-1",children:n.chief_complaint})]}),n.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-green-800",children:"Notes:"}),s.jsx("p",{className:"text-green-700 mt-1",children:n.notes})]})]})]})]}),s.jsxs("div",{className:"bg-purple-50 rounded-xl p-6 border border-purple-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Consent & Preferences"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${n.consent_flags_json.messaging?"bg-green-500":"bg-red-500"}`}),s.jsx("span",{className:"text-sm text-purple-700",children:"Messaging"}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${n.consent_flags_json.messaging?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.consent_flags_json.messaging?"Enabled":"Disabled"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${n.consent_flags_json.marketing?"bg-green-500":"bg-red-500"}`}),s.jsx("span",{className:"text-sm text-purple-700",children:"Marketing"}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${n.consent_flags_json.marketing?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.consent_flags_json.marketing?"Enabled":"Disabled"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${n.consent_flags_json.voice_calls?"bg-green-500":"bg-red-500"}`}),s.jsx("span",{className:"text-sm text-purple-700",children:"Voice Calls"}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${n.consent_flags_json.voice_calls?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.consent_flags_json.voice_calls?"Enabled":"Disabled"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(pe,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Prescriptions"})]})]})}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ee,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Appointments"})]})]})}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx($e,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:O(n.created_at)}),s.jsx("p",{className:"text-sm text-gray-600",children:"Patient Since"})]})]})})]})]}),!m&&l==="prescriptions"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Prescriptions (",c.length,")"]}),s.jsxs("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[s.jsx(kt,{className:"w-4 h-4"}),s.jsx("span",{children:"New Prescription"})]})]}),c.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(pe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No prescriptions found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"This patient doesn't have any prescriptions yet."}),s.jsx("button",{onClick:()=>S(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors",children:"Create First Prescription"})]}):s.jsx("div",{className:"space-y-4",children:c.map(R=>s.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center",children:s.jsx(pe,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Prescription #",R.id.slice(0,8)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[U(R.signed_ts)," • Signed by ",R.signed_by]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Active"}),s.jsx("button",{onClick:()=>_(R),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:s.jsx(us,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-2",children:["Medications (",R.rx_json.medications.length,"):"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[R.rx_json.medications.slice(0,4).map((P,k)=>s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-3 border border-blue-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"font-semibold text-blue-900",children:P.name}),s.jsx("span",{className:"text-sm text-blue-700 bg-blue-100 px-2 py-1 rounded-full",children:P.dosage})]}),s.jsxs("div",{className:"text-sm text-blue-600",children:[s.jsx("p",{children:P.frequency}),P.duration&&s.jsx("p",{className:"text-xs",children:P.duration})]})]},k)),R.rx_json.medications.length>4&&s.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200 flex items-center justify-center",children:s.jsxs("span",{className:"text-sm text-gray-600",children:["+",R.rx_json.medications.length-4," more medications"]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[R.rx_json.instructions&&s.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3 border border-yellow-200",children:[s.jsx("h6",{className:"text-sm font-semibold text-yellow-800 mb-1",children:"Instructions:"}),s.jsx("p",{className:"text-sm text-yellow-700",children:R.rx_json.instructions})]}),R.rx_json.follow_up&&s.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[s.jsx("h6",{className:"text-sm font-semibold text-purple-800 mb-1",children:"Follow-up:"}),s.jsx("p",{className:"text-sm text-purple-700",children:R.rx_json.follow_up})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:["Created ",O(R.created_at)]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>_(R),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"View Full Details"}),s.jsxs("button",{className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-1",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"PDF"})]}),s.jsxs("button",{className:"px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-1",children:[s.jsx(fm,{className:"w-4 h-4"}),s.jsx("span",{children:"Send"})]})]})]})]},R.id))})]}),!m&&l==="appointments"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Appointments (",u.length,")"]}),s.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx(kt,{className:"w-4 h-4"}),s.jsx("span",{children:"Schedule Appointment"})]})]}),u.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ee,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No appointments found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"This patient doesn't have any appointments scheduled."}),s.jsx("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Schedule First Appointment"})]}):s.jsx("div",{className:"space-y-4",children:u.map(R=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:U(R.start_ts)}),s.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[R.channel," • Duration: 30 minutes"]}),R.notes&&s.jsx("p",{className:"text-sm text-gray-700 mt-1",children:R.notes})]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${R.status==="booked"?"bg-blue-100 text-blue-800":R.status==="complete"?"bg-green-100 text-green-800":R.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:R.status})]})},R.id))})]}),!m&&l==="vitals"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Vital Signs"}),n.vitals?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-6 border border-blue-200",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx(Rg,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Height"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[n.vitals.height,"cm"]})]})]}),s.jsxs("p",{className:"text-xs text-blue-600",children:[(n.vitals.height/100*3.28084).toFixed(1)," feet"]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 rounded-xl p-6 border border-green-200",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(Fg,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-800",children:"Weight"}),s.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[n.vitals.weight,"kg"]})]})]}),s.jsxs("p",{className:"text-xs text-green-600",children:["BMI: ",(n.vitals.weight/Math.pow(n.vitals.height/100,2)).toFixed(1)]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-red-100 rounded-xl p-6 border border-red-200",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full flex items-center justify-center",children:s.jsx(Bl,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-red-800",children:"Blood Pressure"}),s.jsx("p",{className:"text-2xl font-bold text-red-900",children:n.vitals.blood_pressure})]})]}),s.jsx("p",{className:"text-xs text-red-600",children:"mmHg"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 rounded-xl p-6 border border-orange-200",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center",children:s.jsx(Ug,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Temperature"}),s.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:[n.vitals.temperature,"°F"]})]})]}),s.jsxs("p",{className:"text-xs text-orange-600",children:[((n.vitals.temperature-32)*5/9).toFixed(1),"°C"]})]})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(zt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No vital signs recorded"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"No vital signs have been recorded for this patient yet."}),s.jsx("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Record Vitals"})]})]})]})]})}),s.jsx(vm,{isOpen:b,onClose:()=>S(!1),onPrescriptionCreated:()=>{w(),S(!1)},preselectedPatient:n}),x&&s.jsx(bm,{isOpen:j,onClose:()=>{p(!1),f(null)},prescription:x})]})},ny=({isOpen:t,onClose:e,onPatientAdded:n,selectedClinicId:r,clinics:a})=>{const{doctor:i}=fe(),[l,o]=N.useState(!1),[c,d]=N.useState(""),[u,h]=N.useState(""),[m,y]=N.useState({firstName:"",lastName:"",mobileNumber:"",clinicId:r||(a.length>0?a[0].id:"")});N.useEffect(()=>{r&&y(j=>({...j,clinicId:r}))},[r]);const b=async j=>{var p;j.preventDefault(),o(!0),d(""),h("");try{if(!i)throw new Error("Doctor information not available");if(!m.clinicId)throw new Error("Please select a clinic");const x={doctor_id:i.id,clinic_id:m.clinicId,first_name:m.firstName,last_name:m.lastName,dob:"1990-01-01",sex:"other",phone:m.mobileNumber,email:`${m.firstName.toLowerCase()}.${m.lastName.toLowerCase()}@example.com`,consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:[]};if(!J){h(`Demo: Patient "${m.firstName} ${m.lastName}" would be added to ${(p=a.find(g=>g.id===m.clinicId))==null?void 0:p.name}!`),setTimeout(()=>{n(),S()},2e3);return}const{error:f}=await B.from("patients").insert([x]);if(f)throw f;h(`Patient "${m.firstName} ${m.lastName}" added successfully!`),n(),setTimeout(()=>{S()},2e3)}catch(x){console.error("Error adding patient:",x),d(x.message||"Failed to add patient")}finally{o(!1)}},S=()=>{y({firstName:"",lastName:"",mobileNumber:"",clinicId:r||(a.length>0?a[0].id:"")}),d(""),h(""),e()};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[s.jsx("div",{className:"p-6 border-b border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:s.jsx(ie,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Patient"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Create a new patient record"})]})]}),s.jsx("button",{onClick:S,className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:s.jsx(Et,{className:"w-5 h-5 text-gray-400"})})]})}),s.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"First Name *"}),s.jsx("input",{type:"text",value:m.firstName,onChange:j=>y({...m,firstName:j.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",placeholder:"John",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Last Name *"}),s.jsx("input",{type:"text",value:m.lastName,onChange:j=>y({...m,lastName:j.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",placeholder:"Smith",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mobile Number *"}),s.jsxs("div",{className:"relative",children:[s.jsx(se,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"tel",value:m.mobileNumber,onChange:j=>y({...m,mobileNumber:j.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",placeholder:"+1 (555) 123-4567",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Clinic *"}),s.jsxs("div",{className:"relative",children:[s.jsx(ge,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsxs("select",{value:m.clinicId,onChange:j=>y({...m,clinicId:j.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors appearance-none",required:!0,children:[s.jsx("option",{value:"",children:"Select a clinic"}),a.map(j=>s.jsx("option",{value:j.id,children:j.name},j.id))]})]})]}),c&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:s.jsx("p",{className:"text-red-800 text-sm font-medium",children:c})}),u&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:s.jsx("p",{className:"text-green-800 text-sm font-medium",children:u})}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:S,className:"px-6 py-3 text-gray-700 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:l,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center space-x-2 font-medium shadow-lg",children:[s.jsx(ys,{className:"w-4 h-4"}),s.jsx("span",{children:l?"Adding...":"Add Patient"})]})]})]})]})}):null},ry=()=>{const{doctor:t,loading:e}=fe(),[n,r]=N.useState(""),[a,i]=N.useState(!1),[l,o]=N.useState(!1),[c,d]=N.useState([]),[u,h]=N.useState(!0),[m,y]=N.useState(null),[b,S]=N.useState(null),{selectedClinic:j,clinics:p}=Fe();N.useEffect(()=>{!e&&t&&x()},[j,t,e]);const x=async()=>{if(!t||!t.id){console.error("Doctor information not available"),h(!1);return}try{if(!J){const U=[{id:"1",doctor_id:t.id,clinic_id:"1",first_name:"John",last_name:"Smith",dob:"1985-06-15",sex:"male",phone:"+1 (555) 123-4567",email:"john.smith@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["diabetes","hypertension"],created_at:"2024-01-15T10:00:00Z",vitals:{height:175,weight:80,blood_pressure:"120/80",temperature:98.6},chief_complaint:"Regular checkup"},{id:"2",doctor_id:t.id,clinic_id:"1",first_name:"Sarah",last_name:"Johnson",dob:"1990-03-22",sex:"female",phone:"+1 (555) 987-6543",email:"sarah.johnson@email.com",consent_flags_json:{messaging:!0,marketing:!0,voice_calls:!0},tags:["allergies"],created_at:"2024-01-20T14:30:00Z",vitals:{height:165,weight:65,blood_pressure:"110/70",temperature:98.4},chief_complaint:"Allergy consultation"},{id:"3",doctor_id:t.id,clinic_id:"2",first_name:"Michael",last_name:"Davis",dob:"1978-11-10",sex:"male",phone:"+1 (555) 456-7890",email:"michael.davis@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["cardiac"],created_at:"2024-02-01T09:15:00Z",vitals:{height:180,weight:85,blood_pressure:"130/85",temperature:98.7},chief_complaint:"Cardiac consultation"},{id:"4",doctor_id:t.id,clinic_id:"2",first_name:"Emma",last_name:"Wilson",dob:"1992-07-25",sex:"female",phone:"+1 (555) 789-0123",email:"emma.wilson@email.com",consent_flags_json:{messaging:!0,marketing:!0,voice_calls:!1},tags:["dermatology"],created_at:"2024-02-05T16:45:00Z",vitals:{height:168,weight:62,blood_pressure:"115/75",temperature:98.2},chief_complaint:"Skin condition"},{id:"5",doctor_id:t.id,clinic_id:"1",first_name:"Robert",last_name:"Chen",dob:"1975-09-18",sex:"male",phone:"+1 (555) 321-0987",email:"robert.chen@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["orthopedic"],created_at:"2024-02-10T11:20:00Z",vitals:{height:172,weight:78,blood_pressure:"125/82",temperature:98.5},chief_complaint:"Knee pain"}],E=j&&j!=="all"?U.filter(D=>D.clinic_id===j):U;d(E),h(!1);return}let _=B.from("patients").select("*").eq("doctor_id",t.id);j&&j!=="all"&&(_=_.eq("clinic_id",j));const{data:M,error:O}=await _.order("created_at",{ascending:!1});if(O)throw O;d(M||[])}catch(_){console.error("Error fetching patients:",_),d([])}finally{h(!1)}},f=c.filter(_=>`${_.first_name} ${_.last_name}`.toLowerCase().includes(n.toLowerCase())||_.phone.includes(n)||_.email.toLowerCase().includes(n.toLowerCase())),g=_=>new Date().getFullYear()-new Date(_).getFullYear(),w=_=>{var M;return((M=p.find(O=>O.id===_))==null?void 0:M.name)||"Unknown Clinic"},v=_=>{S(_),o(!0)};return u||e?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:e?"Authenticating...":"Loading patients..."})]})}):s.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Patients"}),s.jsx("p",{className:"text-gray-600 mt-1",children:j&&j!=="all"?`${f.length} patients at ${w(j)}`:`${f.length} patients across all clinics`})]}),s.jsxs("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 flex items-center space-x-2 font-medium shadow-lg hover:shadow-xl transform hover:scale-105",children:[s.jsx(kt,{className:"w-5 h-5"}),s.jsx("span",{children:"Add Patient"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(ie,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(ee,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"12"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Appointments Today"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx(zt,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"8"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Active Cases"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:s.jsx(ct,{className:"w-5 h-5 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"24"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Messages Sent"})]})]})})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ye,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search patients by name, phone, or email...",value:n,onChange:_=>r(_.target.value),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors"})]}),s.jsxs("button",{className:"px-6 py-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors flex items-center space-x-2 font-medium",children:[s.jsx(kn,{className:"w-4 h-4"}),s.jsx("span",{children:"Filter"})]}),s.jsxs("button",{className:"px-6 py-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors flex items-center space-x-2 font-medium",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Export"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:f.map(_=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200 overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:s.jsx(ie,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:[_.first_name," ",_.last_name]}),s.jsxs("p",{className:"text-sm text-gray-500",children:[g(_.dob)," years • ",_.sex]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>y(m===_.id?null:_.id),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(ri,{className:"w-4 h-4 text-gray-400"})}),m===_.id&&s.jsxs("div",{className:"absolute right-0 top-10 bg-white border border-gray-200 rounded-lg shadow-lg z-10 py-2 w-40",children:[s.jsxs("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-2",children:[s.jsx(kr,{className:"w-4 h-4"}),s.jsx("span",{children:"Edit"})]}),s.jsxs("button",{onClick:()=>{v(_),y(null)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-2",children:[s.jsx(us,{className:"w-4 h-4"}),s.jsx("span",{children:"View Details"})]}),s.jsxs("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-2 text-red-600",children:[s.jsx(Cr,{className:"w-4 h-4"}),s.jsx("span",{children:"Delete"})]})]})]})]}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[s.jsx(se,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:_.phone})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[s.jsx(Ls,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:_.email})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[s.jsx(gs,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:w(_.clinic_id)})]})]}),_.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:_.tags.map(M=>s.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:M},M))}),_.chief_complaint&&s.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("span",{className:"font-medium",children:"Chief Complaint:"})," ",_.chief_complaint]})}),_.vitals&&s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4 text-sm",children:[s.jsxs("div",{className:"bg-green-50 p-2 rounded-lg",children:[s.jsx("p",{className:"text-green-800 font-medium",children:"Height"}),s.jsxs("p",{className:"text-green-600",children:[_.vitals.height,"cm"]})]}),s.jsxs("div",{className:"bg-blue-50 p-2 rounded-lg",children:[s.jsx("p",{className:"text-blue-800 font-medium",children:"Weight"}),s.jsxs("p",{className:"text-blue-600",children:[_.vitals.weight,"kg"]})]}),s.jsxs("div",{className:"bg-purple-50 p-2 rounded-lg",children:[s.jsx("p",{className:"text-purple-800 font-medium",children:"BP"}),s.jsx("p",{className:"text-purple-600",children:_.vitals.blood_pressure})]}),s.jsxs("div",{className:"bg-orange-50 p-2 rounded-lg",children:[s.jsx("p",{className:"text-orange-800 font-medium",children:"Temp"}),s.jsxs("p",{className:"text-orange-600",children:[_.vitals.temperature,"°F"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[_.consent_flags_json.messaging&&s.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{children:"Messaging"})]}),_.consent_flags_json.marketing&&s.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsx("span",{children:"Marketing"})]}),_.consent_flags_json.voice_calls&&s.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),s.jsx("span",{children:"Voice"})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>v(_),className:"flex-1 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"View Details"}),s.jsx("button",{className:"flex-1 px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:"Schedule"}),s.jsx("button",{className:"px-4 py-2 border border-gray-200 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors",children:s.jsx(ct,{className:"w-4 h-4"})})]})]})},_.id))}),f.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(ie,{className:"w-10 h-10 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No patients found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:n?"Try adjusting your search criteria.":"Get started by adding your first patient."}),!n&&s.jsx("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 font-medium shadow-lg",children:"Add Your First Patient"})]}),s.jsx(ny,{isOpen:a,onClose:()=>i(!1),onPatientAdded:x,selectedClinicId:j!=="all"?j:null,clinics:p}),b&&s.jsx(sy,{isOpen:l,onClose:()=>{o(!1),S(null)},patient:b,onPatientUpdated:x})]})},ay=()=>{const[t,e]=N.useState("checking"),[n,r]=N.useState([]),[a,i]=N.useState({totalUsers:0,totalDoctors:0,totalAdmins:0,totalPatients:0,totalAppointments:0,totalClinics:0,totalPrescriptions:0,totalMessages:0,totalVoiceLogs:0,totalComplianceReports:0,dbSize:"0 MB",lastBackup:null}),[l,o]=N.useState({doctors:0,patients:0,appointments:0,clinics:0}),[c,d]=N.useState("");N.useEffect(()=>{u()},[]);const u=async()=>{if(!J){e("error"),d("Supabase not configured");return}try{const{data:j,error:p}=await B.from("doctors").select("count",{count:"exact",head:!0});if(p)throw p;e("connected"),await h()}catch(j){console.error("Database connection error:",j),e("error"),d(j.message||"Failed to connect to database")}},h=async()=>{try{const[j,p,x,f,g,w,v,_,M]=await Promise.all([B.from("doctors").select("*",{count:"exact",head:!0}),B.from("patients").select("*",{count:"exact",head:!0}),B.from("appointments").select("*",{count:"exact",head:!0}),B.from("clinics").select("*",{count:"exact",head:!0}),B.from("prescriptions").select("*",{count:"exact",head:!0}),B.from("messages").select("*",{count:"exact",head:!0}),B.from("voice_agent_logs").select("*",{count:"exact",head:!0}),B.from("compliance_reports").select("*",{count:"exact",head:!0}),B.from("admins").select("*",{count:"exact",head:!0})]);i({totalUsers:(j.count||0)+(M.count||0),totalDoctors:j.count||0,totalAdmins:M.count||0,totalPatients:p.count||0,totalAppointments:x.count||0,totalClinics:f.count||0,totalPrescriptions:g.count||0,totalMessages:w.count||0,totalVoiceLogs:v.count||0,totalComplianceReports:_.count||0,dbSize:"2.4 MB",lastBackup:new Date().toISOString()}),o({doctors:j.count||0,patients:p.count||0,appointments:x.count||0,clinics:f.count||0})}catch(j){console.error("Error fetching stats:",j)}},m=async j=>{try{const{data:p,error:x}=await B.from(j).select("*").limit(1);return{table:j,accessible:!x,error:x==null?void 0:x.message}}catch(p){return{table:j,accessible:!1,error:p.message}}},y=async()=>{e("checking");const j=["doctors","patients","clinics","appointments","prescriptions","messages","admins","subscription_plans"],p=await Promise.all(j.map(m));r(p);const x=p.every(f=>f.accessible);e(x?"connected":"error"),x&&await h()},b=()=>{switch(t){case"connected":return s.jsx(_e,{className:"w-6 h-6 text-green-600"});case"error":return s.jsx(hs,{className:"w-6 h-6 text-red-600"});default:return s.jsx(bn,{className:"w-6 h-6 text-yellow-600"})}},S=()=>{switch(t){case"connected":return"border-green-200 bg-green-50";case"error":return"border-red-200 bg-red-50";default:return"border-yellow-200 bg-yellow-50"}};return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(Nt,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Database Status"}),s.jsx("p",{className:"text-gray-600",children:"Supabase connection and schema verification"})]})]}),s.jsx("div",{className:`border rounded-xl p-6 mb-6 ${S()}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[b(),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:t==="connected"?"Database Connected":t==="error"?"Connection Error":"Checking Connection..."}),s.jsx("p",{className:"text-gray-600",children:t==="connected"?"Successfully connected to Supabase database":t==="error"?c:"Verifying database connection..."})]})]}),s.jsx("button",{onClick:y,disabled:t==="checking",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:t==="checking"?"Testing...":"Test All Tables"})]})}),t==="connected"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Nt,{className:"w-8 h-8 text-indigo-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalUsers}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Users"})]})]})}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ce,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalDoctors}),s.jsx("p",{className:"text-sm text-gray-600",children:"Doctors"})]})]})}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ce,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalPatients}),s.jsx("p",{className:"text-sm text-gray-600",children:"Patients"})]})]})}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ee,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalAppointments}),s.jsx("p",{className:"text-sm text-gray-600",children:"Appointments"})]})]})}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ge,{className:"w-8 h-8 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalClinics}),s.jsx("p",{className:"text-sm text-gray-600",children:"Clinics"})]})]})})]}),t==="connected"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(pe,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalPrescriptions}),s.jsx("p",{className:"text-sm text-gray-600",children:"Prescriptions"})]})]})}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ct,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalMessages}),s.jsx("p",{className:"text-sm text-gray-600",children:"Messages"})]})]})}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(se,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalVoiceLogs}),s.jsx("p",{className:"text-sm text-gray-600",children:"Voice Calls"})]})]})}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ct,{className:"w-8 h-8 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalComplianceReports}),s.jsx("p",{className:"text-sm text-gray-600",children:"Compliance Reports"})]})]})})]}),t==="connected"&&s.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Health & Performance"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(_e,{className:"w-8 h-8 text-green-600"})}),s.jsx("h4",{className:"font-semibold text-gray-900",children:"Database Size"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.dbSize}),s.jsx("p",{className:"text-sm text-gray-600",children:"Current usage"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Nt,{className:"w-8 h-8 text-blue-600"})}),s.jsx("h4",{className:"font-semibold text-gray-900",children:"Last Backup"}),s.jsx("p",{className:"text-sm font-bold text-blue-600",children:a.lastBackup?new Date(a.lastBackup).toLocaleDateString():"Never"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Automated daily"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(zt,{className:"w-8 h-8 text-purple-600"})}),s.jsx("h4",{className:"font-semibold text-gray-900",children:"Uptime"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"99.9%"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Last 30 days"})]})]})]}),n.length>0&&s.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Table Access Test Results"}),s.jsx("div",{className:"space-y-3",children:n.map((j,p)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[j.accessible?s.jsx(_e,{className:"w-5 h-5 text-green-600"}):s.jsx(hs,{className:"w-5 h-5 text-red-600"}),s.jsx("span",{className:"font-medium text-gray-900",children:j.table})]}),s.jsx("span",{className:`text-sm ${j.accessible?"text-green-600":"text-red-600"}`,children:j.accessible?"Accessible":j.error})]},p))})]}),s.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Database Schema Information"}),s.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"✅ 11 Migration files"})," are ready to be applied to your Supabase database"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"✅ Complete schema"})," including doctors, patients, appointments, prescriptions, and more"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"✅ Default users"})," created with proper authentication"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"✅ Row Level Security"})," enabled for all tables"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"✅ Admin system"})," with SuperAdmin capabilities"]})]})]})]})})},iy=()=>{const{doctor:t}=fe(),{clinics:e,loading:n,refreshClinics:r}=Fe(),[a,i]=N.useState(e),[l,o]=N.useState(n),[c,d]=N.useState(""),[u,h]=N.useState(!1),[m,y]=N.useState({});N.useEffect(()=>{i(e),o(n),S()},[e,n,t]);const b=async()=>{if(!t){o(!1);return}try{if(!J||!t){i(e),o(!1);return}const{data:w,error:v}=await B.from("clinics").select("*").eq("doctor_id",t.id).order("created_at",{ascending:!1});if(v)throw v;i(w||[])}catch(w){console.error("Error fetching clinics:",w),i(e)}finally{o(!1)}},S=async()=>{try{if(!J){const O={};a.forEach((U,E)=>{O[U.id]={patients:Math.floor(Math.random()*500)+200,appointments:Math.floor(Math.random()*20)+5}}),y(O);return}if(!t)return;const w=new Date,v=new Date(w.getFullYear(),w.getMonth(),w.getDate()).toISOString(),_=new Date(w.getFullYear(),w.getMonth(),w.getDate()+1).toISOString(),M={};for(const O of a){const[U,E]=await Promise.all([B.from("patients").select("id",{count:"exact",head:!0}).eq("doctor_id",t.id).eq("clinic_id",O.id),B.from("appointments").select("id",{count:"exact",head:!0}).eq("doctor_id",t.id).eq("clinic_id",O.id).gte("start_ts",v).lt("start_ts",_)]);M[O.id]={patients:U.count||0,appointments:E.count||0}}y(M)}catch(w){console.error("Error fetching clinic stats:",w);const v={};a.forEach((_,M)=>{v[_.id]={patients:[847,400,250,180][M]||100,appointments:[23,15,8,5][M]||3}}),y(v)}},j=a.filter(w=>w.name.toLowerCase().includes(c.toLowerCase())||w.city.toLowerCase().includes(c.toLowerCase())||w.address.toLowerCase().includes(c.toLowerCase())),p=w=>{const v=new Date().toLocaleDateString("en-US",{weekday:"long"}).toLowerCase(),_=w[v];return(_==null?void 0:_.open)==="closed"?"Closed today":`Open today: ${_==null?void 0:_.open} - ${_==null?void 0:_.close}`},x=()=>{const w=Object.values(m).reduce((_,M)=>_+M.patients,0),v=Object.values(m).reduce((_,M)=>_+M.appointments,0);return{totalPatients:w,totalAppointments:v}},{totalPatients:f,totalAppointments:g}=x();return l?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading clinics..."})]})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"All Clinics"}),s.jsxs("p",{className:"text-gray-600",children:["Manage your ",a.length," clinic locations • ",f," total patients • ",g," appointments today"]})]}),s.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx(kt,{className:"w-4 h-4"}),s.jsx("span",{children:"Add New Clinic"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ye,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search clinics by name, city, or address...",value:c,onChange:w=>d(w.target.value),className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[s.jsx(kn,{className:"w-4 h-4"}),s.jsx("span",{children:"Filter"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:j.map(w=>{const v=m[w.id]||{patients:0,appointments:0};return s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:s.jsx(ge,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:w.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Created ",new Date(w.created_at).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:s.jsx(kr,{className:"w-4 h-4"})}),s.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(Cr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[s.jsx(gs,{className:"w-4 h-4"}),s.jsxs("span",{className:"text-sm",children:[w.address,", ",w.city,", ",w.state]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[s.jsx(se,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:w.phone})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[s.jsx($e,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:p(w.hours_json)})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ce,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Patients"})]}),s.jsx("p",{className:"text-xl font-bold text-blue-900 mt-1",children:v.patients})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ee,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-green-900",children:"Today"})]}),s.jsx("p",{className:"text-xl font-bold text-green-900 mt-1",children:v.appointments})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"View Details"}),s.jsx("button",{className:"flex-1 px-3 py-2 border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Manage"})]})]})},w.id)})}),j.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ge,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No clinics found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:c?"Try adjusting your search criteria.":"Get started by creating your first clinic."}),!c&&s.jsx("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Your First Clinic"})]}),s.jsx(ym,{isOpen:u,onClose:()=>h(!1),onClinicCreated:()=>{b(),S(),r()}})]})},ly=({isOpen:t,onClose:e,appointment:n,onAppointmentUpdated:r})=>{const{doctor:a}=fe(),{clinics:i}=Fe(),[l,o]=N.useState(!1),[c,d]=N.useState(""),[u,h]=N.useState(""),[m,y]=N.useState([]),[b,S]=N.useState([]),[j,p]=N.useState(""),[x,f]=N.useState(!1),[g,w]=N.useState({patientId:"",clinicId:"",date:"",startTime:"",endTime:"",status:"booked",channel:"manual",notes:""});N.useEffect(()=>{if(t&&n){const E=new Date(n.start_ts),D=new Date(n.end_ts);w({patientId:n.patient_id,clinicId:n.clinic_id,date:E.toISOString().split("T")[0],startTime:E.toTimeString().slice(0,5),endTime:D.toTimeString().slice(0,5),status:n.status,channel:n.channel,notes:n.notes||""}),v()}},[t,n]),N.useEffect(()=>{const E=m.filter(D=>`${D.first_name} ${D.last_name}`.toLowerCase().includes(j.toLowerCase())||D.phone.includes(j)||D.email.toLowerCase().includes(j.toLowerCase()));S(E)},[m,j]),N.useEffect(()=>{const E=m.find(D=>D.id===g.patientId);E&&!j&&p(`${E.first_name} ${E.last_name}`)},[m,g.patientId,j]);const v=async()=>{if(a)try{if(!J){const R=[{id:"1",doctor_id:a.id,clinic_id:"1",first_name:"John",last_name:"Smith",dob:"1985-06-15",sex:"male",phone:"+1 (555) 123-4567",email:"john.smith@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["diabetes","hypertension"],created_at:"2024-01-15T10:00:00Z"},{id:"2",doctor_id:a.id,clinic_id:"1",first_name:"Sarah",last_name:"Johnson",dob:"1990-03-22",sex:"female",phone:"+1 (555) 987-6543",email:"sarah.johnson@email.com",consent_flags_json:{messaging:!0,marketing:!0,voice_calls:!0},tags:["allergies"],created_at:"2024-01-20T14:30:00Z"},{id:"3",doctor_id:a.id,clinic_id:"2",first_name:"Michael",last_name:"Davis",dob:"1978-11-10",sex:"male",phone:"+1 (555) 456-7890",email:"michael.davis@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["cardiac"],created_at:"2024-02-01T09:15:00Z"},{id:"4",doctor_id:a.id,clinic_id:"1",first_name:"Emma",last_name:"Wilson",dob:"1992-07-25",sex:"female",phone:"+1 (555) 789-0123",email:"emma.wilson@email.com",consent_flags_json:{messaging:!0,marketing:!0,voice_calls:!1},tags:["dermatology"],created_at:"2024-02-05T16:45:00Z"},{id:"5",doctor_id:a.id,clinic_id:"1",first_name:"Robert",last_name:"Chen",dob:"1975-09-18",sex:"male",phone:"+1 (555) 321-0987",email:"robert.chen@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["orthopedic"],created_at:"2024-02-10T11:20:00Z"}];y(R),S(R);return}const{data:E,error:D}=await B.from("patients").select("*").eq("doctor_id",a.id).order("first_name",{ascending:!0});if(D)throw D;y(E||[]),S(E||[])}catch(E){console.error("Error fetching patients:",E),y([]),S([])}},_=E=>{w(D=>({...D,patientId:E.id})),p(`${E.first_name} ${E.last_name}`),f(!1)},M=async E=>{E.preventDefault(),o(!0),d(""),h("");try{if(!a)throw new Error("Doctor information not available");if(!g.patientId)throw new Error("Please select a patient");if(!g.clinicId)throw new Error("Please select a clinic");const D=new Date(`${g.date}T${g.startTime}`).toISOString(),R=new Date(`${g.date}T${g.endTime}`).toISOString(),P={patient_id:g.patientId,clinic_id:g.clinicId,start_ts:D,end_ts:R,status:g.status,channel:g.channel,notes:g.notes||null};if(!J){const A=m.find(I=>I.id===g.patientId),z=i.find(I=>I.id===g.clinicId);h(`Demo: Appointment updated for ${A==null?void 0:A.first_name} ${A==null?void 0:A.last_name} at ${z==null?void 0:z.name}!`),setTimeout(()=>{r(),O()},2e3);return}const{error:k}=await B.from("appointments").update(P).eq("id",n.id);if(k)throw k;h("Appointment updated successfully!"),r(),setTimeout(()=>{O()},2e3)}catch(D){console.error("Error updating appointment:",D),d(D.message||"Failed to update appointment")}finally{o(!1)}},O=()=>{p(""),f(!1),d(""),h(""),e()};if(!t)return null;const U=m.find(E=>E.id===g.patientId);return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-orange-500 to-red-600 rounded-xl flex items-center justify-center",children:s.jsx(ee,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Appointment"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Update appointment details"})]})]}),s.jsx("button",{onClick:O,className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:s.jsx(Et,{className:"w-5 h-5 text-gray-400"})})]})}),s.jsxs("form",{onSubmit:M,className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Patient *"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ie,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:j,onChange:E=>{p(E.target.value),f(!0),E.target.value||w(D=>({...D,patientId:""}))},onFocus:()=>f(!0),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",placeholder:"Search patients by name, phone, or email...",required:!0}),s.jsx(Ye,{className:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 transform -translate-y-1/2"})]}),x&&b.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg max-h-60 overflow-y-auto",children:b.map(E=>s.jsx("button",{type:"button",onClick:()=>_(E),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 focus:outline-none focus:bg-blue-50",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(ie,{className:"w-4 h-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900",children:[E.first_name," ",E.last_name]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[E.phone," • ",E.email]})]})]})},E.id))})]}),U&&s.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(ie,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-blue-900",children:[U.first_name," ",U.last_name]}),s.jsxs("p",{className:"text-sm text-blue-700",children:[U.phone," • ",U.email]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Clinic *"}),s.jsxs("div",{className:"relative",children:[s.jsx(ge,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsxs("select",{value:g.clinicId,onChange:E=>w({...g,clinicId:E.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors appearance-none",required:!0,children:[s.jsx("option",{value:"",children:"Select a clinic"}),i.map(E=>s.jsx("option",{value:E.id,children:E.name},E.id))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status *"}),s.jsxs("select",{value:g.status,onChange:E=>w({...g,status:E.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors appearance-none",required:!0,children:[s.jsx("option",{value:"booked",children:"Scheduled"}),s.jsx("option",{value:"complete",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"}),s.jsx("option",{value:"no_show",children:"No Show"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date *"}),s.jsxs("div",{className:"relative",children:[s.jsx(ee,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"date",value:g.date,onChange:E=>w({...g,date:E.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Start Time *"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"time",value:g.startTime,onChange:E=>w({...g,startTime:E.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"End Time *"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"time",value:g.endTime,onChange:E=>w({...g,endTime:E.target.value}),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",required:!0})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Appointment Type *"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("button",{type:"button",onClick:()=>w({...g,channel:"voice"}),className:`p-4 rounded-xl border-2 transition-all duration-200 ${g.channel==="voice"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(se,{className:"w-6 h-6 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium",children:"Phone Call"})]}),s.jsxs("button",{type:"button",onClick:()=>w({...g,channel:"web"}),className:`p-4 rounded-xl border-2 transition-all duration-200 ${g.channel==="web"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(Er,{className:"w-6 h-6 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium",children:"Video Call"})]}),s.jsxs("button",{type:"button",onClick:()=>w({...g,channel:"manual"}),className:`p-4 rounded-xl border-2 transition-all duration-200 ${g.channel==="manual"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx(gs,{className:"w-6 h-6 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium",children:"In-Person"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:g.notes,onChange:E=>w({...g,notes:E.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors resize-none",placeholder:"Add any notes about this appointment..."})]}),c&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:s.jsx("p",{className:"text-red-800 text-sm font-medium",children:c})}),u&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:s.jsx("p",{className:"text-green-800 text-sm font-medium",children:u})}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:O,className:"px-6 py-3 text-gray-700 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:l,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-xl hover:from-orange-600 hover:to-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center space-x-2 font-medium shadow-lg",children:[s.jsx(ys,{className:"w-4 h-4"}),s.jsx("span",{children:l?"Updating...":"Update Appointment"})]})]})]})]})})},oy=()=>{var E;const{doctor:t}=fe(),{selectedClinic:e,clinics:n}=Fe(),[r,a]=N.useState([]),[i,l]=N.useState(!0),[o,c]=N.useState(""),[d,u]=N.useState("all"),[h,m]=N.useState(!1),[y,b]=N.useState(!1),[S,j]=N.useState(null),[p,x]=N.useState(null);N.useEffect(()=>{t&&f()},[t,e]);const f=async()=>{if(t)try{if(!J){const A=[{id:"1",doctor_id:t.id,clinic_id:"1",patient_id:"1",start_ts:new Date(Date.now()+72e5).toISOString(),end_ts:new Date(Date.now()+9e6).toISOString(),status:"booked",channel:"voice",notes:"Follow-up consultation for diabetes management",created_at:new Date().toISOString(),patient:{id:"1",doctor_id:t.id,clinic_id:"1",first_name:"John",last_name:"Smith",dob:"1985-06-15",sex:"male",phone:"+1 (555) 123-4567",email:"john.smith@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["diabetes","hypertension"],created_at:"2024-01-15T10:00:00Z"},clinic_name:"Main Medical Center"},{id:"2",doctor_id:t.id,clinic_id:"1",patient_id:"2",start_ts:new Date(Date.now()+144e5).toISOString(),end_ts:new Date(Date.now()+162e5).toISOString(),status:"booked",channel:"web",notes:"Regular checkup and blood pressure monitoring",created_at:new Date().toISOString(),patient:{id:"2",doctor_id:t.id,clinic_id:"1",first_name:"Sarah",last_name:"Johnson",dob:"1990-03-22",sex:"female",phone:"+1 (555) 987-6543",email:"sarah.johnson@email.com",consent_flags_json:{messaging:!0,marketing:!0,voice_calls:!0},tags:["allergies"],created_at:"2024-01-20T14:30:00Z"},clinic_name:"Main Medical Center"},{id:"3",doctor_id:t.id,clinic_id:"2",patient_id:"3",start_ts:new Date(Date.now()+216e5).toISOString(),end_ts:new Date(Date.now()+234e5).toISOString(),status:"complete",channel:"manual",notes:"New patient consultation - cardiac evaluation",created_at:new Date().toISOString(),patient:{id:"3",doctor_id:t.id,clinic_id:"2",first_name:"Michael",last_name:"Davis",dob:"1978-11-10",sex:"male",phone:"+1 (555) 456-7890",email:"michael.davis@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["cardiac"],created_at:"2024-02-01T09:15:00Z"},clinic_name:"Downtown Clinic"},{id:"4",doctor_id:t.id,clinic_id:"1",patient_id:"4",start_ts:new Date(Date.now()-72e5).toISOString(),end_ts:new Date(Date.now()-54e5).toISOString(),status:"cancelled",channel:"voice",notes:"Patient cancelled due to emergency",created_at:new Date().toISOString(),patient:{id:"4",doctor_id:t.id,clinic_id:"1",first_name:"Emma",last_name:"Wilson",dob:"1992-07-25",sex:"female",phone:"+1 (555) 789-0123",email:"emma.wilson@email.com",consent_flags_json:{messaging:!0,marketing:!0,voice_calls:!1},tags:["dermatology"],created_at:"2024-02-05T16:45:00Z"},clinic_name:"Main Medical Center"}],z=e&&e!=="all"?A.filter(I=>I.clinic_id===e):A;a(z),l(!1);return}let D=B.from("appointments").select(`
          *,
          patients:patient_id (
            id,
            first_name,
            last_name,
            phone,
            email,
            dob,
            sex,
            tags
          ),
          clinics:clinic_id (
            name
          )
        `).eq("doctor_id",t.id);e&&e!=="all"&&(D=D.eq("clinic_id",e));const{data:R,error:P}=await D.order("start_ts",{ascending:!0});if(P)throw P;const k=(R||[]).map(A=>{var z;return{...A,patient:A.patients,clinic_name:(z=A.clinics)==null?void 0:z.name}});a(k)}catch(D){console.error("Error fetching appointments:",D),a([])}finally{l(!1)}},g=async D=>{if(confirm("Are you sure you want to delete this appointment?"))try{if(!J){a(P=>P.filter(k=>k.id!==D));return}const{error:R}=await B.from("appointments").delete().eq("id",D);if(R)throw R;a(P=>P.filter(k=>k.id!==D))}catch(R){console.error("Error deleting appointment:",R),alert("Failed to delete appointment")}},w=D=>{x(D),b(!0)},v=r.filter(D=>{var k;const R=D.patient&&(`${D.patient.first_name} ${D.patient.last_name}`.toLowerCase().includes(o.toLowerCase())||D.patient.phone.includes(o)||((k=D.notes)==null?void 0:k.toLowerCase().includes(o.toLowerCase()))),P=d==="all"||D.status===d;return R&&P}),_=D=>{switch(D){case"booked":return s.jsx(_e,{className:"w-4 h-4 text-blue-600"});case"complete":return s.jsx(_e,{className:"w-4 h-4 text-green-600"});case"cancelled":return s.jsx(hs,{className:"w-4 h-4 text-red-600"});case"no_show":return s.jsx(bn,{className:"w-4 h-4 text-orange-600"});default:return s.jsx($e,{className:"w-4 h-4 text-gray-600"})}},M=D=>{switch(D){case"booked":return"bg-blue-100 text-blue-800";case"complete":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"no_show":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},O=D=>{switch(D){case"voice":return s.jsx(se,{className:"w-4 h-4"});case"web":return s.jsx(Er,{className:"w-4 h-4"});default:return s.jsx(ee,{className:"w-4 h-4"})}},U=D=>{const R=new Date(D);return{date:R.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),time:R.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}};return i?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading appointments..."})]})}):s.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Appointments"}),s.jsx("p",{className:"text-gray-600 mt-1",children:e&&e!=="all"?`${v.length} appointments at ${(E=n.find(D=>D.id===e))==null?void 0:E.name}`:`${v.length} appointments across all clinics`})]}),s.jsxs("button",{onClick:()=>m(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 flex items-center space-x-2 font-medium shadow-lg hover:shadow-xl transform hover:scale-105",children:[s.jsx(kt,{className:"w-5 h-5"}),s.jsx("span",{children:"Schedule Appointment"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(ee,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(D=>D.status==="booked").length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Scheduled"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(_e,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(D=>D.status==="complete").length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:s.jsx(hs,{className:"w-5 h-5 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(D=>D.status==="cancelled").length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Cancelled"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:s.jsx(bn,{className:"w-5 h-5 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(D=>D.status==="no_show").length}),s.jsx("p",{className:"text-sm text-gray-600",children:"No Show"})]})]})})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ye,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search appointments by patient name, phone, or notes...",value:o,onChange:D=>c(D.target.value),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors"})]}),s.jsxs("select",{value:d,onChange:D=>u(D.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"booked",children:"Scheduled"}),s.jsx("option",{value:"complete",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"}),s.jsx("option",{value:"no_show",children:"No Show"})]}),s.jsxs("button",{className:"px-6 py-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors flex items-center space-x-2 font-medium",children:[s.jsx(kn,{className:"w-4 h-4"}),s.jsx("span",{children:"More Filters"})]})]})}),s.jsx("div",{className:"space-y-4",children:v.map(D=>{var k;const R=U(D.start_ts),P=U(D.end_ts);return s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200 overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:s.jsx(ie,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:D.patient?`${D.patient.first_name} ${D.patient.last_name}`:"Unknown Patient"}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(se,{className:"w-4 h-4"}),s.jsx("span",{children:(k=D.patient)==null?void 0:k.phone})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(gs,{className:"w-4 h-4"}),s.jsx("span",{children:D.clinic_name})]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${M(D.status)}`,children:[_(D.status),s.jsx("span",{className:"capitalize",children:D.status.replace("_"," ")})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>j(S===D.id?null:D.id),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(ri,{className:"w-4 h-4 text-gray-400"})}),S===D.id&&s.jsxs("div",{className:"absolute right-0 top-10 bg-white border border-gray-200 rounded-lg shadow-lg z-10 py-2 w-40",children:[s.jsxs("button",{onClick:()=>{w(D),j(null)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-2",children:[s.jsx(kr,{className:"w-4 h-4"}),s.jsx("span",{children:"Edit"})]}),s.jsxs("button",{onClick:()=>{g(D.id),j(null)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-2 text-red-600",children:[s.jsx(Cr,{className:"w-4 h-4"}),s.jsx("span",{children:"Delete"})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx(ee,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Date & Time"})]}),s.jsx("p",{className:"text-blue-800 font-semibold",children:R.date}),s.jsxs("p",{className:"text-blue-600 text-sm",children:[R.time," - ",P.time]})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[O(D.channel),s.jsx("span",{className:"text-sm font-medium text-green-900",children:"Channel"})]}),s.jsx("p",{className:"text-green-800 font-semibold capitalize",children:D.channel}),s.jsx("p",{className:"text-green-600 text-sm",children:D.channel==="voice"?"Phone Call":D.channel==="web"?"Video Call":"In-Person"})]}),s.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx(ge,{className:"w-4 h-4 text-purple-600"}),s.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Location"})]}),s.jsx("p",{className:"text-purple-800 font-semibold",children:D.clinic_name}),s.jsx("p",{className:"text-purple-600 text-sm",children:"Clinic Location"})]})]}),D.notes&&s.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("span",{className:"font-medium",children:"Notes:"})," ",D.notes]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:["Created ",new Date(D.created_at).toLocaleDateString()]}),s.jsxs("div",{className:"flex space-x-2",children:[D.status==="booked"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:"Start Appointment"}),s.jsx("button",{className:"px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors",children:"Reschedule"})]}),s.jsx("button",{className:"px-4 py-2 border border-gray-200 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"View Details"})]})]})]})},D.id)})}),v.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(ee,{className:"w-10 h-10 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No appointments found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:o||d!=="all"?"Try adjusting your search criteria or filters.":"Get started by scheduling your first appointment."}),!o&&d==="all"&&s.jsx("button",{onClick:()=>m(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 font-medium shadow-lg",children:"Schedule First Appointment"})]}),s.jsx(gm,{isOpen:h,onClose:()=>m(!1),onAppointmentCreated:f}),p&&s.jsx(ly,{isOpen:y,onClose:()=>{b(!1),x(null)},appointment:p,onAppointmentUpdated:f})]})},cy=()=>{var I;const{doctor:t}=fe(),{selectedClinic:e,clinics:n}=Fe(),[r,a]=N.useState([]),[i,l]=N.useState(!0),[o,c]=N.useState(""),[d,u]=N.useState(!1),[h,m]=N.useState(!1),[y,b]=N.useState(null),[S,j]=N.useState(null),[p,x]=N.useState(null),[f,g]=N.useState(null),[w,v]=N.useState(null);N.useEffect(()=>{t&&_()},[t,e]);const _=async()=>{if(t)try{if(!J){const L=[{id:"1",doctor_id:t.id,clinic_id:"1",patient_id:"1",rx_json:{medications:[{name:"Metformin",dosage:"500mg",frequency:"Twice daily",duration:"30 days",notes:"Take with meals"},{name:"Lisinopril",dosage:"10mg",frequency:"Once daily",duration:"30 days",notes:"Take in the morning"}],instructions:"Monitor blood sugar levels daily. Follow up in 2 weeks.",follow_up:"2 weeks"},pdf_url:null,signed_by:t.name,signed_ts:new Date().toISOString(),created_at:"2024-01-15T10:00:00Z",patient:{id:"1",doctor_id:t.id,clinic_id:"1",first_name:"John",last_name:"Smith",dob:"1985-06-15",sex:"male",phone:"+1 (555) 123-4567",email:"john.smith@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["diabetes","hypertension"],created_at:"2024-01-15T10:00:00Z"},clinic_name:"Main Medical Center"},{id:"2",doctor_id:t.id,clinic_id:"1",patient_id:"2",rx_json:{medications:[{name:"Cetirizine",dosage:"10mg",frequency:"Once daily",duration:"14 days",notes:"Take at bedtime"}],instructions:"Avoid known allergens. Use as needed for symptoms.",follow_up:"1 month"},pdf_url:null,signed_by:t.name,signed_ts:new Date(Date.now()-72e5).toISOString(),created_at:"2024-01-20T14:30:00Z",patient:{id:"2",doctor_id:t.id,clinic_id:"1",first_name:"Sarah",last_name:"Johnson",dob:"1990-03-22",sex:"female",phone:"+1 (555) 987-6543",email:"sarah.johnson@email.com",consent_flags_json:{messaging:!0,marketing:!0,voice_calls:!0},tags:["allergies"],created_at:"2024-01-20T14:30:00Z"},clinic_name:"Main Medical Center"}],V=e&&e!=="all"?L.filter(K=>K.clinic_id===e):L;a(V),l(!1);return}let C=B.from("prescriptions").select(`
          *,
          patients:patient_id (
            id,
            first_name,
            last_name,
            phone,
            email,
            dob,
            sex,
            tags
          ),
          clinics:clinic_id (
            name
          )
        `).eq("doctor_id",t.id);e&&e!=="all"&&(C=C.eq("clinic_id",e));const{data:$,error:q}=await C.order("created_at",{ascending:!1});if(q)throw q;const T=($||[]).map(L=>{var V;return{...L,patient:L.patients,clinic_name:(V=L.clinics)==null?void 0:V.name}});a(T)}catch(C){console.error("Error fetching prescriptions:",C),a([])}finally{l(!1)}},M=C=>{j(C),m(!0)},O=async C=>new Promise($=>{setTimeout(()=>{const q=`https://example.com/prescriptions/${C.id}.pdf`;$(q)},2e3)}),U=async(C,$)=>new Promise(q=>{setTimeout(()=>{var T;console.log(`Email sent to ${(T=C.patient)==null?void 0:T.email} with PDF: ${$}`),q()},1500)}),E=async C=>new Promise($=>{setTimeout(()=>{var q;console.log(`SMS sent to ${(q=C.patient)==null?void 0:q.phone} for prescription: ${C.id}`),$()},1e3)}),D=async C=>{try{x(C.id);const $=await O(C),q=document.createElement("a");q.href=$,q.download=`prescription-${C.id}.pdf`,document.body.appendChild(q),q.click(),document.body.removeChild(q)}catch($){console.error("Error generating PDF:",$),alert("Failed to generate PDF")}finally{x(null)}},R=async C=>{try{g(C.id);const $=await O(C);await U(C,$),alert("Prescription sent via email successfully!")}catch($){console.error("Error sending email:",$),alert("Failed to send email")}finally{g(null)}},P=async C=>{try{v(C.id),await E(C),alert("Prescription notification sent via SMS successfully!")}catch($){console.error("Error sending SMS:",$),alert("Failed to send SMS")}finally{v(null)}},k=async C=>{if(confirm("Are you sure you want to delete this prescription?"))try{if(!J){a(q=>q.filter(T=>T.id!==C));return}const{error:$}=await B.from("prescriptions").delete().eq("id",C);if($)throw $;a(q=>q.filter(T=>T.id!==C))}catch($){console.error("Error deleting prescription:",$),alert("Failed to delete prescription")}},A=r.filter(C=>C.patient&&(`${C.patient.first_name} ${C.patient.last_name}`.toLowerCase().includes(o.toLowerCase())||C.patient.phone.includes(o)||C.rx_json.medications.some(q=>q.name.toLowerCase().includes(o.toLowerCase())))),z=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return i?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading prescriptions..."})]})}):s.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Prescriptions"}),s.jsx("p",{className:"text-gray-600 mt-1",children:e&&e!=="all"?`${A.length} prescriptions at ${(I=n.find(C=>C.id===e))==null?void 0:I.name}`:`${A.length} prescriptions across all clinics`})]}),s.jsxs("button",{onClick:()=>u(!0),className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-200 flex items-center space-x-2 font-medium shadow-lg hover:shadow-xl transform hover:scale-105",children:[s.jsx(kt,{className:"w-5 h-5"}),s.jsx("span",{children:"New Prescription"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(pe,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Prescriptions"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(ee,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(C=>{const $=new Date().toDateString();return new Date(C.created_at).toDateString()===$}).length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Today"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx(fm,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(C=>C.pdf_url).length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Sent"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:s.jsx(ie,{className:"w-5 h-5 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:new Set(r.map(C=>C.patient_id)).size}),s.jsx("p",{className:"text-sm text-gray-600",children:"Patients"})]})]})})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ye,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search prescriptions by patient name, phone, or medication...",value:o,onChange:C=>c(C.target.value),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors"})]}),s.jsxs("button",{className:"px-6 py-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors flex items-center space-x-2 font-medium",children:[s.jsx(kn,{className:"w-4 h-4"}),s.jsx("span",{children:"Filter"})]}),s.jsxs("button",{className:"px-6 py-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors flex items-center space-x-2 font-medium",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Export"})]})]})}),s.jsx("div",{className:"space-y-4",children:A.map(C=>{var $;return s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200 overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center",children:s.jsx(pe,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:C.patient?`${C.patient.first_name} ${C.patient.last_name}`:"Unknown Patient"}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(se,{className:"w-4 h-4"}),s.jsx("span",{children:($=C.patient)==null?void 0:$.phone})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ge,{className:"w-4 h-4"}),s.jsx("span",{children:C.clinic_name})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ee,{className:"w-4 h-4"}),s.jsx("span",{children:z(C.signed_ts)})]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Signed"}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>b(y===C.id?null:C.id),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(ri,{className:"w-4 h-4 text-gray-400"})}),y===C.id&&s.jsxs("div",{className:"absolute right-0 top-10 bg-white border border-gray-200 rounded-lg shadow-lg z-10 py-2 w-40",children:[s.jsxs("button",{onClick:()=>{M(C),b(null)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-2",children:[s.jsx(us,{className:"w-4 h-4"}),s.jsx("span",{children:"View"})]}),s.jsxs("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-2",children:[s.jsx(kr,{className:"w-4 h-4"}),s.jsx("span",{children:"Edit"})]}),s.jsxs("button",{onClick:()=>{k(C.id),b(null)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-2 text-red-600",children:[s.jsx(Cr,{className:"w-4 h-4"}),s.jsx("span",{children:"Delete"})]})]})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Medications:"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:C.rx_json.medications.map((q,T)=>s.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"font-semibold text-blue-900",children:q.name}),s.jsx("span",{className:"text-sm text-blue-700",children:q.dosage})]}),s.jsxs("div",{className:"text-sm text-blue-600",children:[s.jsxs("p",{children:[q.frequency," • ",q.duration]}),q.notes&&s.jsx("p",{className:"mt-1 italic",children:q.notes})]})]},T))})]}),C.rx_json.instructions&&s.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Instructions:"}),s.jsx("p",{className:"text-sm text-gray-600",children:C.rx_json.instructions})]}),C.rx_json.follow_up&&s.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-semibold text-yellow-800 mb-1",children:"Follow-up:"}),s.jsx("p",{className:"text-sm text-yellow-700",children:C.rx_json.follow_up})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:["Signed by ",C.signed_by," • Created ",z(C.created_at)]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>M(C),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"View Details"}),s.jsxs("button",{onClick:()=>D(C),disabled:p===C.id,className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-1 disabled:opacity-50",children:[p===C.id?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:p===C.id?"Generating...":"PDF"})]}),s.jsxs("button",{onClick:()=>R(C),disabled:f===C.id,className:"px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-1 disabled:opacity-50",children:[f===C.id?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(Ls,{className:"w-4 h-4"}),s.jsx("span",{children:f===C.id?"Sending...":"Email"})]}),s.jsxs("button",{onClick:()=>P(C),disabled:w===C.id,className:"px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors flex items-center space-x-1 disabled:opacity-50",children:[w===C.id?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(se,{className:"w-4 h-4"}),s.jsx("span",{children:w===C.id?"Sending...":"SMS"})]})]})]})]})},C.id)})}),A.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(pe,{className:"w-10 h-10 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No prescriptions found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:o?"Try adjusting your search criteria.":"Get started by creating your first prescription."}),!o&&s.jsx("button",{onClick:()=>u(!0),className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-200 font-medium shadow-lg",children:"Create First Prescription"})]}),s.jsx(vm,{isOpen:d,onClose:()=>u(!1),onPrescriptionCreated:_}),S&&s.jsx(bm,{isOpen:h,onClose:()=>{m(!1),j(null)},prescription:S})]})},dy=()=>{const{doctor:t}=fe(),{selectedClinic:e,clinics:n}=Fe(),[r,a]=N.useState([]),[i,l]=N.useState(!0),[o,c]=N.useState(""),[d,u]=N.useState("all"),[h,m]=N.useState("all"),[y,b]=N.useState(null),[S,j]=N.useState(null),[p,x]=N.useState({isActive:!0,callsToday:0,avgDuration:0,successRate:0});N.useEffect(()=>{t&&(f(),g())},[t,e]);const f=async()=>{if(t)try{if(!J){const I=[{id:"1",doctor_id:t.id,patient_id:"1",call_id:"call_001",phone_number:"+1 (555) 123-4567",call_type:"inbound",status:"completed",duration_seconds:180,transcript:"Patient called to schedule appointment for diabetes follow-up. AI successfully booked appointment for next Tuesday at 2:00 PM. Patient confirmed availability and provided insurance information.",ai_confidence_score:.95,actions_taken:[{action:"schedule_appointment",timestamp:"2024-01-15T10:30:00Z",details:"Booked for Jan 23, 2:00 PM"},{action:"verify_insurance",timestamp:"2024-01-15T10:31:00Z",details:"Insurance verified"}],created_at:new Date(Date.now()-72e5).toISOString(),ended_at:new Date(Date.now()-72e5+18e4).toISOString(),patient:{id:"1",doctor_id:t.id,clinic_id:"1",first_name:"John",last_name:"Smith",dob:"1985-06-15",sex:"male",phone:"+1 (555) 123-4567",email:"john.smith@email.com",consent_flags_json:{messaging:!0,marketing:!1,voice_calls:!0},tags:["diabetes","hypertension"],created_at:"2024-01-15T10:00:00Z"}},{id:"2",doctor_id:t.id,patient_id:"2",call_id:"call_002",phone_number:"+1 (555) 987-6543",call_type:"outbound",status:"completed",duration_seconds:120,transcript:"Automated reminder call for upcoming appointment tomorrow at 10 AM. Patient confirmed attendance and requested parking information.",ai_confidence_score:.88,actions_taken:[{action:"appointment_reminder",timestamp:"2024-01-15T14:00:00Z",details:"Reminder sent"},{action:"provide_directions",timestamp:"2024-01-15T14:01:00Z",details:"Parking info provided"}],created_at:new Date(Date.now()-144e5).toISOString(),ended_at:new Date(Date.now()-144e5+12e4).toISOString(),patient:{id:"2",doctor_id:t.id,clinic_id:"1",first_name:"Sarah",last_name:"Johnson",dob:"1990-03-22",sex:"female",phone:"+1 (555) 987-6543",email:"sarah.johnson@email.com",consent_flags_json:{messaging:!0,marketing:!0,voice_calls:!0},tags:["allergies"],created_at:"2024-01-20T14:30:00Z"}},{id:"3",doctor_id:t.id,patient_id:null,call_id:"call_003",phone_number:"+1 (555) 456-7890",call_type:"inbound",status:"missed",duration_seconds:0,transcript:null,ai_confidence_score:null,actions_taken:[],created_at:new Date(Date.now()-216e5).toISOString(),ended_at:null},{id:"4",doctor_id:t.id,patient_id:"3",call_id:"call_004",phone_number:"+1 (555) 789-0123",call_type:"inbound",status:"completed",duration_seconds:240,transcript:"Patient called with questions about medication side effects. AI provided general information and scheduled follow-up consultation with doctor.",ai_confidence_score:.92,actions_taken:[{action:"provide_medication_info",timestamp:"2024-01-15T16:00:00Z",details:"Side effects explained"},{action:"schedule_consultation",timestamp:"2024-01-15T16:02:00Z",details:"Follow-up scheduled"}],created_at:new Date(Date.now()-288e5).toISOString(),ended_at:new Date(Date.now()-288e5+24e4).toISOString(),patient:{id:"3",doctor_id:t.id,clinic_id:"2",first_name:"Emma",last_name:"Wilson",dob:"1992-07-25",sex:"female",phone:"+1 (555) 789-0123",email:"emma.wilson@email.com",consent_flags_json:{messaging:!0,marketing:!0,voice_calls:!1},tags:["dermatology"],created_at:"2024-02-05T16:45:00Z"}},{id:"5",doctor_id:t.id,patient_id:"4",call_id:"call_005",phone_number:"+1 (555) 321-0987",call_type:"outbound",status:"failed",duration_seconds:0,transcript:null,ai_confidence_score:null,actions_taken:[],created_at:new Date(Date.now()-36e6).toISOString(),ended_at:null}],C=e&&e!=="all"?I.filter($=>{var q;return((q=$.patient)==null?void 0:q.clinic_id)===e}):I;a(C),l(!1);return}let P=B.from("voice_agent_logs").select(`
          *,
          patients:patient_id (
            id,
            first_name,
            last_name,
            phone,
            email,
            clinic_id,
            tags
          )
        `).eq("doctor_id",t.id);e&&e!=="all"&&(P=P.eq("patients.clinic_id",e));const{data:k,error:A}=await P.order("created_at",{ascending:!1});if(A)throw A;const z=(k||[]).map(I=>({...I,patient:I.patients}));a(z)}catch(P){console.error("Error fetching voice logs:",P),a([])}finally{l(!1)}},g=async()=>{try{if(!J){x({isActive:!0,callsToday:23,avgDuration:165,successRate:89});return}const P=new Date().toISOString().split("T")[0],{data:k}=await B.from("voice_agent_logs").select("*").eq("doctor_id",t==null?void 0:t.id).gte("created_at",`${P}T00:00:00`),A=(k==null?void 0:k.length)||0,z=(k==null?void 0:k.filter($=>$.status==="completed"))||[],I=z.length>0?Math.round(z.reduce(($,q)=>$+q.duration_seconds,0)/z.length):0,C=A>0?Math.round(z.length/A*100):0;x({isActive:!0,callsToday:A,avgDuration:I,successRate:C})}catch(P){console.error("Error fetching agent stats:",P)}},w=r.filter(P=>{const k=P.patient&&(`${P.patient.first_name} ${P.patient.last_name}`.toLowerCase().includes(o.toLowerCase())||P.phone_number.includes(o)||P.call_id.toLowerCase().includes(o.toLowerCase()))||P.phone_number.includes(o)||P.call_id.toLowerCase().includes(o.toLowerCase()),A=d==="all"||P.status===d,z=h==="all"||P.call_type===h;return k&&A&&z}),v=P=>{switch(P){case"completed":return s.jsx(_e,{className:"w-4 h-4 text-green-600"});case"failed":return s.jsx(hs,{className:"w-4 h-4 text-red-600"});case"missed":return s.jsx(bn,{className:"w-4 h-4 text-orange-600"});default:return s.jsx($e,{className:"w-4 h-4 text-gray-600"})}},_=P=>{switch(P){case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"missed":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},M=P=>P==="inbound"?s.jsx(Mg,{className:"w-4 h-4"}):s.jsx(Og,{className:"w-4 h-4"}),O=P=>P==="inbound"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800",U=P=>{const k=Math.floor(P/60),A=P%60;return`${k}:${A.toString().padStart(2,"0")}`},E=P=>new Date(P).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),D=P=>{S===P?j(null):(j(P),setTimeout(()=>j(null),3e3))},R=P=>P>=.9?"text-green-600 bg-green-100":P>=.7?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100";return i?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading voice agent logs..."})]})}):s.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Voice Agent"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"AI-powered voice assistant call logs and management"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:`flex items-center space-x-2 px-4 py-2 rounded-xl border ${p.isActive?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${p.isActive?"bg-green-500 animate-pulse":"bg-red-500"}`}),s.jsx("span",{className:"font-medium",children:p.isActive?"Agent Active":"Agent Offline"})]}),s.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx(Ko,{className:"w-4 h-4"}),s.jsx("span",{children:"Configure Agent"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(se,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.callsToday}),s.jsx("p",{className:"text-sm text-gray-600",children:"Calls Today"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx($e,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U(p.avgDuration)}),s.jsx("p",{className:"text-sm text-gray-600",children:"Avg Duration"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx(Go,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[p.successRate,"%"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Success Rate"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:s.jsx(os,{className:"w-5 h-5 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.filter(P=>P.status==="completed").length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Successful Calls"})]})]})})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ye,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search by patient name, phone number, or call ID...",value:o,onChange:P=>c(P.target.value),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors"})]}),s.jsxs("select",{value:d,onChange:P=>u(P.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"missed",children:"Missed"}),s.jsx("option",{value:"failed",children:"Failed"})]}),s.jsxs("select",{value:h,onChange:P=>m(P.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"inbound",children:"Inbound"}),s.jsx("option",{value:"outbound",children:"Outbound"})]}),s.jsxs("button",{className:"px-6 py-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors flex items-center space-x-2 font-medium",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Export"})]})]})}),s.jsx("div",{className:"space-y-4",children:w.map(P=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200 overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:[M(P.call_type),s.jsx("span",{className:"text-white",children:M(P.call_type)})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:P.patient?`${P.patient.first_name} ${P.patient.last_name}`:"Unknown Caller"}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[s.jsx("span",{children:P.phone_number}),s.jsxs("span",{children:["Call ID: ",P.call_id]}),s.jsx("span",{children:E(P.created_at)})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${O(P.call_type)}`,children:[M(P.call_type),s.jsx("span",{className:"capitalize",children:P.call_type})]}),s.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${_(P.status)}`,children:[v(P.status),s.jsx("span",{className:"capitalize",children:P.status})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>b(y===P.id?null:P.id),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(ri,{className:"w-4 h-4 text-gray-400"})}),y===P.id&&s.jsxs("div",{className:"absolute right-0 top-10 bg-white border border-gray-200 rounded-lg shadow-lg z-10 py-2 w-40",children:[s.jsxs("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-2",children:[s.jsx(us,{className:"w-4 h-4"}),s.jsx("span",{children:"View Details"})]}),s.jsxs("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-2",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Download"})]}),s.jsxs("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-2",children:[s.jsx(ct,{className:"w-4 h-4"}),s.jsx("span",{children:"Follow Up"})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx($e,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Duration"})]}),s.jsx("p",{className:"text-blue-800 font-semibold",children:P.duration_seconds>0?U(P.duration_seconds):"N/A"})]}),P.ai_confidence_score&&s.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx(os,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-green-900",children:"AI Confidence"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${P.ai_confidence_score*100}%`}})}),s.jsxs("span",{className:`text-sm font-semibold px-2 py-1 rounded-full ${R(P.ai_confidence_score)}`,children:[(P.ai_confidence_score*100).toFixed(0),"%"]})]})]}),s.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx(zt,{className:"w-4 h-4 text-purple-600"}),s.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Actions Taken"})]}),s.jsx("p",{className:"text-purple-800 font-semibold",children:P.actions_taken.length})]})]}),P.actions_taken.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Actions Performed:"}),s.jsxs("div",{className:"space-y-2",children:[P.actions_taken.slice(0,3).map((k,A)=>s.jsxs("div",{className:"bg-indigo-50 rounded-lg p-3 border border-indigo-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-indigo-900 capitalize",children:k.action.replace("_"," ")}),s.jsx("span",{className:"text-xs text-indigo-600",children:new Date(k.timestamp).toLocaleTimeString()})]}),k.details&&s.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:k.details})]},A)),P.actions_taken.length>3&&s.jsx("div",{className:"text-center",children:s.jsxs("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:["+",P.actions_taken.length-3," more actions"]})})]})]}),P.transcript&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center space-x-2",children:[s.jsx(pe,{className:"w-4 h-4"}),s.jsx("span",{children:"Call Transcript:"})]}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:s.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:P.transcript})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-xs text-gray-500",children:P.ended_at?`Call ended at ${E(P.ended_at)}`:"Call in progress or incomplete"}),s.jsxs("div",{className:"flex space-x-2",children:[P.transcript&&s.jsx("button",{onClick:()=>D(P.id),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-1",children:S===P.id?s.jsxs(s.Fragment,{children:[s.jsx(Ig,{className:"w-4 h-4"}),s.jsx("span",{children:"Stop"})]}):s.jsxs(s.Fragment,{children:[s.jsx(mm,{className:"w-4 h-4"}),s.jsx("span",{children:"Play Recording"})]})}),s.jsx("button",{className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:"Follow Up"}),s.jsx("button",{className:"px-4 py-2 border border-gray-200 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"View Details"})]})]})]})},P.id))}),w.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(se,{className:"w-10 h-10 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No voice agent logs found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:o||d!=="all"||h!=="all"?"Try adjusting your search criteria or filters.":"Voice agent calls will appear here once patients start calling."}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 max-w-md mx-auto",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"AI Voice Agent Features:"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1 text-left",children:[s.jsx("li",{children:"• Automatic appointment scheduling"}),s.jsx("li",{children:"• Patient information verification"}),s.jsx("li",{children:"• Prescription refill requests"}),s.jsx("li",{children:"• General medical inquiries"}),s.jsx("li",{children:"• 24/7 availability"})]})]})]})]})},uy=()=>{const[t,e]=N.useState([]),[n,r]=N.useState(!0),[a,i]=N.useState(""),[l,o]=N.useState("all"),[c,d]=N.useState("all");N.useState(null);const[u,h]=N.useState({overallScore:95,hipaaCompliance:98,securityScore:92,auditStatus:"passed",lastAudit:"2024-01-15",nextAudit:"2024-04-15",criticalIssues:0,warningIssues:2,resolvedIssues:45});N.useEffect(()=>{m(),y()},[]);const m=async()=>{try{if(!J){e([{id:"1",doctor_id:"doctor-1",report_type:"hipaa",status:"compliant",details:{encryption_status:"enabled",access_logs:"reviewed",data_backup:"automated",last_review:"2024-01-15"},risk_level:"low",resolved:!0,created_at:"2024-01-15T10:00:00Z",resolved_at:"2024-01-15T10:30:00Z",doctor:{id:"doctor-1",email:"dr.smith@clinic.com",name:"Dr. John Smith",country:"US",phone:"+1 (555) 123-4567",timezone:"America/New_York",subscription_plan:"pro",ai_minutes_used:450,msg_quota_used:1200,created_at:"2024-01-15T10:00:00Z"}},{id:"2",doctor_id:"doctor-2",report_type:"security",status:"warning",details:{failed_login_attempts:3,last_password_change:"2023-12-01",two_factor_enabled:!1,suspicious_activity:!1},risk_level:"medium",resolved:!1,created_at:"2024-01-20T14:30:00Z",doctor:{id:"doctor-2",email:"dr.johnson@medical.com",name:"Dr. Sarah Johnson",country:"US",phone:"+1 (555) 987-6543",timezone:"America/Los_Angeles",subscription_plan:"pro_plus",ai_minutes_used:780,msg_quota_used:2100,created_at:"2024-02-20T14:30:00Z"}},{id:"3",doctor_id:"doctor-3",report_type:"audit",status:"violation",details:{missing_documentation:["patient_consent_forms"],data_retention_policy:"needs_update",access_control_review:"overdue"},risk_level:"high",resolved:!1,created_at:"2024-01-25T09:15:00Z",doctor:{id:"doctor-3",email:"dr.chen@healthcare.com",name:"Dr. Michael Chen",country:"CA",phone:"+1 (416) 555-0123",timezone:"America/Toronto",subscription_plan:"starter",ai_minutes_used:120,msg_quota_used:350,created_at:"2024-03-10T09:15:00Z"}}]),r(!1);return}const{data:f,error:g}=await B.from("compliance_reports").select(`
          *,
          doctors:doctor_id (
            id,
            name,
            email,
            subscription_plan
          )
        `).order("created_at",{ascending:!1});if(g)throw g;const w=(f||[]).map(v=>({...v,doctor:v.doctors}));e(w)}catch(f){console.error("Error fetching compliance reports:",f),e([])}finally{r(!1)}},y=async()=>{try{if(!J)return;const[f,g]=await Promise.all([B.from("compliance_reports").select("status, risk_level, resolved"),B.from("doctors").select("subscription_plan, created_at")]),w=f.data||[],v=w.length,_=w.filter(R=>R.status==="compliant").length,M=w.filter(R=>R.resolved).length,O=w.filter(R=>R.risk_level==="critical"&&!R.resolved).length,U=w.filter(R=>R.risk_level==="medium"&&!R.resolved).length,E=v>0?Math.round(_/v*100):100,D=Math.round(M/Math.max(v,1)*100);h({overallScore:E,hipaaCompliance:D,securityScore:92,auditStatus:O===0?"passed":"failed",lastAudit:"2024-01-15",nextAudit:"2024-04-15",criticalIssues:O,warningIssues:U,resolvedIssues:M})}catch(f){console.error("Error fetching system health:",f)}},b=t.filter(f=>{const g=f.doctor&&(f.doctor.name.toLowerCase().includes(a.toLowerCase())||f.doctor.email.toLowerCase().includes(a.toLowerCase()))||f.report_type.toLowerCase().includes(a.toLowerCase()),w=l==="all"||f.status===l,v=c==="all"||f.report_type===c;return g&&w&&v}),S=f=>{switch(f){case"compliant":return s.jsx(_e,{className:"w-4 h-4 text-green-600"});case"warning":return s.jsx(_d,{className:"w-4 h-4 text-yellow-600"});case"violation":return s.jsx(hs,{className:"w-4 h-4 text-red-600"});default:return s.jsx($e,{className:"w-4 h-4 text-gray-600"})}},j=f=>{switch(f){case"compliant":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"violation":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},p=f=>{switch(f){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-orange-100 text-orange-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return n?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading compliance data..."})]})}):s.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Compliance Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"System-wide compliance monitoring and security oversight"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx(Wo,{className:"w-4 h-4"}),s.jsx("span",{children:"Run Audit"})]}),s.jsxs("button",{className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors flex items-center space-x-2",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Export Report"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:s.jsx(Ct,{className:"w-6 h-6 text-green-600"})}),s.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${u.overallScore>=95?"bg-green-100 text-green-800":u.overallScore>=80?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:u.overallScore>=95?"Excellent":u.overallScore>=80?"Good":"Needs Attention"})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[u.overallScore,"%"]}),s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overall Compliance"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"System-wide score"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:s.jsx(pe,{className:"w-6 h-6 text-blue-600"})}),s.jsx(_e,{className:"w-5 h-5 text-green-600"})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[u.hipaaCompliance,"%"]}),s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"HIPAA Compliance"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Patient data protection"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:s.jsx(Vl,{className:"w-6 h-6 text-purple-600"})}),s.jsx("div",{className:`w-3 h-3 rounded-full ${u.securityScore>=90?"bg-green-500":"bg-yellow-500"}`})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[u.securityScore,"%"]}),s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Security Score"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Data protection level"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:s.jsx(zt,{className:"w-6 h-6 text-orange-600"})}),s.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${u.auditStatus==="passed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.auditStatus})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-bold text-gray-900",children:x(u.lastAudit)}),s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Last Audit"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Next: ",x(u.nextAudit)]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:s.jsx(bn,{className:"w-5 h-5 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.criticalIssues}),s.jsx("p",{className:"text-sm text-gray-600",children:"Critical Issues"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:s.jsx(_d,{className:"w-5 h-5 text-yellow-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.warningIssues}),s.jsx("p",{className:"text-sm text-gray-600",children:"Warnings"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(_e,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.resolvedIssues}),s.jsx("p",{className:"text-sm text-gray-600",children:"Resolved"})]})]})})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ye,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search by doctor name, email, or report type...",value:a,onChange:f=>i(f.target.value),className:"pl-10 w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors"})]}),s.jsxs("select",{value:l,onChange:f=>o(f.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"compliant",children:"Compliant"}),s.jsx("option",{value:"warning",children:"Warning"}),s.jsx("option",{value:"violation",children:"Violation"}),s.jsx("option",{value:"pending",children:"Pending"})]}),s.jsxs("select",{value:c,onChange:f=>d(f.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 hover:bg-white transition-colors",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"hipaa",children:"HIPAA"}),s.jsx("option",{value:"security",children:"Security"}),s.jsx("option",{value:"audit",children:"Audit"}),s.jsx("option",{value:"backup",children:"Backup"})]}),s.jsxs("button",{className:"px-6 py-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors flex items-center space-x-2 font-medium",children:[s.jsx(kn,{className:"w-4 h-4"}),s.jsx("span",{children:"More Filters"})]})]})}),s.jsx("div",{className:"space-y-4",children:b.map(f=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${f.report_type==="hipaa"?"bg-blue-100":f.report_type==="security"?"bg-purple-100":f.report_type==="audit"?"bg-orange-100":"bg-gray-100"}`,children:f.report_type==="hipaa"?s.jsx(pe,{className:"w-6 h-6 text-blue-600"}):f.report_type==="security"?s.jsx(Vl,{className:"w-6 h-6 text-purple-600"}):f.report_type==="audit"?s.jsx(us,{className:"w-6 h-6 text-orange-600"}):s.jsx(Nt,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 capitalize",children:[f.report_type," Compliance Report"]}),s.jsx("p",{className:"text-gray-600",children:f.doctor?`${f.doctor.name} (${f.doctor.email})`:"System-wide"}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[s.jsxs("span",{children:["Created ",x(f.created_at)]}),f.resolved_at&&s.jsxs("span",{children:["Resolved ",x(f.resolved_at)]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${j(f.status)}`,children:[S(f.status),s.jsx("span",{className:"capitalize",children:f.status})]}),s.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${p(f.risk_level)}`,children:[f.risk_level," risk"]}),f.resolved?s.jsx(_e,{className:"w-5 h-5 text-green-600"}):s.jsx(hs,{className:"w-5 h-5 text-red-600"})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Report Details:"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:Object.entries(f.details).map(([g,w])=>s.jsxs("div",{children:[s.jsxs("span",{className:"font-medium text-gray-700 capitalize",children:[g.replace("_"," "),":"]}),s.jsx("span",{className:"ml-2 text-gray-600",children:typeof w=="boolean"?w?"Yes":"No":Array.isArray(w)?w.join(", "):String(w)})]},g))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:["Report ID: ",f.id]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-1",children:[s.jsx(us,{className:"w-4 h-4"}),s.jsx("span",{children:"View Details"})]}),!f.resolved&&s.jsx("button",{className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:"Mark Resolved"}),s.jsxs("button",{className:"px-4 py-2 border border-gray-200 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-1",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Export"})]})]})]})]})},f.id))}),b.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ct,{className:"w-10 h-10 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No compliance reports found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:a||l!=="all"||c!=="all"?"Try adjusting your search criteria or filters.":"All systems are compliant. No issues to report."}),s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 max-w-md mx-auto",children:[s.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"✅ System Status: Healthy"}),s.jsxs("ul",{className:"text-sm text-green-700 space-y-1 text-left",children:[s.jsx("li",{children:"• HIPAA compliance maintained"}),s.jsx("li",{children:"• Security protocols active"}),s.jsx("li",{children:"• Regular audits completed"}),s.jsx("li",{children:"• Data backups automated"}),s.jsx("li",{children:"• Access controls verified"})]})]})]})]})},hy=()=>{N.useState(!1);const[t,e]=N.useState(!1),[n,r]=N.useState(""),[a,i]=N.useState(""),[l,o]=N.useState("general"),[c,d]=N.useState({version:"2.1.4",environment:"Production",uptime:"99.9%",lastRestart:"2024-01-15T10:00:00Z",dbConnections:45,activeUsers:12,memoryUsage:"2.4 GB",cpuUsage:"15%",diskUsage:"45%",networkLatency:"12ms"}),[u,h]=N.useState({systemName:"HealthSphere CMS",timezone:"UTC",dateFormat:"MM/DD/YYYY",language:"en",maintenanceMode:!1,emailProvider:"sendgrid",smtpHost:"smtp.sendgrid.net",smtpPort:"587",emailFrom:"noreply@healthsphere.com",emailSignature:`Best regards,
HealthSphere Team`,smsProvider:"twilio",smsFrom:"+1 (555) 000-0000",smsEnabled:!0,voiceAgentEnabled:!0,voiceAgentLanguage:"en-US",voiceAgentPersonality:"professional",maxCallDuration:600,confidenceThreshold:.8,sessionTimeout:3600,passwordMinLength:8,twoFactorRequired:!1,ipWhitelist:"",auditLogging:!0,autoBackup:!0,backupFrequency:"daily",backupRetention:30,backupLocation:"supabase-storage",emailNotifications:!0,smsNotifications:!0,pushNotifications:!1,adminAlerts:!0});N.useEffect(()=>{m(),y()},[]);const m=async()=>{try{if(!J)return}catch(v){console.error("Error fetching system settings:",v)}},y=async()=>{try{if(!J)return}catch(v){console.error("Error fetching system info:",v)}},b=async()=>{e(!0),r(""),i("");try{if(!J){i("Demo: Settings would be saved successfully!"),setTimeout(()=>i(""),3e3);return}i("Settings saved successfully!"),setTimeout(()=>i(""),3e3)}catch(v){console.error("Error saving settings:",v),r(v.message||"Failed to save settings")}finally{e(!1)}},S=[{id:"general",label:"General",icon:Ko},{id:"communication",label:"Communication",icon:ct},{id:"ai-agent",label:"AI Agent",icon:os},{id:"security",label:"Security",icon:Ct},{id:"backup",label:"Backup",icon:Nt},{id:"system",label:"System Info",icon:Dg}],j=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"System Name"}),s.jsx("input",{type:"text",value:u.systemName,onChange:v=>h({...u,systemName:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Timezone"}),s.jsxs("select",{value:u.timezone,onChange:v=>h({...u,timezone:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"UTC",children:"UTC"}),s.jsx("option",{value:"America/New_York",children:"Eastern Time"}),s.jsx("option",{value:"America/Chicago",children:"Central Time"}),s.jsx("option",{value:"America/Denver",children:"Mountain Time"}),s.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Format"}),s.jsxs("select",{value:u.dateFormat,onChange:v=>h({...u,dateFormat:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),s.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),s.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),s.jsxs("select",{value:u.language,onChange:v=>h({...u,language:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"en",children:"English"}),s.jsx("option",{value:"es",children:"Spanish"}),s.jsx("option",{value:"fr",children:"French"}),s.jsx("option",{value:"de",children:"German"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"maintenanceMode",checked:u.maintenanceMode,onChange:v=>h({...u,maintenanceMode:v.target.checked}),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"maintenanceMode",className:"text-sm font-medium text-gray-700",children:"Enable Maintenance Mode"})]})]}),p=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[s.jsx(Ls,{className:"w-5 h-5"}),s.jsx("span",{children:"Email Configuration"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Provider"}),s.jsxs("select",{value:u.emailProvider,onChange:v=>h({...u,emailProvider:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"sendgrid",children:"SendGrid"}),s.jsx("option",{value:"mailgun",children:"Mailgun"}),s.jsx("option",{value:"ses",children:"Amazon SES"}),s.jsx("option",{value:"smtp",children:"Custom SMTP"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Email Address"}),s.jsx("input",{type:"email",value:u.emailFrom,onChange:v=>h({...u,emailFrom:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Host"}),s.jsx("input",{type:"text",value:u.smtpHost,onChange:v=>h({...u,smtpHost:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Port"}),s.jsx("input",{type:"text",value:u.smtpPort,onChange:v=>h({...u,smtpPort:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[s.jsx(se,{className:"w-5 h-5"}),s.jsx("span",{children:"SMS Configuration"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMS Provider"}),s.jsxs("select",{value:u.smsProvider,onChange:v=>h({...u,smsProvider:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"twilio",children:"Twilio"}),s.jsx("option",{value:"messagebird",children:"MessageBird"}),s.jsx("option",{value:"nexmo",children:"Vonage (Nexmo)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Phone Number"}),s.jsx("input",{type:"tel",value:u.smsFrom,onChange:v=>h({...u,smsFrom:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"smsEnabled",checked:u.smsEnabled,onChange:v=>h({...u,smsEnabled:v.target.checked}),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"smsEnabled",className:"text-sm font-medium text-gray-700",children:"Enable SMS Messaging"})]})})]})]}),x=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Voice Agent Language"}),s.jsxs("select",{value:u.voiceAgentLanguage,onChange:v=>h({...u,voiceAgentLanguage:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"en-US",children:"English (US)"}),s.jsx("option",{value:"en-GB",children:"English (UK)"}),s.jsx("option",{value:"es-ES",children:"Spanish"}),s.jsx("option",{value:"fr-FR",children:"French"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Agent Personality"}),s.jsxs("select",{value:u.voiceAgentPersonality,onChange:v=>h({...u,voiceAgentPersonality:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"professional",children:"Professional"}),s.jsx("option",{value:"friendly",children:"Friendly"}),s.jsx("option",{value:"empathetic",children:"Empathetic"}),s.jsx("option",{value:"concise",children:"Concise"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Call Duration (seconds)"}),s.jsx("input",{type:"number",value:u.maxCallDuration,onChange:v=>h({...u,maxCallDuration:parseInt(v.target.value)}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"60",max:"1800"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Confidence Threshold"}),s.jsx("input",{type:"number",value:u.confidenceThreshold,onChange:v=>h({...u,confidenceThreshold:parseFloat(v.target.value)}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.1",max:"1.0",step:"0.1"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"voiceAgentEnabled",checked:u.voiceAgentEnabled,onChange:v=>h({...u,voiceAgentEnabled:v.target.checked}),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"voiceAgentEnabled",className:"text-sm font-medium text-gray-700",children:"Enable AI Voice Agent"})]})]}),f=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (seconds)"}),s.jsx("input",{type:"number",value:u.sessionTimeout,onChange:v=>h({...u,sessionTimeout:parseInt(v.target.value)}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"300",max:"86400"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Password Length"}),s.jsx("input",{type:"number",value:u.passwordMinLength,onChange:v=>h({...u,passwordMinLength:parseInt(v.target.value)}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"6",max:"32"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"twoFactorRequired",checked:u.twoFactorRequired,onChange:v=>h({...u,twoFactorRequired:v.target.checked}),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"twoFactorRequired",className:"text-sm font-medium text-gray-700",children:"Require Two-Factor Authentication"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"auditLogging",checked:u.auditLogging,onChange:v=>h({...u,auditLogging:v.target.checked}),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"auditLogging",className:"text-sm font-medium text-gray-700",children:"Enable Audit Logging"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IP Whitelist (one per line)"}),s.jsx("textarea",{value:u.ipWhitelist,onChange:v=>h({...u,ipWhitelist:v.target.value}),rows:4,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`192.168.1.0/24
10.0.0.0/8`})]})]}),g=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-6 border border-blue-200",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx($g,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Version"}),s.jsx("p",{className:"text-xl font-bold text-blue-900",children:c.version})]})]}),s.jsx("p",{className:"text-xs text-blue-600",children:c.environment})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 rounded-xl p-6 border border-green-200",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(zt,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-800",children:"Uptime"}),s.jsx("p",{className:"text-xl font-bold text-green-900",children:c.uptime})]})]}),s.jsx("p",{className:"text-xs text-green-600",children:"Last 30 days"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl p-6 border border-purple-200",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center",children:s.jsx(Ce,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-purple-800",children:"Active Users"}),s.jsx("p",{className:"text-xl font-bold text-purple-900",children:c.activeUsers})]})]}),s.jsx("p",{className:"text-xs text-purple-600",children:"Currently online"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 rounded-xl p-6 border border-orange-200",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center",children:s.jsx(Nt,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-orange-800",children:"DB Connections"}),s.jsx("p",{className:"text-xl font-bold text-orange-900",children:c.dbConnections})]})]}),s.jsx("p",{className:"text-xs text-orange-600",children:"Active connections"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Metrics"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Pg,{className:"w-8 h-8 text-blue-600"})}),s.jsx("h4",{className:"font-semibold text-gray-900",children:"Memory Usage"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.memoryUsage}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"60%"}})})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Ng,{className:"w-8 h-8 text-green-600"})}),s.jsx("h4",{className:"font-semibold text-gray-900",children:"CPU Usage"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.cpuUsage}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"15%"}})})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(kg,{className:"w-8 h-8 text-purple-600"})}),s.jsx("h4",{className:"font-semibold text-gray-900",children:"Disk Usage"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:c.diskUsage}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:s.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"45%"}})})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(zg,{className:"w-8 h-8 text-orange-600"})}),s.jsx("h4",{className:"font-semibold text-gray-900",children:"Network Latency"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:c.networkLatency}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:s.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:"20%"}})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors text-left",children:[s.jsx(Wo,{className:"w-8 h-8 text-blue-600 mb-2"}),s.jsx("h4",{className:"font-semibold text-gray-900",children:"Restart Services"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Restart all system services"})]}),s.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors text-left",children:[s.jsx(Nt,{className:"w-8 h-8 text-green-600 mb-2"}),s.jsx("h4",{className:"font-semibold text-gray-900",children:"Backup Database"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Create manual backup"})]}),s.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors text-left",children:[s.jsx(Ct,{className:"w-8 h-8 text-purple-600 mb-2"}),s.jsx("h4",{className:"font-semibold text-gray-900",children:"Security Scan"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Run security audit"})]})]})]})]}),w=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return s.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Settings"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configure system-wide settings and monitor performance"})]}),s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("button",{onClick:b,disabled:t,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center space-x-2",children:[s.jsx(ys,{className:"w-4 h-4"}),s.jsx("span",{children:t?"Saving...":"Save Changes"})]})})]}),s.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:s.jsx(_e,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"System Status: Healthy"}),s.jsxs("p",{className:"text-gray-600",children:["All services running normally • Last restart: ",w(c.lastRestart)]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm font-medium text-green-600",children:"Online"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 mb-6",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8 px-6",children:S.map(v=>{const _=v.icon;return s.jsxs("button",{onClick:()=>o(v.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${l===v.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(_,{className:"w-4 h-4"}),s.jsx("span",{children:v.label})]},v.id)})})}),s.jsxs("div",{className:"p-6",children:[l==="general"&&j(),l==="communication"&&p(),l==="ai-agent"&&x(),l==="security"&&f(),l==="backup"&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Nt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Backup Settings"}),s.jsx("p",{className:"text-gray-600",children:"Backup configuration panel coming soon"})]}),l==="system"&&g()]})]}),n&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:s.jsx("p",{className:"text-red-800 text-sm font-medium",children:n})}),a&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6",children:s.jsx("p",{className:"text-green-800 text-sm font-medium",children:a})})]})},my=()=>{const{doctor:t,isAdmin:e}=fe(),{selectedClinic:n,clinics:r}=Fe(),[a,i]=N.useState(!0),[l,o]=N.useState("30d"),[c,d]=N.useState("overview"),[u,h]=N.useState(""),[m,y]=N.useState({overview:{totalPatients:0,newPatientsThisMonth:0,totalAppointments:0,appointmentsThisMonth:0,totalRevenue:0,revenueThisMonth:0,avgAppointmentDuration:0,patientSatisfaction:0,noShowRate:0,cancellationRate:0},patientDemographics:{ageGroups:[],genderDistribution:[],topConditions:[]},appointmentTrends:{monthlyData:[],weeklyTrends:[],hourlyDistribution:[]},aiPerformance:{voiceAgentStats:{totalCalls:0,successfulCalls:0,avgCallDuration:0,topActions:[]},messageStats:{totalSent:0,deliveryRate:0,responseRate:0,channelBreakdown:[]}},clinicPerformance:{clinicStats:[]}});N.useEffect(()=>{(t||e)&&b()},[t,n,l,e]);const b=async()=>{i(!0),h("");try{if(!J){y({overview:{totalPatients:1247,newPatientsThisMonth:89,totalAppointments:2156,appointmentsThisMonth:234,totalRevenue:125400,revenueThisMonth:18750,avgAppointmentDuration:28,patientSatisfaction:4.8,noShowRate:8.2,cancellationRate:12.5},patientDemographics:{ageGroups:[{range:"0-18",count:156,percentage:12.5},{range:"19-35",count:298,percentage:23.9},{range:"36-50",count:387,percentage:31},{range:"51-65",count:289,percentage:23.2},{range:"65+",count:117,percentage:9.4}],genderDistribution:[{gender:"Female",count:678,percentage:54.4},{gender:"Male",count:523,percentage:41.9},{gender:"Other",count:46,percentage:3.7}],topConditions:[{condition:"Hypertension",count:234,trend:"up"},{condition:"Diabetes",count:189,trend:"up"},{condition:"Allergies",count:156,trend:"stable"},{condition:"Cardiac Issues",count:123,trend:"down"},{condition:"Respiratory",count:98,trend:"up"}]},appointmentTrends:{monthlyData:[{month:"Jan",appointments:178,revenue:14200,noShows:12},{month:"Feb",appointments:195,revenue:15600,noShows:18},{month:"Mar",appointments:212,revenue:16950,noShows:15},{month:"Apr",appointments:189,revenue:15120,noShows:22},{month:"May",appointments:234,revenue:18750,noShows:19},{month:"Jun",appointments:267,revenue:21360,noShows:16}],weeklyTrends:[{day:"Monday",appointments:45,avgDuration:32},{day:"Tuesday",appointments:52,avgDuration:28},{day:"Wednesday",appointments:48,avgDuration:30},{day:"Thursday",appointments:41,avgDuration:26},{day:"Friday",appointments:38,avgDuration:29},{day:"Saturday",appointments:28,avgDuration:25},{day:"Sunday",appointments:12,avgDuration:35}],hourlyDistribution:[{hour:"8 AM",count:12},{hour:"9 AM",count:28},{hour:"10 AM",count:45},{hour:"11 AM",count:52},{hour:"12 PM",count:38},{hour:"1 PM",count:41},{hour:"2 PM",count:48},{hour:"3 PM",count:44},{hour:"4 PM",count:35},{hour:"5 PM",count:22}]},aiPerformance:{voiceAgentStats:{totalCalls:1456,successfulCalls:1298,avgCallDuration:165,topActions:[{action:"Schedule Appointment",count:567},{action:"Reschedule Appointment",count:234},{action:"Provide Information",count:189},{action:"Transfer to Doctor",count:156},{action:"Take Message",count:152}]},messageStats:{totalSent:3456,deliveryRate:98.5,responseRate:76.3,channelBreakdown:[{channel:"WhatsApp",sent:1567,delivered:1542,responded:1198},{channel:"SMS",sent:1234,delivered:1221,responded:934},{channel:"Email",sent:655,delivered:643,responded:502}]}},clinicPerformance:{clinicStats:[{id:"1",name:"Main Medical Center",patients:847,appointments:1456,revenue:87500,satisfaction:4.9,utilizationRate:85.2},{id:"2",name:"Downtown Clinic",patients:400,revenue:37900,appointments:700,satisfaction:4.6,utilizationRate:78.4}]}}),i(!1);return}await Promise.all([j(),p(),x(),f(),g()]),i(!1)}catch(k){console.error("Error fetching analytics:",k),h("Failed to load analytics data"),i(!1)}},S=()=>{const k=new Date;let A=new Date;switch(l){case"7d":A.setDate(k.getDate()-7);break;case"30d":A.setDate(k.getDate()-30);break;case"90d":A.setDate(k.getDate()-90);break;case"1y":A.setFullYear(k.getFullYear()-1);break}return{startDate:A.toISOString(),endDate:k.toISOString()}},j=async()=>{try{const{startDate:k,endDate:A}=S(),z=new Date().toISOString().slice(0,7);let I=e?{}:{doctor_id:t==null?void 0:t.id},C=n&&n!=="all"?{clinic_id:n}:{};const{count:$}=await B.from("patients").select("*",{count:"exact",head:!0}).match({...I,...C}),{count:q}=await B.from("patients").select("*",{count:"exact",head:!0}).match({...I,...C}).gte("created_at",`${z}-01T00:00:00`),{count:T}=await B.from("appointments").select("*",{count:"exact",head:!0}).match({...I,...C}),{count:L}=await B.from("appointments").select("*",{count:"exact",head:!0}).match({...I,...C}).gte("created_at",`${z}-01T00:00:00`),{data:V}=await B.from("appointments").select("status, start_ts, end_ts").match({...I,...C}).gte("created_at",k).lte("created_at",A),K=V||[],G=K.length,ne=K.filter(Pt=>Pt.status==="complete"),et=K.filter(Pt=>Pt.status==="cancelled"),Bt=K.filter(Pt=>Pt.status==="no_show"),Pr=ne.length>0?Math.round(ne.reduce((Pt,Yo)=>{const Sm=new Date(Yo.start_ts),km=new Date(Yo.end_ts);return Pt+(km.getTime()-Sm.getTime())/(1e3*60)},0)/ne.length):0,ai=G>0?Bt.length/G*100:0,wm=G>0?et.length/G*100:0,Jo=150,Nm=(T||0)*Jo,_m=(L||0)*Jo;y(Pt=>({...Pt,overview:{totalPatients:$||0,newPatientsThisMonth:q||0,totalAppointments:T||0,appointmentsThisMonth:L||0,totalRevenue:Nm,revenueThisMonth:_m,avgAppointmentDuration:Pr,patientSatisfaction:4.8,noShowRate:ai,cancellationRate:wm}}))}catch(k){console.error("Error fetching overview data:",k)}},p=async()=>{try{let k=e?{}:{doctor_id:t==null?void 0:t.id},A=n&&n!=="all"?{clinic_id:n}:{};const{data:z}=await B.from("patients").select("dob, sex, tags").match({...k,...A});if(!z||z.length===0)return;const I=[{range:"0-18",count:0,percentage:0},{range:"19-35",count:0,percentage:0},{range:"36-50",count:0,percentage:0},{range:"51-65",count:0,percentage:0},{range:"65+",count:0,percentage:0}];z.forEach(L=>{const V=new Date().getFullYear()-new Date(L.dob).getFullYear();V<=18?I[0].count++:V<=35?I[1].count++:V<=50?I[2].count++:V<=65?I[3].count++:I[4].count++}),I.forEach(L=>{L.percentage=L.count/z.length*100});const C=z.reduce((L,V)=>{const K=V.sex==="male"?"Male":V.sex==="female"?"Female":"Other";return L[K]=(L[K]||0)+1,L},{}),$=Object.entries(C).map(([L,V])=>({gender:L,count:V,percentage:V/z.length*100})),q=z.reduce((L,V)=>{var K;return(K=V.tags)==null||K.forEach(G=>{L[G]=(L[G]||0)+1}),L},{}),T=Object.entries(q).sort(([,L],[,V])=>V-L).slice(0,5).map(([L,V])=>({condition:L.charAt(0).toUpperCase()+L.slice(1),count:V,trend:Math.random()>.5?"up":Math.random()>.3?"stable":"down"}));y(L=>({...L,patientDemographics:{ageGroups:I,genderDistribution:$,topConditions:T}}))}catch(k){console.error("Error fetching patient demographics:",k)}},x=async()=>{try{let k=e?{}:{doctor_id:t==null?void 0:t.id},A=n&&n!=="all"?{clinic_id:n}:{};const z=new Date;z.setMonth(z.getMonth()-6);const{data:I}=await B.from("appointments").select("start_ts, end_ts, status, created_at").match({...k,...A}).gte("created_at",z.toISOString());if(!I||I.length===0)return;const C=[];for(let T=5;T>=0;T--){const L=new Date;L.setMonth(L.getMonth()-T);const V=L.toISOString().slice(0,7),K=L.toLocaleDateString("en-US",{month:"short"}),G=I.filter(Bt=>Bt.created_at.startsWith(V)),ne=G.filter(Bt=>Bt.status==="no_show").length,et=G.length*150;C.push({month:K,appointments:G.length,revenue:et,noShows:ne})}const $=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(T=>{const L=I.filter(K=>new Date(K.start_ts).toLocaleDateString("en-US",{weekday:"long"})===T),V=L.length>0?Math.round(L.reduce((K,G)=>{const ne=new Date(G.start_ts),et=new Date(G.end_ts);return K+(et.getTime()-ne.getTime())/(1e3*60)},0)/L.length):0;return{day:T,appointments:L.length,avgDuration:V}}),q=[];for(let T=8;T<=17;T++){const L=I.filter(K=>new Date(K.start_ts).getHours()===T),V=T<=12?`${T} AM`:`${T-12} PM`;T===12&&(V="12 PM"),q.push({hour:V,count:L.length})}y(T=>({...T,appointmentTrends:{monthlyData:C,weeklyTrends:$,hourlyDistribution:q}}))}catch(k){console.error("Error fetching appointment trends:",k)}},f=async()=>{try{let k=e?{}:{doctor_id:t==null?void 0:t.id};const{startDate:A,endDate:z}=S(),{data:I}=await B.from("voice_agent_logs").select("status, duration_seconds, actions_taken, created_at").match(k).gte("created_at",A).lte("created_at",z),{data:C}=await B.from("messages").select("channel, status, created_at").match(k).gte("created_at",A).lte("created_at",z);if(I&&I.length>0){const $=I.length,q=I.filter(K=>K.status==="completed").length,T=q>0?Math.round(I.reduce((K,G)=>K+(G.duration_seconds||0),0)/q):0,L=I.reduce((K,G)=>{var ne;return(ne=G.actions_taken)==null||ne.forEach(et=>{var Pr;const Bt=((Pr=et.action)==null?void 0:Pr.replace("_"," ").replace(/\b\w/g,ai=>ai.toUpperCase()))||"Unknown Action";K[Bt]=(K[Bt]||0)+1}),K},{}),V=Object.entries(L).sort(([,K],[,G])=>G-K).slice(0,5).map(([K,G])=>({action:K,count:G}));y(K=>({...K,aiPerformance:{...K.aiPerformance,voiceAgentStats:{totalCalls:$,successfulCalls:q,avgCallDuration:T,topActions:V}}}))}if(C&&C.length>0){const $=C.length,T=C.filter(K=>K.status==="delivered"||K.status==="sent").length/$*100,L=76.3,V=["whatsapp","sms","email"].map(K=>{const G=C.filter(et=>et.channel===K),ne=G.filter(et=>et.status==="delivered"||et.status==="sent").length;return{channel:K==="whatsapp"?"WhatsApp":K.toUpperCase(),sent:G.length,delivered:ne,responded:Math.round(ne*.7)}}).filter(K=>K.sent>0);y(K=>({...K,aiPerformance:{...K.aiPerformance,messageStats:{totalSent:$,deliveryRate:T,responseRate:L,channelBreakdown:V}}}))}}catch(k){console.error("Error fetching AI performance data:",k)}},g=async()=>{try{if(e){const{data:k}=await B.from("clinics").select("id, name");if(k&&k.length>0){const A=await Promise.all(k.map(async z=>{const[I,C]=await Promise.all([B.from("patients").select("*",{count:"exact",head:!0}).eq("clinic_id",z.id),B.from("appointments").select("*",{count:"exact",head:!0}).eq("clinic_id",z.id)]),$=I.count||0,q=C.count||0,T=q*150,L=4.5+Math.random()*.5,V=70+Math.random()*25;return{id:z.id,name:z.name,patients:$,appointments:q,revenue:T,satisfaction:Math.round(L*10)/10,utilizationRate:Math.round(V*10)/10}}));y(z=>({...z,clinicPerformance:{clinicStats:A}}))}}else if(t){const{data:k}=await B.from("clinics").select("id, name").eq("doctor_id",t.id);if(k&&k.length>0){const A=await Promise.all(k.map(async z=>{const[I,C]=await Promise.all([B.from("patients").select("*",{count:"exact",head:!0}).eq("clinic_id",z.id).eq("doctor_id",t.id),B.from("appointments").select("*",{count:"exact",head:!0}).eq("clinic_id",z.id).eq("doctor_id",t.id)]),$=I.count||0,q=C.count||0,T=q*150,L=4.5+Math.random()*.5,V=70+Math.random()*25;return{id:z.id,name:z.name,patients:$,appointments:q,revenue:T,satisfaction:Math.round(L*10)/10,utilizationRate:Math.round(V*10)/10}}));y(z=>({...z,clinicPerformance:{clinicStats:A}}))}}}catch(k){console.error("Error fetching clinic performance data:",k)}},w=k=>{switch(k){case"up":return s.jsx(Rn,{className:"w-4 h-4 text-green-600"});case"down":return s.jsx(vg,{className:"w-4 h-4 text-red-600"});default:return s.jsx(Ag,{className:"w-4 h-4 text-gray-600"})}},v=k=>{switch(k){case"up":return"text-green-600 bg-green-100";case"down":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},_=k=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(k),M=k=>`${k.toFixed(1)}%`,O=[{id:"overview",label:"Overview",icon:Ra},{id:"patients",label:"Patient Analytics",icon:Ce},{id:"appointments",label:"Appointment Trends",icon:ee},{id:"ai-performance",label:"AI Performance",icon:se},{id:"clinics",label:"Clinic Performance",icon:ge}],U=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:s.jsx(Ce,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[s.jsx(Rn,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"+12.5%"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:m.overview.totalPatients.toLocaleString()}),s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Patients"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",m.overview.newPatientsThisMonth," this month"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:s.jsx(ee,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[s.jsx(Rn,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"+8.3%"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:m.overview.totalAppointments.toLocaleString()}),s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Appointments"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",m.overview.appointmentsThisMonth," this month"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:s.jsx(kd,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[s.jsx(Rn,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"+15.2%"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:_(m.overview.totalRevenue)}),s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[_(m.overview.revenueThisMonth)," this month"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:s.jsx(Bl,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[s.jsx(Rn,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"+0.3"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:m.overview.patientSatisfaction}),s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Patient Satisfaction"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Out of 5.0 stars"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Appointment Efficiency"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Average Duration"}),s.jsxs("span",{className:"font-semibold text-gray-900",children:[m.overview.avgAppointmentDuration," min"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"No-Show Rate"}),s.jsx("span",{className:"font-semibold text-orange-600",children:M(m.overview.noShowRate)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Cancellation Rate"}),s.jsx("span",{className:"font-semibold text-red-600",children:M(m.overview.cancellationRate)})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"AI Voice Agent"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Total Calls"}),s.jsx("span",{className:"font-semibold text-gray-900",children:m.aiPerformance.voiceAgentStats.totalCalls})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Success Rate"}),s.jsx("span",{className:"font-semibold text-green-600",children:M(m.aiPerformance.voiceAgentStats.successfulCalls/m.aiPerformance.voiceAgentStats.totalCalls*100)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Avg Call Duration"}),s.jsxs("span",{className:"font-semibold text-gray-900",children:[Math.floor(m.aiPerformance.voiceAgentStats.avgCallDuration/60),":",(m.aiPerformance.voiceAgentStats.avgCallDuration%60).toString().padStart(2,"0")]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Message Performance"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Messages Sent"}),s.jsx("span",{className:"font-semibold text-gray-900",children:m.aiPerformance.messageStats.totalSent})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Delivery Rate"}),s.jsx("span",{className:"font-semibold text-green-600",children:M(m.aiPerformance.messageStats.deliveryRate)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Response Rate"}),s.jsx("span",{className:"font-semibold text-blue-600",children:M(m.aiPerformance.messageStats.responseRate)})]})]})]})]})]}),E=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Patient Age Distribution"}),s.jsx("div",{className:"space-y-4",children:m.patientDemographics.ageGroups.map((k,A)=>s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 text-sm font-medium text-gray-700",children:k.range}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[k.count," patients"]}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:M(k.percentage)})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${k.percentage}%`}})})]})]},A))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Gender Distribution"}),s.jsx("div",{className:"space-y-4",children:m.patientDemographics.genderDistribution.map((k,A)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${k.gender==="Female"?"bg-pink-500":k.gender==="Male"?"bg-blue-500":"bg-purple-500"}`}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:k.gender})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-gray-900",children:k.count}),s.jsx("div",{className:"text-xs text-gray-500",children:M(k.percentage)})]})]},A))})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Top Medical Conditions"}),s.jsx("div",{className:"space-y-4",children:m.patientDemographics.topConditions.map((k,A)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-bold text-gray-600",children:A+1})}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:k.condition})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg font-bold text-gray-900",children:k.count}),s.jsx("div",{className:`p-1 rounded-full ${v(k.trend)}`,children:w(k.trend)})]})]},A))})]})]})]}),D=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Monthly Appointment Trends"}),s.jsx("div",{className:"grid grid-cols-6 gap-4",children:m.appointmentTrends.monthlyData.map((k,A)=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-2",children:s.jsx("div",{className:"bg-blue-600 rounded-t mx-auto transition-all duration-300",style:{width:"24px",height:`${k.appointments/Math.max(...m.appointmentTrends.monthlyData.map(z=>z.appointments))*100}px`,minHeight:"20px"}})}),s.jsx("div",{className:"text-xs font-medium text-gray-900",children:k.month}),s.jsx("div",{className:"text-xs text-gray-600",children:k.appointments})]},A))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Weekly Appointment Distribution"}),s.jsx("div",{className:"space-y-3",children:m.appointmentTrends.weeklyTrends.map((k,A)=>s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-20 text-sm font-medium text-gray-700",children:k.day}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[k.appointments," appointments"]}),s.jsxs("span",{className:"text-sm text-gray-500",children:[k.avgDuration," min avg"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${k.appointments/Math.max(...m.appointmentTrends.weeklyTrends.map(z=>z.appointments))*100}%`}})})]})]},A))})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Peak Hours"}),s.jsx("div",{className:"space-y-3",children:m.appointmentTrends.hourlyDistribution.map((k,A)=>s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 text-sm font-medium text-gray-700",children:k.hour}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-center justify-between mb-1",children:s.jsxs("span",{className:"text-sm text-gray-600",children:[k.count," appointments"]})}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${k.count/Math.max(...m.appointmentTrends.hourlyDistribution.map(z=>z.count))*100}%`}})})]})]},A))})]})]})]}),R=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"AI Voice Agent Performance"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(se,{className:"w-8 h-8 text-green-600"})}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.aiPerformance.voiceAgentStats.totalCalls}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Calls"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Go,{className:"w-8 h-8 text-blue-600"})}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M(m.aiPerformance.voiceAgentStats.successfulCalls/m.aiPerformance.voiceAgentStats.totalCalls*100)}),s.jsx("p",{className:"text-sm text-gray-600",children:"Success Rate"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx($e,{className:"w-8 h-8 text-purple-600"})}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.floor(m.aiPerformance.voiceAgentStats.avgCallDuration/60),":",(m.aiPerformance.voiceAgentStats.avgCallDuration%60).toString().padStart(2,"0")]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Avg Duration"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(zt,{className:"w-8 h-8 text-orange-600"})}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.aiPerformance.voiceAgentStats.topActions.length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Action Types"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Top AI Actions Performed"}),s.jsx("div",{className:"space-y-3",children:m.aiPerformance.voiceAgentStats.topActions.map((k,A)=>s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-24 text-sm font-medium text-gray-700",children:k.action}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[k.count," times"]}),s.jsx("span",{className:"text-sm text-gray-500",children:M(k.count/m.aiPerformance.voiceAgentStats.totalCalls*100)})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${k.count/Math.max(...m.aiPerformance.voiceAgentStats.topActions.map(z=>z.count))*100}%`}})})]})]},A))})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Message Channel Performance"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:m.aiPerformance.messageStats.channelBreakdown.map((k,A)=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${k.channel==="WhatsApp"?"bg-green-100":k.channel==="SMS"?"bg-blue-100":"bg-purple-100"}`,children:s.jsx(ct,{className:`w-5 h-5 ${k.channel==="WhatsApp"?"text-green-600":k.channel==="SMS"?"text-blue-600":"text-purple-600"}`})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:k.channel}),s.jsxs("p",{className:"text-sm text-gray-600",children:[k.sent," sent"]})]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Delivered:"}),s.jsx("span",{className:"font-medium",children:M(k.delivered/k.sent*100)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Responded:"}),s.jsx("span",{className:"font-medium",children:M(k.responded/k.sent*100)})]})]})]},A))})]})]}),P=()=>s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"grid grid-cols-1 gap-6",children:m.clinicPerformance.clinicStats.map((k,A)=>s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:s.jsx(ge,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:k.name}),s.jsx("p",{className:"text-sm text-gray-600",children:"Performance Overview"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:M(k.utilizationRate)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Utilization Rate"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[s.jsx(Ce,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),s.jsx("div",{className:"text-xl font-bold text-blue-900",children:k.patients}),s.jsx("div",{className:"text-xs text-blue-600",children:"Patients"})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[s.jsx(ee,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),s.jsx("div",{className:"text-xl font-bold text-green-900",children:k.appointments}),s.jsx("div",{className:"text-xs text-green-600",children:"Appointments"})]}),s.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[s.jsx(kd,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),s.jsx("div",{className:"text-xl font-bold text-purple-900",children:_(k.revenue)}),s.jsx("div",{className:"text-xs text-purple-600",children:"Revenue"})]}),s.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[s.jsx(Bl,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),s.jsx("div",{className:"text-xl font-bold text-orange-900",children:k.satisfaction}),s.jsx("div",{className:"text-xs text-orange-600",children:"Satisfaction"})]}),s.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 text-center",children:[s.jsx(zt,{className:"w-6 h-6 text-indigo-600 mx-auto mb-2"}),s.jsx("div",{className:"text-xl font-bold text-indigo-900",children:M(k.utilizationRate)}),s.jsx("div",{className:"text-xs text-indigo-600",children:"Utilization"})]})]})]},A))})});return a?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})}):u?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ra,{className:"w-8 h-8 text-red-600"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Analytics Error"}),s.jsx("p",{className:"text-gray-600 mb-4",children:u}),s.jsx("button",{onClick:()=>{h(""),b()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]})}):s.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics"}),s.jsx("p",{className:"text-gray-600 mt-1",children:e?"System-wide analytics and performance metrics":"Practice analytics and insights"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("select",{value:l,onChange:k=>o(k.target.value),className:"px-4 py-2 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[s.jsx("option",{value:"7d",children:"Last 7 days"}),s.jsx("option",{value:"30d",children:"Last 30 days"}),s.jsx("option",{value:"90d",children:"Last 90 days"}),s.jsx("option",{value:"1y",children:"Last year"})]}),s.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx(Wo,{className:"w-4 h-4"}),s.jsx("span",{children:"Refresh"})]}),s.jsxs("button",{className:"px-4 py-2 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Export"})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 mb-6",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8 px-6",children:O.map(k=>{const A=k.icon;return s.jsxs("button",{onClick:()=>d(k.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${c===k.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(A,{className:"w-4 h-4"}),s.jsx("span",{children:k.label})]},k.id)})})}),s.jsxs("div",{className:"p-6",children:[c==="overview"&&U(),c==="patients"&&E(),c==="appointments"&&D(),c==="ai-performance"&&R(),c==="clinics"&&P()]})]})]})},Ui=({title:t})=>s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:t}),s.jsx("p",{className:"text-gray-600",children:"This section is being built. Full functionality will be available soon."}),s.jsxs("div",{className:"mt-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-200",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Coming Soon"}),s.jsxs("p",{className:"text-blue-700 text-sm",children:["This feature will include comprehensive ",t.toLowerCase()," management with AI-powered insights and automation."]})]})]})}),jm=ca.memo(()=>{const{user:t,loading:e}=fe(),[n,r]=N.useState("dashboard"),[a,i]=N.useState(null),[l,o]=N.useState(!1),[c,d]=N.useState(!1);if(ca.useEffect(()=>{!t&&l&&!e&&(console.log("User logged out, resetting to landing page"),i(null),r("dashboard")),!e&&!l&&o(!0)},[t,e,l]),e||!l)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading HealthSphere..."})]})});if(!t)return a?s.jsx(qg,{initialMode:a,onBack:()=>i(null)}):s.jsx(Bg,{onShowAuth:i});const u=()=>{switch(n){case"dashboard":return s.jsx(Ed,{activeTab:n,setActiveTab:r});case"clinics":return s.jsx(iy,{});case"patients":return s.jsx(ry,{});case"database-status":return s.jsx(ay,{});case"appointments":return s.jsx(oy,{});case"prescriptions":return s.jsx(cy,{});case"communication":return s.jsx(Ui,{title:"Patient Communication"});case"marketing":return s.jsx(Ui,{title:"AI Marketing"});case"voice-agent":return s.jsx(dy,{});case"analytics":return s.jsx(my,{});case"compliance":return s.jsx(uy,{});case"settings":return s.jsx(hy,{});case"billing":return s.jsx(Ui,{title:"Billing & Subscriptions"});default:return s.jsx(Ed,{setActiveTab:r})}};return s.jsx(Wg,{children:s.jsxs("div",{className:"flex h-screen bg-gray-50",children:[s.jsx(Vg,{activeTab:n,setActiveTab:r,isOpen:c,onClose:()=>d(!1)}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(Hg,{sidebarOpen:c,setSidebarOpen:d}),s.jsx("main",{className:"flex-1 overflow-y-auto",children:u()})]})]})})});jm.displayName="App";zh(document.getElementById("root")).render(s.jsx(N.StrictMode,{children:s.jsx(jm,{})}));
